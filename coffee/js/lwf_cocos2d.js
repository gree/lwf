// Copyright (c) 2012-2013 GREE, Inc - http://git.io/uvS3hQ
// Copyright (c) 2010-2012 Tween.js authors - http://git.io/tiDrNw
// Copyright (c) 2001 Robert Penner - http://goo.gl/Qjqc0
// Copyright (c) 2011 Gary Linscott
// Copyright (c) 2011-2012 Juan Mellado
// Copyright (c) 2013 C. Scott Ananian - http://git.io/QzutCQ
// Copyright (c) 2012 imaya - http://git.io/cC8gDw
(function(){"undefined"==typeof global&&"undefined"!=typeof window?global=window:"undefined"==typeof window&&"undefined"!=typeof self?global=self:"undefined"!=typeof cc&&(global=cc),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q={}.hasOwnProperty,G=function(e,t){function n(){this.constructor=e}for(var r in t)Q.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};W=function(){function e(){}return e.available="undefined"!=typeof Float32Array,e}(),F=function(){return function(e,t){this.x=null!=e?e:0,this.y=null!=t?t:0}}(),U=function(){function e(e,t){null==e&&(e=0),null==t&&(t=0),this._=W.available?new Float32Array(2):[],this._[0]=e,this._[1]=t}return e.prototype.getTranslateX=function(){return this._[0]},e.prototype.setTranslateX=function(e){this._[0]=e},e.prototype.getTranslateY=function(){return this._[1]},e.prototype.setTranslateY=function(e){this._[1]=e},e}(),"undefined"!=typeof U.prototype.__defineGetter__?(U.prototype.__defineGetter__("translateX",function(){return this.getTranslateX()}),U.prototype.__defineSetter__("translateX",function(e){return this.setTranslateX(e)}),U.prototype.__defineGetter__("translateY",function(){return this.getTranslateY()}),U.prototype.__defineSetter__("translateY",function(e){return this.setTranslateY(e)})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(U.prototype,"translateX",{get:function(){return this.getTranslateX()},set:function(e){return this.setTranslateX(e)}}),Object.defineProperty(U.prototype,"translateY",{get:function(){return this.getTranslateY()},set:function(e){return this.setTranslateY(e)}})),D=function(){function e(e,t,n,r,i,s){this._=W.available?new Float32Array(6):[],null!=e?(this._[0]=e,this._[1]=r,this._[2]=n,this._[3]=t,this._[4]=i,this._[5]=s):this.clear()}return e.prototype.clear=function(){this._[0]=1,this._[1]=0,this._[2]=0,this._[3]=1,this._[4]=0,this._[5]=0},e.prototype.set=function(e){var t,n;for(t=n=0;6>n;t=++n)this._[t]=e._[t];return this},e.prototype.setWithComparing=function(e){var t,n,r;if(null===e)return!1;t=!1;for(n=r=0;6>r;n=++r)this._[n]!==e._[n]&&(this._[n]=e._[n],t=!0);return t},e.prototype.getScaleX=function(){return this._[0]},e.prototype.setScaleX=function(e){this._[0]=e},e.prototype.getSkew1=function(){return this._[1]},e.prototype.setSkew1=function(e){this._[1]=e},e.prototype.getSkew0=function(){return this._[2]},e.prototype.setSkew0=function(e){this._[2]=e},e.prototype.getScaleY=function(){return this._[3]},e.prototype.setScaleY=function(e){this._[3]=e},e.prototype.getTranslateX=function(){return this._[4]},e.prototype.setTranslateX=function(e){this._[4]=e},e.prototype.getTranslateY=function(){return this._[5]},e.prototype.setTranslateY=function(e){this._[5]=e},e}(),"undefined"!=typeof D.prototype.__defineGetter__?(D.prototype.__defineGetter__("scaleX",function(){return this.getScaleX()}),D.prototype.__defineSetter__("scaleX",function(e){return this.setScaleX(e)}),D.prototype.__defineGetter__("scaleY",function(){return this.getScaleY()}),D.prototype.__defineSetter__("scaleY",function(e){return this.setScaleY(e)}),D.prototype.__defineGetter__("skew0",function(){return this.getSkew0()}),D.prototype.__defineSetter__("skew0",function(e){return this.setSkew0(e)}),D.prototype.__defineGetter__("skew1",function(){return this.getSkew1()}),D.prototype.__defineSetter__("skew1",function(e){return this.setSkew1(e)}),D.prototype.__defineGetter__("translateX",function(){return this.getTranslateX()}),D.prototype.__defineSetter__("translateX",function(e){return this.setTranslateX(e)}),D.prototype.__defineGetter__("translateY",function(){return this.getTranslateY()}),D.prototype.__defineSetter__("translateY",function(e){return this.setTranslateY(e)})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(D.prototype,"scaleX",{get:function(){return this.getScaleX()},set:function(e){return this.setScaleX(e)}}),Object.defineProperty(D.prototype,"scaleY",{get:function(){return this.getScaleY()},set:function(e){return this.setScaleY(e)}}),Object.defineProperty(D.prototype,"skew0",{get:function(){return this.getSkew0()},set:function(e){return this.setSkew0(e)}}),Object.defineProperty(D.prototype,"skew1",{get:function(){return this.getSkew1()},set:function(e){return this.setSkew1(e)}}),Object.defineProperty(D.prototype,"translateX",{get:function(){return this.getTranslateX()},set:function(e){return this.setTranslateX(e)}}),Object.defineProperty(D.prototype,"translateY",{get:function(){return this.getTranslateY()},set:function(e){return this.setTranslateY(e)}})),g=function(){function e(e,t,n,r){this._=W.available?new Float32Array(4):[],null!=e?(this._[0]=e,this._[1]=t,this._[2]=n,this._[3]=r):(this._[0]=0,this._[1]=0,this._[2]=0,this._[3]=0)}return e.prototype.set=function(e,t,n,r){if("object"==typeof e)for(t=n=0;4>n;t=++n)this._[t]=e._[t];else this._[0]=e,this._[1]=t,this._[2]=n,this._[3]=r},e.prototype.getRed=function(){return this._[0]},e.prototype.setRed=function(e){this._[0]=e},e.prototype.getGreen=function(){return this._[1]},e.prototype.setGreen=function(e){this._[1]=e},e.prototype.getBlue=function(){return this._[2]},e.prototype.setBlue=function(e){this._[2]=e},e.prototype.getAlpha=function(){return this._[3]},e.prototype.setAlpha=function(e){this._[3]=e},e}(),"undefined"!=typeof g.prototype.__defineGetter__?(g.prototype.__defineGetter__("red",function(){return this.getRed()}),g.prototype.__defineSetter__("red",function(e){return this.setRed(e)}),g.prototype.__defineGetter__("green",function(){return this.getGreen()}),g.prototype.__defineSetter__("green",function(e){return this.setGreen(e)}),g.prototype.__defineGetter__("blue",function(){return this.getBlue()}),g.prototype.__defineSetter__("blue",function(e){return this.setBlue(e)}),g.prototype.__defineGetter__("alpha",function(){return this.getAlpha()}),g.prototype.__defineSetter__("alpha",function(e){return this.setAlpha(e)})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(g.prototype,"red",{get:function(){return this.getRed()},set:function(e){return this.setRed(e)}}),Object.defineProperty(g.prototype,"green",{get:function(){return this.getGreen()},set:function(e){return this.setGreen(e)}}),Object.defineProperty(g.prototype,"blue",{get:function(){return this.getBlue()},set:function(e){return this.setBlue(e)}}),Object.defineProperty(g.prototype,"alpha",{get:function(){return this.getAlpha()},set:function(e){return this.setAlpha(e)}})),t=function(){function e(e){this._=W.available?new Float32Array(1):[],this._[0]=e}return e.prototype.getAlpha=function(){return this._[0]},e.prototype.setAlpha=function(e){this._[0]=e},e}(),"undefined"!=typeof t.prototype.__defineGetter__?(t.prototype.__defineGetter__("alpha",function(){return this.getAlpha()}),t.prototype.__defineSetter__("alpha",function(e){return this.setAlpha(e)})):"undefined"!=typeof Object.defineProperty&&Object.defineProperty(t.prototype,"alpha",{get:function(){return this.getAlpha()},set:function(e){return this.setAlpha(e)}}),y=function(){function e(e,t,n,r,i,s,o,u){this.multi=new g(e,t,n,r),null==e&&this.clear()}return e.prototype.clear=function(){this.multi.set(1,1,1,1)},e.prototype.set=function(e){return this.multi.set(e.multi),this},e.prototype.setWithComparing=function(e){var t,n,r,i;if(null===e)return!1;t=!1,e=e.multi,r=this.multi;for(n=i=0;4>i;n=++i)r._[n]!==e._[n]&&(r._[n]=e._[n],t=!0);return t},e}(),T=function(){function e(){}return e.Constant=function(){function e(){}return e.HEADER_SIZE=324,e.FORMAT_VERSION_0=19,e.FORMAT_VERSION_1=18,e.FORMAT_VERSION_2=17,e.FORMAT_VERSION_COMPAT_0=18,e.FORMAT_VERSION_COMPAT_1=16,e.FORMAT_VERSION_COMPAT_2=16,e.FORMAT_TYPE=0,e.OPTION_OFFSET=7,e.OPTION_USE_SCRIPT=1,e.OPTION_USE_TEXTUREATLAS=2,e.OPTION_COMPRESSED=4,e.MATRIX_FLAG=-2147483648,e.COLORTRANSFORM_FLAG=-2147483648,e.TEXTUREFORMAT_NORMAL=0,e.TEXTUREFORMAT_PREMULTIPLIEDALPHA=1,e.BLEND_MODE_NORMAL=0,e.BLEND_MODE_ADD=1,e.BLEND_MODE_LAYER=2,e.BLEND_MODE_ERASE=3,e.BLEND_MODE_MASK=4,e}(),e.StringBase=function(){return function(e){this.stringId=e}}(),e.Texture=function(){function e(e,t,n,r,i){this.stringId=e,this.format=t,this.width=n,this.height=r,this.scale=i}return e.prototype.setFilename=function(e){this.filename=e.strings[this.stringId]},e}(),e.TextureReplacement=function(){return function(e,t,n,r,i){this.filename=e,this.format=t,this.width=n,this.height=r,this.scale=i}}(),e.TextureFragment=function(){function e(e,t,n,r,i,s,o,u,a){this.stringId=e,this.textureId=t,this.rotated=n,this.x=r,this.y=i,this.u=s,this.v=o,this.w=u,this.h=a}return e.prototype.setFilename=function(e){this.filename=e.strings[this.stringId]},e}(),e.TextureFragmentReplacement=function(){return function(e,t,n,r,i,s,o,u,a){this.filename=e,this.textureId=t,this.rotated=n,this.x=r,this.y=i,this.u=s,this.v=o,this.w=u,this.h=a}}(),e.Bitmap=function(){return function(e,t){this.matrixId=e,this.textureFragmentId=t}}(),e.BitmapEx=function(){function e(e,t,n,r,i,s,o){this.matrixId=e,this.textureFragmentId=t,this.attribute=n,this.u=r,this.v=i,this.w=s,this.h=o}return e.Attribute=function(){function e(){}return e.REPEAT_S=1,e.REPEAT_T=2,e}(),e}(),e.Font=function(){return function(e,t){this.stringId=e,this.letterSpacing=t}}(),e.TextProperty=function(){function e(e,t,n,r,i,s,o,u,a,f,l,c,h,p){this.maxLength=e,this.fontId=t,this.fontHeight=n,this.align=r,this.leftMargin=i,this.rightMargin=s,this.letterSpacing=o,this.leading=u,this.strokeColorId=a,this.strokeWidth=f,this.shadowColorId=l,this.shadowOffsetX=c,this.shadowOffsetY=h,this.shadowBlur=p}return e.Align=function(){function e(){}return e.LEFT=0,e.RIGHT=1,e.CENTER=2,e.ALIGN_MASK=3,e.VERTICAL_BOTTOM=4,e.VERTICAL_MIDDLE=8,e.VERTICAL_MASK=12,e}(),e}(),e.Text=function(){return function(e,t,n,r,i,s,o){this.matrixId=e,this.nameStringId=t,this.textPropertyId=n,this.stringId=r,this.colorId=i,this.width=s,this.height=o}}(),e.ParticleData=function(){return function(e){this.stringId=e}}(),e.Particle=function(){return function(e,t,n){this.matrixId=e,this.colorTransformId=t,this.particleDataId=n}}(),e.ProgramObject=function(e){function t(e,n,r,i,s){this.width=n,this.height=r,this.matrixId=i,this.colorTransformId=s,t.__super__.constructor.call(this,e)}return G(t,e),t}(e.StringBase),e.GraphicObject=function(){function e(e,t){this.graphicObjectType=e,this.graphicObjectId=t}return e.Type=function(){function e(){}return e.BITMAP=0,e.BITMAPEX=1,e.TEXT=2,e.GRAPHIC_OBJECT_MAX=3,e}(),e}(),e.Graphic=function(){return function(e,t){this.graphicObjectId=e,this.graphicObjects=t}}(),e.LObject=function(){function e(e,t){this.objectType=e,this.objectId=t}return e.Type=function(){function e(){}return e.BUTTON=0,e.GRAPHIC=1,e.MOVIE=2,e.BITMAP=3,e.BITMAPEX=4,e.TEXT=5,e.PARTICLE=6,e.PROGRAMOBJECT=7,e.ATTACHEDMOVIE=8,e.OBJECT_MAX=9,e}(),e}(),e.Animation=function(){return function(e,t){this.animationOffset=e,this.animationLength=t}}(),e.ButtonCondition=function(){function e(e,t,n){this.condition=e,this.keyCode=t,this.animationId=n}return e.Condition=function(){function e(){}return e.ROLLOVER=1,e.ROLLOUT=2,e.PRESS=4,e.RELEASE=8,e.DRAGOUT=16,e.DRAGOVER=32,e.RELEASEOUTSIDE=64,e.KEYPRESS=128,e}(),e}(),e.Button=function(){return function(e,t,n,r,i,s){this.width=e,this.height=t,this.matrixId=n,this.colorTransformId=r,this.conditionId=i,this.conditions=s}}(),e.Label=function(e){function t(e,n){this.frameNo=n,t.__super__.constructor.call(this,e)}return G(t,e),t}(e.StringBase),e.InstanceName=function(e){function t(e){t.__super__.constructor.call(this,e)}return G(t,e),t}(e.StringBase),e.Event=function(e){function t(e){t.__super__.constructor.call(this,e)}return G(t,e),t}(e.StringBase),e.String=function(){return function(e,t){this.stringOffset=e,this.stringLength=t}}(),e.Place=function(){return function(e,t,n,r,i){this.depth=e,this.objectId=t,this.instanceId=n,this.matrixId=r,this.blendMode=i}}(),e.ControlMoveM=function(){return function(e,t){this.placeId=e,this.matrixId=t}}(),e.ControlMoveC=function(){return function(e,t){this.placeId=e,this.colorTransformId=t}}(),e.ControlMoveMC=function(){return function(e,t,n){this.placeId=e,this.matrixId=t,this.colorTransformId=n}}(),e.Control=function(){function e(e,t){this.controlType=e,this.controlId=t}return e.Type=function(){function e(){}return e.MOVE=0,e.MOVEM=1,e.MOVEC=2,e.MOVEMC=3,e.ANIMATION=4,e.CONTROL_MAX=5,e}(),e}(),e.Frame=function(){return function(e,t){this.controlOffset=e,this.controls=t}}(),e.MovieClipEvent=function(){function e(e,t){this.clipEvent=e,this.animationId=t}return e.ClipEvent=function(){function e(){}return e.LOAD=1,e.UNLOAD=2,e.ENTERFRAME=4,e}(),e}(),e.Movie=function(){return function(e,t,n,r,i,s,o){this.depths=e,this.labelOffset=t,this.labels=n,this.frameOffset=r,this.frames=i,this.clipEventId=s,this.clipEvents=o}}(),e.MovieLinkage=function(e){function t(e,n){this.movieId=n,t.__super__.constructor.call(this,e)}return G(t,e),t}(e.StringBase),e.ItemArray=function(){return function(e,t){this.offset=e,this.length=t}}(),e.Header=function(){return function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q){this.id0=e,this.id1=t,this.id2=n,this.id3=r,this.formatVersion0=i,this.formatVersion1=s,this.formatVersion2=o,this.option=u,this.width=a,this.height=f,this.frameRate=l,this.rootMovieId=c,this.nameStringId=h,this.backgroundColor=p,this.stringBytes=d,this.animationBytes=v,this.translate=m,this.matrix=g,this.color=y,this.alphaTransform=b,this.colorTransform=w,this.objectData=E,this.texture=S,this.textureFragment=x,this.bitmap=T,this.bitmapEx=N,this.font=C,this.textProperty=k,this.text=L,this.particleData=A,this.particle=O,this.programObject=M,this.graphicObject=_,this.graphic=D,this.animation=P,this.buttonCondition=H,this.button=B,this.label=j,this.instanceName=F,this.eventData=I,this.place=q,this.controlMoveM=R,this.controlMoveC=U,this.controlMoveMC=z,this.control=W,this.frame=X,this.movieClipEvent=V,this.movie=$,this.movieLinkage=J,this.stringData=K,this.lwfLength=Q}}(),e}(),e=T.TextProperty.Align,a=T.MovieClipEvent.ClipEvent,b=T.ButtonCondition.Condition,w=T.Constant,z=T.LObject.Type,E=T.Control.Type,N=T.GraphicObject.Type,n=function(){function e(){}return e.END=0,e.PLAY=1,e.STOP=2,e.NEXTFRAME=3,e.PREVFRAME=4,e.GOTOFRAME=5,e.GOTOLABEL=6,e.SETTARGET=7,e.EVENT=8,e.CALL=9,e.INSTANCE_TARGET_ROOT=-1,e.INSTANCE_TARGET_PARENT=-2,e}(),S=function(){function e(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,b,w,E,S,x,N,C,k,L,A,O,M,_,P,H,B,j,F,I){var q,R,z,W,X;this.header=e,this.translates=n,this.matrices=r,this.colors=i,this.alphaTransforms=s,this.colorTransforms=o,this.objects=u,this.textures=a,this.textureFragments=f,this.bitmaps=l,this.bitmapExs=c,this.fonts=h,this.textProperties=p,this.texts=d,this.particleDatas=v,this.particles=m,this.programObjects=b,this.graphicObjects=w,this.graphics=E,this.animations=S,this.buttonConditions=x,this.buttons=N,this.labels=C,this.instanceNames=k,this.events=L,this.places=A,this.controlMoveMs=O,this.controlMoveCs=M,this.controlMoveMCs=_,this.controls=P,this.frames=H,this.movieClipEvents=B,this.movies=j,this.movieLinkages=F,this.strings=I,null!=this.header.header?(z=this.header,this.header=z.header,this.translates=function(){var e,t,n,r;n=z.translates,r=[],e=0;for(t=n.length;e<t;e++)X=n[e],r.push(new U(X._[0],X._[1]));return r}(),this.matrices=function(){var e,t,n,r;n=z.matrices,r=[],e=0;for(t=n.length;e<t;e++)W=n[e],r.push(new D(W._[0],W._[3],W._[2],W._[1],W._[4],W._[5]));return r}(),this.colors=function(){var e,t,n,r;n=z.colors,r=[],e=0;for(t=n.length;e<t;e++)R=n[e],r.push(new g(R._[0],R._[1],R._[2],R._[3]));return r}(),this.alphaTransforms=function(){var e,n,r,i;r=z.alphaTransforms,i=[],e=0;for(n=r.length;e<n;e++)q=r[e],i.push(new t(q._[0]));return i}(),this.colorTransforms=function(){var e,t,n,r;n=z.colorTransforms,r=[],e=0;for(t=n.length;e<t;e++)R=n[e],r.push(new y(R.multi._[0],R.multi._[1],R.multi._[2],R.multi._[3]));return r}(),this.objects=z.objects,this.textures=z.textures,this.textureFragments=z.textureFragments,this.bitmaps=z.bitmaps,this.bitmapExs=z.bitmapExs,this.fonts=z.fonts,this.textProperties=z.textProperties,this.texts=z.texts,this.particleDatas=z.particleDatas,this.particles=z.particles,this.programObjects=z.programObjects,this.graphicObjects=z.graphicObjects,this.graphics=z.graphics,this.animations=z.animations,this.buttonConditions=z.buttonConditions,this.buttons=z.buttons,this.labels=z.labels,this.instanceNames=z.instanceNames,this.events=z.events,this.places=z.places,this.controlMoveMs=z.controlMoveMs,this.controlMoveCs=z.controlMoveCs,this.controlMoveMCs=z.controlMoveMCs,this.controls=z.controls,this.frames=z.frames,this.movieClipEvents=z.movieClipEvents,this.movies=z.movies,this.movieLinkages=z.movieLinkages,this.strings=z.strings,this.stringMap=z.stringMap,this.eventMap=z.eventMap,this.instanceNameMap=z.instanceNameMap,this.movieLinkageMap=z.movieLinkageMap,this.movieLinkageNameMap=z.movieLinkageNameMap,this.programObjectMap=z.programObjectMap,this.labelMap=z.labelMap,this.bitmapMap=z.bitmapMap,this.useScript=z.useScript,this.useTextureAtlas=z.useTextureAtlas):(this.stringMap={},this.eventMap={},this.instanceNameMap={},this.movieLinkageMap={},this.movieLinkageNameMap={},this.programObjectMap={},this.labelMap=[],this.bitmapMap={},null!=this.header?(this.useScript=0!==(this.header.option&T.Constant.OPTION_USE_SCRIPT),this.useTextureAtlas=0!==(this.header.option&T.Constant.OPTION_USE_TEXTUREATLAS)):this.useTextureAtlas=this.useScript=!1)}return e.prototype.check=function(){var e,t,n;return e=this.header.formatVersion0,t=this.header.formatVersion1,n=this.header.formatVersion2,null!=this.header&&"L"===this.header.id0&&"W"===this.header.id1&&"F"===this.header.id2&&(e===T.Constant.FORMAT_VERSION_0&&t===T.Constant.FORMAT_VERSION_1&&n===T.Constant.FORMAT_VERSION_2||e===T.Constant.FORMAT_VERSION_COMPAT_0&&t===T.Constant.FORMAT_VERSION_COMPAT_1&&n===T.Constant.FORMAT_VERSION_COMPAT_2)?!0:!1},e.prototype.name=function(){return this.strings[this.header.nameStringId]},e.prototype.replaceTexture=function(e,t){return 0>e||e>=textures.length?!1:(textures[e]=t,!0)},e.prototype.replaceTextureFragment=function(e,t){return 0>e||e>=textureFragments.length?!1:(textureFragments[e]=t,!0)},e}(),A=function(){function e(){}return e.prototype.readByte=function(){return this.d.charCodeAt(this.index++)&255},e.prototype.readChar=function(){return String.fromCharCode(this.readByte())},e.prototype.readBytes=function(e){var t;return t=this.d.substr(this.index,e),this.index+=e,t},e.prototype.readInt32=function(){return(this.readByte()<<0)+(this.readByte()<<8)+(this.readByte()<<16)+(this.readByte()<<24)},e.prototype.readSingle=function(){var e,t,n,r,i;return r=this.readByte(),n=this.readByte(),t=this.readByte(),e=this.readByte(),i=(e<<1&255|t>>7)-127,t=(t&127)<<16|n<<8|r,0===t&&-127===i?0:(1-2*(e>>7))*(1+t*Math.pow(2,-23))*Math.pow(2,i)},e.prototype.loadTranslate=function(){return new U(this.readSingle(),this.readSingle())},e.prototype.loadMatrix=function(){return new D(this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},e.prototype.loadColor=function(){return new g(this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},e.prototype.loadAlphaTransform=function(){return new t(this.readSingle())},e.prototype.loadColorTransform=function(){var e;return e=this.loadColor(),this.loadColor(),new y(e.red,e.green,e.blue,e.alpha)},e.prototype.loadTexture=function(){return new T.Texture(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle())},e.prototype.loadTextureFragment=function(){return new T.TextureFragment(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},e.prototype.loadBitmap=function(){return new T.Bitmap(this.readInt32(),this.readInt32())},e.prototype.loadBitmapEx=function(){return new T.BitmapEx(this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},e.prototype.loadFont=function(){return new T.Font(this.readInt32(),this.readSingle())},e.prototype.loadTextProperty=function(){return new T.TextProperty(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},e.prototype.loadText=function(){return new T.Text(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},e.prototype.loadParticleData=function(){return new T.ParticleData(this.readInt32())},e.prototype.loadParticle=function(){return new T.Particle(this.readInt32(),this.readInt32(),this.readInt32())},e.prototype.loadProgramObject=function(){return new T.ProgramObject(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},e.prototype.loadGraphicObject=function(){return new T.GraphicObject(this.readInt32(),this.readInt32())},e.prototype.loadGraphic=function(){return new T.Graphic(this.readInt32(),this.readInt32())},e.prototype.loadObject=function(){return new T.LObject(this.readInt32(),this.readInt32())},e.prototype.loadAnimation=function(){return new T.Animation(this.readInt32(),this.readInt32())},e.prototype.loadButtonCondition=function(){return new T.ButtonCondition(this.readInt32(),this.readInt32(),this.readInt32())},e.prototype.loadButton=function(){return new T.Button(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},e.prototype.loadLabel=function(){return new T.Label(this.readInt32(),this.readInt32())},e.prototype.loadInstanceName=function(){return new T.InstanceName(this.readInt32())},e.prototype.loadEvent=function(){return new T.Event(this.readInt32())},e.prototype.loadString=function(){return new T.String(this.readInt32(),this.readInt32())},e.prototype.loadPlace=function(){var e,t,n,r;return e=this.readInt32(),t=this.readInt32(),n=this.readInt32(),r=this.readInt32(),new T.Place(e&16777215,t,n,r,e>>24)},e.prototype.loadControlMoveM=function(){return new T.ControlMoveM(this.readInt32(),this.readInt32())},e.prototype.loadControlMoveC=function(){return new T.ControlMoveC(this.readInt32(),this.readInt32())},e.prototype.loadControlMoveMC=function(){return new T.ControlMoveMC(this.readInt32(),this.readInt32(),this.readInt32())},e.prototype.loadControl=function(){return new T.Control(this.readInt32(),this.readInt32())},e.prototype.loadFrame=function(){return new T.Frame(this.readInt32(),this.readInt32())},e.prototype.loadMovieClipEvent=function(){return new T.MovieClipEvent(this.readInt32(),this.readInt32())},e.prototype.loadMovie=function(){return new T.Movie(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},e.prototype.loadMovieLinkage=function(){return new T.MovieLinkage(this.readInt32(),this.readInt32())},e.prototype.loadItemArray=function(){return new T.ItemArray(this.readInt32(),this.readInt32())},e.prototype.loadHeader=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G;return N=this.readChar(),C=this.readChar(),k=this.readChar(),L=this.readChar(),m=this.readByte(),g=this.readByte(),y=this.readByte(),F=this.readByte(),G=this.readInt32(),x=this.readInt32(),w=this.readInt32(),z=this.readInt32(),B=this.readInt32(),r=this.readInt32(),W=this.loadItemArray(),n=this.loadItemArray(),Q=this.loadItemArray(),_=this.loadItemArray(),a=this.loadItemArray(),e=this.loadItemArray(),f=this.loadItemArray(),j=this.loadItemArray(),J=this.loadItemArray(),K=this.loadItemArray(),i=this.loadItemArray(),s=this.loadItemArray(),v=this.loadItemArray(),$=this.loadItemArray(),V=this.loadItemArray(),q=this.loadItemArray(),I=this.loadItemArray(),U=this.loadItemArray(),S=this.loadItemArray(),E=this.loadItemArray(),t=this.loadItemArray(),u=this.loadItemArray(),o=this.loadItemArray(),O=this.loadItemArray(),A=this.loadItemArray(),d=this.loadItemArray(),R=this.loadItemArray(),h=this.loadItemArray(),c=this.loadItemArray(),p=this.loadItemArray(),l=this.loadItemArray(),b=this.loadItemArray(),P=this.loadItemArray(),D=this.loadItemArray(),H=this.loadItemArray(),X=this.loadItemArray(),M=this.readInt32(),new T.Header(N,C,k,L,m,g,y,F,G,x,w,z,B,r,W,n,Q,_,a,e,f,j,J,K,i,s,v,$,V,q,I,U,S,E,t,u,o,O,A,d,R,h,c,p,l,b,P,D,H,X,M)},e.prototype.load=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p;this.d=e,this.index=0,l=this.loadHeader(),e=new S(l);if(!e.check())return null;f=this.readBytes(l.stringBytes.length),n=this.readBytes(l.animationBytes.length),e.translates=function(){var e,t,n;n=[],c=e=0;for(t=l.translate.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadTranslate());return n}.call(this),e.matrices=function(){var e,t,n;n=[],c=e=0;for(t=l.matrix.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadMatrix());return n}.call(this),e.colors=function(){var e,t,n;n=[],c=e=0;for(t=l.color.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadColor());return n}.call(this),e.alphaTransforms=function(){var e,t,n;n=[],c=e=0;for(t=l.alphaTransform.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadAlphaTransform());return n}.call(this),e.colorTransforms=function(){var e,t,n;n=[],c=e=0;for(t=l.colorTransform.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadColorTransform());return n}.call(this),e.objects=function(){var e,t,n;n=[],c=e=0;for(t=l.objectData.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadObject());return n}.call(this),e.textures=function(){var e,t,n;n=[],c=e=0;for(t=l.texture.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadTexture());return n}.call(this),e.textureFragments=function(){var e,t,n;n=[],c=e=0;for(t=l.textureFragment.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadTextureFragment());return n}.call(this),e.bitmaps=function(){var e,t,n;n=[],c=e=0;for(t=l.bitmap.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadBitmap());return n}.call(this),e.bitmapExs=function(){var e,t,n;n=[],c=e=0;for(t=l.bitmapEx.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadBitmapEx());return n}.call(this),e.fonts=function(){var e,t,n;n=[],c=e=0;for(t=l.font.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadFont());return n}.call(this),e.textProperties=function(){var e,t,n;n=[],c=e=0;for(t=l.textProperty.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadTextProperty());return n}.call(this),e.texts=function(){var e,t,n;n=[],c=e=0;for(t=l.text.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadText());return n}.call(this),e.particleDatas=function(){var e,t,n;n=[],c=e=0;for(t=l.particleData.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadParticleData());return n}.call(this),e.particles=function(){var e,t,n;n=[],c=e=0;for(t=l.particle.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadParticle());return n}.call(this),e.programObjects=function(){var e,t,n;n=[],c=e=0;for(t=l.programObject.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadProgramObject());return n}.call(this),e.graphicObjects=function(){var e,t,n;n=[],c=e=0;for(t=l.graphicObject.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadGraphicObject());return n}.call(this),e.graphics=function(){var e,t,n;n=[],c=e=0;for(t=l.graphic.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadGraphic());return n}.call(this),r=function(){var e,t,n;n=[],c=e=0;for(t=l.animation.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadAnimation());return n}.call(this),e.buttonConditions=function(){var e,t,n;n=[],c=e=0;for(t=l.buttonCondition.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadButtonCondition());return n}.call(this),e.buttons=function(){var e,t,n;n=[],c=e=0;for(t=l.button.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadButton());return n}.call(this),e.labels=function(){var e,t,n;n=[],c=e=0;for(t=l.label.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadLabel());return n}.call(this),e.instanceNames=function(){var e,t,n;n=[],c=e=0;for(t=l.instanceName.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadInstanceName());return n}.call(this),e.events=function(){var e,t,n;n=[],c=e=0;for(t=l.eventData.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadEvent());return n}.call(this),e.places=function(){var e,t,n;n=[],c=e=0;for(t=l.place.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadPlace());return n}.call(this),e.controlMoveMs=function(){var e,t,n;n=[],c=e=0;for(t=l.controlMoveM.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadControlMoveM());return n}.call(this),e.controlMoveCs=function(){var e,t,n;n=[],c=e=0;for(t=l.controlMoveC.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadControlMoveC());return n}.call(this),e.controlMoveMCs=function(){var e,t,n;n=[],c=e=0;for(t=l.controlMoveMC.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadControlMoveMC());return n}.call(this),e.controls=function(){var e,t,n;n=[],c=e=0;for(t=l.control.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadControl());return n}.call(this),e.frames=function(){var e,t,n;n=[],c=e=0;for(t=l.frame.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadFrame());return n}.call(this),e.movieClipEvents=function(){var e,t,n;n=[],c=e=0;for(t=l.movieClipEvent.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadMovieClipEvent());return n}.call(this),e.movies=function(){var e,t,n;n=[],c=e=0;for(t=l.movie.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadMovie());return n}.call(this),e.movieLinkages=function(){var e,t,n;n=[],c=e=0;for(t=l.movieLinkage.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadMovieLinkage());return n}.call(this),h=function(){var e,t,n;n=[],c=e=0;for(t=l.stringData.length;0>t?e>t:e<t;c=0>t?--e:++e)n.push(this.loadString());return n}.call(this),e.animations=[],p=0;for(s=r.length;p<s;p++)t=r[p],i=t.animationOffset,e.animations.push(this.readAnimation(n.slice(i,i+t.animationLength)));e.strings=[],n=e.stringMap,r=0;for(p=h.length;r<p;r++){t=h[r],i=t.stringOffset,i=f.slice(i,i+t.stringLength),t="";for(c=0;c<i.length;)s=i.charCodeAt(c)&255,128>s?(t+=String.fromCharCode(s),++c):6===s>>5?(o=i.charCodeAt(c+1),t+=String.fromCharCode((s&31)<<6|o&63),c+=2):14===s>>4?(o=i.charCodeAt(c+1),u=i.charCodeAt(c+2),s=(s&15)<<12|(o&63)<<6|u&63,t+=String.fromCharCode(s),c+=3):(o=i.charCodeAt(c+1),u=i.charCodeAt(c+2),a=i.charCodeAt(c+3),s=(s&7)<<18|(o&63)<<12|(u&63)<<6|a<<63,t+=String.fromCharCode(s),c+=4);n[t]=e.strings.length,e.strings.push(t)}f=e.instanceNameMap,c=h=0;for(i=e.instanceNames.length;0>i?h>i:h<i;c=0>i?--h:++h)f[e.instanceNames[c].stringId]=c;f=e.eventMap,c=h=0;for(i=e.events.length;0>i?h>i:h<i;c=0>i?--h:++h)f[e.events[c].stringId]=c;f=e.movieLinkageMap,c=h=0;for(i=e.movieLinkages.length;0>i?h>i:h<i;c=0>i?--h:++h)f[e.movieLinkages[c].stringId]=c;f=e.movieLinkageNameMap,c=h=0;for(i=e.movieLinkages.length;0>i?h>i:h<i;c=0>i?--h:++h)f[e.movieLinkages[c].movieId]=e.movieLinkages[c].stringId;f=e.programObjectMap,c=h=0;for(i=e.programObjects.length;0>i?h>i:h<i;c=0>i?--h:++h)f[e.programObjects[c].stringId]=c;f=e.labelMap,t=e.movies,p=0;for(r=t.length;p<r;p++){h=t[p],i=h.labelOffset,n={},o=e.labels.slice(i,i+h.labels),s=0;for(i=o.length;s<i;s++)h=o[s],n[h.stringId]=h.frameNo;f.push(n)}n=e.textures,i=0;for(h=n.length;i<h;i++)f=n[i],f.setFilename(e);i=e.bitmapMap,c=r=0;for(n=e.textureFragments.length;0>n?r>n:r<n;c=0>n?--r:++r)f=e.textureFragments[c],f.setFilename(e),f=f.filename,h=f.match(/(.+)_atlas_.+_info_.+(_.+){6}/),null!=h&&(f=h[1]),i[f]=e.bitmaps.length,e.bitmaps.push(new T.Bitmap(0,c));return e},e.prototype.readByteFromBytes=function(e,t){var n;return n=e.charCodeAt(t++)&255,[t,n]},e.prototype.readInt32FromBytes=function(e,t){var n,r,i,s;return n=this.readByteFromBytes(e,t),t=n[0],n=n[1],r=this.readByteFromBytes(e,t),t=r[0],r=r[1],i=this.readByteFromBytes(e,t),t=i[0],i=i[1],s=this.readByteFromBytes(e,t),t=s[0],[t,(n<<0)+(r<<8)+(i<<16)+(s[1]<<24)]},e.prototype.readAnimation=function(e){var t,r,i,s,o;t=[];for(i=0;;)switch(r=this.readByteFromBytes(e,i),i=r[0],r=r[1],t.push(r),r){case n.GOTOFRAME:case n.GOTOLABEL:case n.EVENT:case n.CALL:r=this.readInt32FromBytes(e,i),i=r[0],r=r[1],t.push(r);break;case n.SETTARGET:r=this.readInt32FromBytes(e,i),i=r[0],r=r[1],t.push(r);for(o=0;0>r?o>r:o<r;0>r?--o:++o)s=this.readInt32FromBytes(e,i),i=s[0],s=s[1],t.push(s);break;case n.END:return t}},e}(),O=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return G(t,e),t.prototype.readByte=function(){return this.d[this.index++]},t.prototype.readBytes=function(e){var t,n;t="";for(n=0;0>e?n>e:n<e;0>e?--n:++n)t+=String.fromCharCode(this.d[this.index++]);return t},t}(A),M=function(e){function t(){this.int32Array=new Int32Array,this.float32Array=new Float32Array}return G(t,e),t.prototype.readByte=function(){return this.d[this.index++]},
t.prototype.readBytes=function(e){var t,n;t="";for(n=0;0>e?n>e:n<e;0>e?--n:++n)t+=String.fromCharCode(this.d[this.index++]);return t},t.prototype.readInt32=function(){var e;return e=this.dInt32[this.index/4],this.index+=4,e},t.prototype.readSingle=function(){var e;return e=this.dFloat32[this.index/4],this.index+=4,e},t.prototype.load=function(e){return this.d=new Uint8Array(e),this.dInt32=new Int32Array(e),this.dFloat32=new Float32Array(e),t.__super__.load.call(this,this.d)},t}(A),_=function(){function e(){}return e.load=function(e){var t;if(null!=e&&"string"==typeof e)return t=new A,t.load(e)},e.loadArray=function(e){var t;if(null!=e)return t=new O,t.load(e)},e.loadArrayBuffer=function(e){var t;if(null!=e)return t=new M,t.load(e)},e}(),X=function(){function e(){}return e.calcMatrixToPoint=function(e,t,n){return n=n._,[n[0]*e+n[2]*t+n[4],n[1]*e+n[3]*t+n[5]]},e.getMatrixDeterminant=function(e){return e=e._,0>e[0]*e[3]-e[2]*e[1]},e.syncMatrix=function(e){var t,n,r,i,s;n=null!=(s=e.matrixId)?s:0,0===(n&w.MATRIX_FLAG)?(t=e.lwf.data.translates[n],s=n=1,r=0,t=t._,t=new D(n,s,0,0,t[0],t[1])):(n&=~w.MATRIX_FLAG,t=e.lwf.data.matrices[n],r=this.getMatrixDeterminant(t),i=t._,n=Math.sqrt(i[0]*i[0]+i[1]*i[1]),r&&(n=-n),s=Math.sqrt(i[3]*i[3]+i[2]*i[2]),r=r?Math.atan2(i[1],-i[0]):Math.atan2(i[1],i[0]),r=r/Math.PI*180),e.property.setMatrix(t,n,s,r)},e.getX=function(e){var t,n;return t=null!=(n=e.matrixId)?n:0,0===(t&w.MATRIX_FLAG)?(e=e.lwf.data.translates[t],e._[0]):(t&=~w.MATRIX_FLAG,e.lwf.data.matrices[t]._[4])},e.getY=function(e){var t,n;return t=null!=(n=e.matrixId)?n:0,0===(t&w.MATRIX_FLAG)?(e=e.lwf.data.translates[t],e._[1]):(t&=~w.MATRIX_FLAG,e.lwf.data.matrices[t]._[5])},e.getScaleX=function(e){var t,n;return t=null!=(n=e.matrixId)?n:0,0===(t&w.MATRIX_FLAG)?1:(t&=~w.MATRIX_FLAG,t=e.lwf.data.matrices[t],e=this.getMatrixDeterminant(t),t=t._,t=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e&&(t=-t),t)},e.getScaleY=function(e){var t,n;return t=null!=(n=e.matrixId)?n:0,0===(t&w.MATRIX_FLAG)?1:(t&=~w.MATRIX_FLAG,e=e.lwf.data.matrices[t]._,Math.sqrt(e[3]*e[3]+e[2]*e[2]))},e.getRotation=function(e){var t,n;return t=null!=(n=e.matrixId)?n:0,0===(t&w.MATRIX_FLAG)?0:(t&=~w.MATRIX_FLAG,t=e.lwf.data.matrices[t],e=this.getMatrixDeterminant(t),t=t._,e=e?Math.atan2(t[1],-t[0]):Math.atan2(t[1],t[0]),e=e/Math.PI*180)},e.syncColorTransform=function(e){var t,n;t=null!=(n=e.colorTransformId)?n:0,0===(t&w.COLORTRANSFORM_FLAG)?(t=e.lwf.data.alphaTransforms[t],t=new y(1,1,1,t._[0])):(t&=~w.COLORTRANSFORM_FLAG,t=e.lwf.data.colorTransforms[t]),e.property.setColorTransform(t)},e.getAlpha=function(e){var t,n;return t=null!=(n=e.colorTransformId)?n:0,0===(t&w.COLORTRANSFORM_FLAG)?(e=e.lwf.data.alphaTransforms[t],e._[0]):(t&=~w.COLORTRANSFORM_FLAG,e.lwf.data.colorTransforms[t]._[3])},e.calcMatrixId=function(e,t,n,r){return 0===r?t.set(n):0===(r&w.MATRIX_FLAG)?(r=e.data.translates[r],e=t._,n=n._,r=r._,e[0]=n[0],e[2]=n[2],e[4]=n[0]*r[0]+n[2]*r[1]+n[4],e[1]=n[1],e[3]=n[3],e[5]=n[1]*r[0]+n[3]*r[1]+n[5]):(r&=~w.MATRIX_FLAG,e=e.data.matrices[r],this.calcMatrix(t,n,e)),t},e.calcMatrix=function(e,t,n){var r;return r=e._,t=t._,n=n._,r[0]=t[0]*n[0]+t[2]*n[1],r[2]=t[0]*n[2]+t[2]*n[3],r[4]=t[0]*n[4]+t[2]*n[5]+t[4],r[1]=t[1]*n[0]+t[3]*n[1],r[3]=t[1]*n[2]+t[3]*n[3],r[5]=t[1]*n[4]+t[3]*n[5]+t[5],e},e.rotateMatrix=function(e,t,n,r,i){var s;return r*=n,i*=n,s=e._,t=t._,s[0]=-t[2]*n,s[2]=t[0]*n,s[4]=t[0]*r+t[2]*i+t[4],s[1]=-t[3]*n,s[3]=t[1]*n,s[5]=t[1]*r+t[3]*i+t[5],e},e.scaleMatrix=function(e,t,n,r,i){var s;return r*=n,i*=n,s=e._,t=t._,s[0]=t[0]*n,s[2]=t[2]*n,s[4]=t[0]*r+t[2]*i+t[4],s[1]=t[1]*n,s[3]=t[3]*n,s[5]=t[1]*r+t[3]*i+t[5],e},e.fitForHeight=function(e,t,n){n/=e.height,e.setTextScale(n),e.property.scale(n,n),e.property.move((t-e.width*n)/2,0)},e.fitForWidth=function(e,t,n){t/=e.width,e.setTextScale(t),e.property.scale(t,t),e.property.move(0,(n-e.height*t)/2)},e.scaleForHeight=function(e,t,n){t=n/e.height,e.setTextScale(t),e.property.scale(t,t)},e.scaleForWidth=function(e,t,n){t/=e.width,e.setTextScale(t),e.property.scale(t,t)},e.copyMatrix=function(e,t){return null!==t?e.set(t):e.clear(),e},e.invertMatrix=function(e,t){var n,r,i;n=e._,i=t._,r=i[0]*i[3]-i[2]*i[1],0!==r?(n[0]=i[3]/r,n[2]=-i[2]/r,n[4]=(i[2]*i[5]-i[4]*i[3])/r,n[1]=-i[1]/r,n[3]=i[0]/r,n[5]=(i[4]*i[1]-i[0]*i[5])/r):e.clear()},e.calcColorTransformId=function(e,t,n,r){var i;if(0===r)t.set(n);else if(0===(r&w.COLORTRANSFORM_FLAG)){e=e.data.alphaTransforms[r];for(r=i=0;3>i;r=++i)t.multi._[r]=n.multi._[r];t.multi._[3]=n.multi._[3]*e._[0]}else r&=~w.COLORTRANSFORM_FLAG,e=e.data.colorTransforms[r],this.calcColorTransform(t,n,e);return t},e.calcColorTransform=function(e,t,n){var r,i,s;r=e.multi._,t=t.multi._,i=n.multi._;for(n=s=0;4>s;n=++s)r[n]=t[n]*i[n];return e},e.copyColorTransform=function(e,t){return null!==t?e.set(t):e.clear(),e},e.calcColor=function(e,t,n){var r,i;e=e._,t=t._,r=n.multi._;for(n=i=0;4>i;n=++i)e[n]=t[n]*r[n]},e.newIntArray=function(){return[]},e.clearIntArray=function(e){e.length=0},e.insertIntArray=function(e,t){var n;0===e.length||t>e[e.length-1]?e.push(t):(n=this.locationOfIntArray(e,t,0,e.length-1),e[n]!==t&&e.splice(n,0,t))},e.deleteIntArray=function(e,t){var n;n=this.locationOfIntArray(e,t,0,e.length-1),e[n]===t&&e.splice(n,1)},e.locationOfIntArray=function(e,t,n,r){for(var i;n<=r;)if(i=(n+r)/2>>0,t>e[i])n=i+1;else{if(t>=e[i])return i;r=i-1}return n},e}(),B=function(){function e(){}return e.prototype.constructBitmap=function(e,t,n){return null},e.prototype.constructBitmapEx=function(e,t,n){return null},e.prototype.constructText=function(e,t,n){return null},e.prototype.constructParticle=function(e,t,n){return null},e.prototype.init=function(e){},e.prototype.beginRender=function(e){},e.prototype.endRender=function(e){},e.prototype.destruct=function(){},e}(),x=function(){function e(e,t,n,r){this.lwf=e,this.parent=t,this.type=n,this.objectId=r,this.colorTransformId=this.matrixId=null,this.colorTransformIdChanged=this.matrixIdChanged=!0,this.matrix=new D(0,0,0,0,0,0),this.colorTransform=new y(0,0,0,0),this.execCount=0,this.updated=!1,this.isButton=this.type===z.BUTTON,this.isMovie=this.type===z.MOVIE||this.type===z.ATTACHEDMOVIE,this.isParticle=this.type===z.PARTICLE,this.isProgramObject=this.type===z.PROGRAMOBJECT,this.isText=this.type===z.TEXT,this.isBitmapClip=!1}return e.prototype.exec=function(e,t){null==e&&(e=0),null==t&&(t=0),this.matrixId!==e&&(this.matrixIdChanged=!0,this.matrixId=e),this.colorTransformId!==t&&(this.colorTransformIdChanged=!0,this.colorTransformId=t)},e.prototype.update=function(e,t){this.updated=!0,null!==e&&(X.calcMatrixId(this.lwf,this.matrix,e,this.dataMatrixId),this.matrixIdChanged=!1),null!==t&&(X.copyColorTransform(this.colorTransform,t),this.colorTransformIdChanged=!1),this.lwf.renderObject()},e.prototype.render=function(e,t){var n,r,i;null!=this.renderer&&(r=this.lwf.renderingIndex,i=this.lwf.renderingIndexOffsetted,n=this.lwf.renderingCount,t!==Number.MIN_VALUE&&(r=i-t+n),this.renderer.render(this.matrix,this.colorTransform,r,n,e)),this.lwf.renderObject()},e.prototype.inspect=function(e,t,n,r){var i,s,o;s=this.lwf.renderingIndex,o=this.lwf.renderingIndexOffsetted,i=this.lwf.renderingCount,r!==Number.MIN_VALUE&&(s=o+r+i),e(this,t,n,s),this.lwf.renderObject()},e.prototype.destroy=function(){this.renderer&&(this.renderer.destruct(),this.renderer=null),this.lwf=this.parent=null},e}(),C=function(e){function t(e,n,i){var o,u,a,f,l,c,h;t.__super__.constructor.call(this,e,n,z.GRAPHIC,i),i=e.data.graphics[i],l=i.graphicObjects,this.displayList=[],a=e.data.graphicObjects;for(f=h=0;0>l?h>l:h<l;f=0>l?--h:++h)if(o=a[i.graphicObjectId+f],u=o.graphicObjectId,-1!==u){switch(o.graphicObjectType){case N.BITMAP:c=new r(e,n,u);break;case N.BITMAPEX:c=new s(e,n,u);break;case N.TEXT:c=new R(e,n,u)}c.exec(),this.displayList[f]=c}}return G(t,e),t.prototype.update=function(e,t){var n,r,i,s,o,u,a,f;r=this.matrix.setWithComparing(e),n=this.colorTransform.setWithComparing(t),f=this.displayList,u=0;for(a=f.length;u<a;u++)i=f[u],o=r||!i.updated||i.matrixIdChanged?e:null,s=n||!i.updated||i.colorTransformIdChanged?t:null,i.update(o,s)},t.prototype.render=function(e,t){var n,r,i,s;s=this.displayList,r=0;for(i=s.length;r<i;r++)n=s[r],n.render(e,t)},t.prototype.inspect=function(e,n,r,i){var s,o,u,a;t.__super__.inspect.call(this,e,n,r,i),++n,a=this.displayList,o=0;for(u=a.length;o<u;o++)s=a[o],s.inspect(e,n,r,i)},t.prototype.destroy=function(){var e,t,n,r;r=this.displayList,t=0;for(n=r.length;t<n;t++)e=r[t],e.destroy();this.displayList=null},t}(x),r=function(e){function t(e,n,r){t.__super__.constructor.call(this,e,n,z.BITMAP,r),this.dataMatrixId=e.data.bitmaps[r].matrixId,this.renderer=e.rendererFactory.constructBitmap(e,r,this)}return G(t,e),t}(x),s=function(e){function t(e,n,r){t.__super__.constructor.call(this,e,n,z.BITMAPEX,r),this.dataMatrixId=e.data.bitmapExs[r].matrixId,this.renderer=e.rendererFactory.constructBitmapEx(e,r,this)}return G(t,e),t}(x),R=function(e){function t(e,n,r,i){null==i&&(i=-1),t.__super__.constructor.call(this,e,n,z.TEXT,r),n=e.data.texts[r],this.dataMatrixId=n.matrixId,-1!==n.nameStringId?this.name=e.data.strings[n.nameStringId]:0<=i&&i<e.data.instanceNames.length&&(i=e.getInstanceNameStringId(i),-1!==i&&(this.name=e.data.strings[i])),this.renderer=e.rendererFactory.constructText(e,r,this)}return G(t,e),t}(x),j=function(e){function t(e,n,r){t.__super__.constructor.call(this,e,n,z.PARTICLE,r),this.dataMatrixId=e.data.particles[r].matrixId,this.renderer=e.rendererFactory.constructParticle(e,r,this)}return G(t,e),t.prototype.update=function(e,n){t.__super__.update.call(this,e,n),null!=this.renderer&&this.renderer.update(this.matrix,this.colorTransform)},t}(x),I=function(e){function t(e,n,r){t.__super__.constructor.call(this,e,n,z.PROGRAMOBJECT,r),n=e.data.programObjects[r],this.dataMatrixId=n.matrixId,e=e.getProgramObjectConstructor(r),null!=e&&(this.renderer=e(this,r,n.width,n.height))}return G(t,e),t.prototype.update=function(e,n){t.__super__.update.call(this,e,n),null!=this.renderer&&this.renderer.update(this.matrix,this.colorTransform)},t}(x),d=function(e){function t(e,n,r,i,s){t.__super__.constructor.call(this,e,n,r,i),this.linkInstance=this.nextInstance=this.prevInstance=null,this.instanceId=s<e.data.instanceNames.length?s:-1,0<=this.instanceId&&(r=e.getInstanceNameStringId(this.instanceId),-1!==r&&(this.name=e.data.strings[r],null!=n&&(n[this.name]=this)),e=this.lwf.getInstance(this.instanceId),null!=e&&(e.prevInstance=this),this.nextInstance=e,this.lwf.setInstance(this.instanceId,this))}return G(t,e),t.prototype.destroy=function(){var e;this.type!==z.ATTACHEDMOVIE&&0<=this.instanceId&&(e=this.lwf.getInstance(this.instanceId),e===this&&this.lwf.setInstance(this.instanceId,this.nextInstance),null!=this.nextInstance&&(this.nextInstance.prevInstance=this.prevInstance),null!=this.prevInstance&&(this.prevInstance.nextInstance=this.nextInstance)),null!=this.name&&"undefined"!=typeof parent&&null!==parent&&delete parent[this.name],this.linkInstance=this.nextInstance=this.prevInstance=null,t.__super__.destroy.call(this)},t.prototype.linkButton=function(){},t.prototype.getFullName=function(){var e,t,n;n=e="";for(t=this;null!=t;){if(null==t.name)return null;e=t.name+n+e,n=".",t=t.parent}return e},t}(x),o=function(e){function t(e,n,r,i,s,o){null==s&&(s=null),null==o&&(o=null),t.__super__.constructor.call(this,e,n,z.BUTTON,r,i),this.matrixId=s,this.colorTransformId=o,this.invert=new D,this.hitY=this.hitX=Number.MIN_VALUE,0>r?this.height=this.width=0:(this.data=e.data.buttons[r],this.dataMatrixId=this.data.matrixId,this.width=this.data.width,this.height=this.data.height),this.handler=e.getButtonEventHandlers(this),null!=this.handler&&this.handler.call("load",this)}return G(t,e),t.prototype.setHandlers=function(e){null!=this.handler?this.handler.concat(e):this.handler=e},t.prototype.exec=function(e,n){null==e&&(e=0),null==n&&(n=0),t.__super__.exec.call(this,e,n),this.enterFrame()},t.prototype.update=function(e,n){t.__super__.update.call(this,e,n),null!=this.handler&&this.handler.call("update",this)},t.prototype.render=function(e,t){null!=this.handler&&this.handler.call("render",this)},t.prototype.destroy=function(){this.lwf.clearFocus(this),this.lwf.clearPressed(this),null!=this.handler&&this.handler.call("unload",this),t.__super__.destroy.call(this)},t.prototype.linkButton=function(){this.lwf.focus===this&&(this.lwf.focusOnLink=!0),this.buttonLink=this.lwf.buttonHead,this.lwf.buttonHead=this},t.prototype.checkHit=function(e,t){var n,r;return X.invertMatrix(this.invert,this.matrix),r=X.calcMatrixToPoint(e,t,this.invert),n=r[0],r=r[1],0<=n&&n<this.data.width&&0<=r&&r<this.data.height?(this.hitX=n,this.hitY=r,!0):(this.hitY=this.hitX=Number.MIN_VALUE,!1)},t.prototype.enterFrame=function(){null!=this.handler&&this.handler.call("enterFrame",this)},t.prototype.rollOver=function(){null!=this.handler&&this.handler.call("rollOver",this),this.playAnimation(b.ROLLOVER)},t.prototype.rollOut=function(){null!=this.handler&&this.handler.call("rollOut",this),this.playAnimation(b.ROLLOUT)},t.prototype.press=function(){null!=this.handler&&this.handler.call("press",this),this.playAnimation(b.PRESS)},t.prototype.release=function(){null!=this.handler&&this.handler.call("release",this),this.playAnimation(b.RELEASE)},t.prototype.keyPress=function(e){null!=this.handler&&this.handler.call("keyPress",this),this.playAnimation(b.KEYPRESS,e)},t.prototype.playAnimation=function(e,t){var n,r,i,s;null==t&&(t=0),r=this.lwf.data.buttonConditions,n=i=0;for(s=this.data.conditions;0>s?i>s:i<s;n=0>s?--i:++i)n=r[this.data.conditionId+n],0===(n.condition&e)||e===b.KEYPRESS&&n.keyCode!==t||this.lwf.playAnimation(n.animationId,this.parent,this)},t.prototype.addEventHandler=function(e,t){switch(e){case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":this.lwf.setInteractive(),this.lwf.enableExec(),null==this.handler&&this.setHandlers(new u),this.handler.addHandler(e,t)}},t.prototype.removeEventHandler=function(e,t){switch(e){case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":null!=this.handler&&this.handler.removeHandler(e,t)}},t.prototype.clearEventHandler=function(e){null==e&&(e=null);switch(e){case null:null!=this.handler&&this.handler.clear();break;case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":null!=this.handler&&this.handler.clear(e)}},t.prototype.setEventHandler=function(e,t){this.clearEventHandler(e),this.addEventHandler(e,t)},t}(d),L=function(e){function t(e,t){this.parent=e,this.child=t,this.lwf=this.parent.lwf}return G(t,e),t.prototype.checkHit=function(e,t){return null!==this.child.inputPoint(e,t)?!0:!1},t.prototype.rollOver=function(){},t.prototype.rollOut=function(){null!=this.child.focus&&(this.child.focus.rollOut(),this.child.clearFocus(this.child.focus))},t.prototype.press=function(){this.child.inputPress()},t.prototype.release=function(){this.child.inputRelease()},t.prototype.keyPress=function(e){this.child.inputKeyPress(e)},t}(o),q=function(){function e(e){this.lwf=e,this.matrix=new D,this.colorTransform=new y,this.scaleY=this.scaleX=1,this.rotation=0,this.hasColorTransform=this.hasMatrix=!1,this.clearRenderingOffset()}return e.prototype.clear=function(){this.scaleY=this.scaleX=1,this.rotation=0,this.matrix.clear(),this.colorTransform.clear(),(this.hasMatrix||this.hasColorTransform)&&this.lwf.setPropertyDirty(),this.hasColorTransform=this.hasMatrix=!1,this.clearRenderingOffset()},e.prototype.move=function(e,t){this.matrix._[4]+=e,this.matrix._[5]+=t,this.hasMatrix=!0,this.lwf.setPropertyDirty()},e.prototype.moveTo=function(e,t){this.matrix._[4]=e,this.matrix._[5]=t,this.hasMatrix=!0,this.lwf.setPropertyDirty()},e.prototype.rotate=function(e){this.rotateTo(this.rotation+e)},e.prototype.rotateTo=function(e){this.rotation=e,this.setScaleAndRotation()},e.prototype.scale=function(e,t){this.scaleX*=e,this.scaleY*=t,this.setScaleAndRotation()},e.prototype.scaleTo=function(e,t){this.scaleX=e,this.scaleY=t,this.setScaleAndRotation()},e.prototype.setScaleAndRotation=function(){var e,t;t=this.rotation*Math.PI/180,0===t?(e=1,t=0):(e=Math.cos(t),t=Math.sin(t)),this.matrix._[0]=this.scaleX*e,this.matrix._[2]=this.scaleY*-t,this.matrix._[1]=this.scaleX*t,this.matrix._[3]=this.scaleY*e,this.hasMatrix=!0,this.lwf.setPropertyDirty()},e.prototype.setMatrix=function(e,t,n,r){this.scaleX=null!=t?t:1,this.scaleY=null!=n?n:1,this.rotation=null!=r?r:0,this.matrix.set(e),this.hasMatrix=!0,this.lwf.setPropertyDirty()},e.prototype.setAlpha=function(e){this.colorTransform.multi._[3]=e,this.hasColorTransform=!0,this.lwf.setPropertyDirty()},e.prototype.setColorTransform=function(e){this.colorTransform.set(e),this.hasColorTransform=!0,this.lwf.setPropertyDirty()},e.prototype.setRenderingOffset=function(e){this.renderingOffset=e,this.hasRenderingOffset=!0},e.prototype.clearRenderingOffset=function(){this.renderingOffset=Number.MIN_VALUE,this.hasRenderingOffset=!1},e}(),i=function(e){function t(e,n,r){var i;t.__super__.constructor.call(this,e,n,z.BITMAP,r),this.isBitmapClip=!0,n=e.data.bitmaps[r],i=e.data.textureFragments[n.textureFragmentId],this.width=i.w,this.height=i.h,this.dataMatrixId=n.matrixId,this.renderer=e.rendererFactory.constructBitmap(e,r,this),this.depth=-1,this.visible=!0,this.y=this.x=this.regY=this.regX=0,this.scaleY=this.scaleX=1,this.rotation=0,this.alpha=1,this._scaleX=this.scaleX,this._scaleY=this.scaleY,this._rotation=this.rotation,this._cos=1,this._sin=0,this._=W.available?new Float32Array(8):[],this._[0]=1,this._[1]=0,this._[2]=0,this._[3]=1,this._[4]=0,this._[5]=0,this._[6]=0,this._[7]=0}return G(t,e),t.prototype.update=function(e,t){var n,r,i,s;i=this.matrix._,n=e._,s=this._,this.rotation!==this._rotation?(this._rotation=this.rotation,r=this._rotation*Math.PI/180,0===r?(this._cos=1,this._sin=0):(this._cos=Math.cos(r),this._sin=Math.sin(r)),r=!0):r=!1;if(r||this._scaleX!==this.scaleX||this._scaleY!==this.scaleY)this._scaleX=this.scaleX,this._scaleY=this.scaleY,s[0]=this._scaleX*this._cos,s[1]=this._scaleX*this._sin,s[2]=this._scaleY*-this._sin,s[3]=this._scaleY*this._cos;s[4]=this.x,s[6]=this.regX,s[4]-=s[6],s[5]=this.y,s[7]=this.regY,s[5]-=s[7],i[0]=n[0]*s[0]+n[2]*s[1],i[2]=n[0]*s[2]+n[2]*s[3],i[4]=n[0]*s[4]+n[2]*s[5]+n[4]+n[0]*s[6]+n[2]*s[7]+i[0]*-s[6]+i[2]*-s[7],i[1]=n[1]*s[0]+n[3]*s[1],i[3]=n[1]*s[2]+n[3]*s[3],i[5]=n[1]*s[4]+n[3]*s[5]+n[5]+n[1]*s[6]+n[3]*s[7]+i[1]*-s[6]+i[3]*-s[7],i=this.colorTransform.multi._,n=t.multi._;if(1===this.alpha)for(s=r=0;4>r;s=++r)i[s]=n[s];else{for(s=r=0;3>r;s=++r)i[s]=n[s];i[3]=this.alpha*n[3]}this.lwf.renderObject()},t.prototype.setMatrix=function(e){var t,n;for(t=n=0;6>n;t=++n)this._[t]=e._[t]},t.prototype.detachFromParent=function(){null!=this.parent&&(this.parent.detachBitmap(this.depth),this.parent=null)},t}(x),P=function(e){function t(e,n,r,i,s,o,u,f,l){var c;null==s&&(s=null),null==o&&(o=null),null==u&&(u=!1),null==f&&(f=null),null==l&&(l=null),t.__super__.constructor.call(this,e,n,u?z.ATTACHEDMOVIE:z.MOVIE,r,i),null!=l&&(this.name=l),this.matrixId=s,this.colorTransformId=o,this.data=e.data.movies[r],this.totalFrames=this.data.frames,this.instanceTail=this.instanceHead=null,this.lastControls=this.lastControlOffset=this.animationPlayedFrame=this.execedFrame=this.currentFrameInternal=-1,this.lastHasButton=!1,this.lastControlAnimationOffset=-1,this.postLoaded=this.skipped=!1,this.playing=this.visible=this.active=!0,this.attachMoviePostExeced=this.attachMovieExeced=this.overriding=this.jumped=!1,this.postExecCount=this.movieExecCount=-1,this.eventHandlers={},this.requestedCalculateBounds=!1,this.calculateBoundsCallback=null,this.property=new q(e),this.matrix0=new D,this.matrix1=new D,this.colorTransform0=new y,this.colorTransform1=new y,this.blendMode="normal",this.displayList=[],this.depth=this.attachName=null,this.hasButton=!1,this.getMovieFunctions(),r===this.lwf.data.header.rootMovieId&&(n=null!=(c=this.lwf.functions)?c.init:void 0,null!=n&&n.call(this)),null!=this.loadFunc&&this.loadFunc.call(this),this.playAnimation(a.LOAD),this.handler=new H,this.handler.concat(e.getMovieEventHandlers(this)),this.handler.concat(f),this.handler.empty||this.handler.call("load",this),e.execMovieCommand()}return G(t,e),t.prototype.getMovieFunctions=function(){var e;e=this.lwf.getMovieFunctions(this.objectId),this.loadFunc=e[0],this.postLoadFunc=e[1],this.unloadFunc=e[2],this.enterFrameFunc=e[3]},t.prototype.setHandlers=function(e){this.handler.concat(e)},t.prototype.play=function(){return this.playing=!0,this},t.prototype.stop=function(){return this.playing=!1,this},t.prototype.nextFrame=function(){return this.jumped=!0,this.stop(),this.currentFrameInternal<this.totalFrames-1&&++this.currentFrameInternal,this},t.prototype.prevFrame=function(){return this.jumped=!0,this.stop(),0<this.currentFrameInternal&&--this.currentFrameInternal,this},t.prototype.gotoFrame=function(e){return this.gotoFrameInternal(e-1)},t.prototype.gotoFrameInternal=function(e){return this.jumped=!0,this.stop(),this.currentFrameInternal=e,this},t.prototype.setVisible=function(e){return this.visible=e,this},t.prototype.globalToLocal=function(e){var t,n;return this.property.hasMatrix?(n=new D,n=X.calcMatrix(n,this.matrix,this.property.matrix)):n=this.matrix,t=new D,X.invertMatrix(t,n),e=X.calcMatrixToPoint(e.x,e.y,t),new F(e[0],e[1])},t.prototype.localToGlobal=function(e){var t;return this.property.hasMatrix?(t=new D,t=X.calcMatrix(t,this.matrix,this.property.matrix)):t=this.matrix,e=X.calcMatrixToPoint(e.x,e.y,t),new F(e[0],e[1])},t.prototype.getDepth=function(e){return 0===e.length?0:e[e.length-1]+1},t.prototype.reorderList=function(e,t,n,r,i,s){var o;X.insertIntArray(t,r),n[r]=i;if(e){e=0,r={};for(o in n)i=n[o],s(i,e),t[e]=e,r[e]=i,++e;n=r}return n},t.prototype.deleteAttachedMovie=function(e,t,n,r){var i,s;null==n&&(n=!0),null==r&&(r=!0),i=t.attachName,s=t.depth,delete e.attachedMovies[i],delete e.attachedMovieList[s],X.deleteIntArray(e.attachedMovieListKeys,s),r&&delete e.detachedMovies[i],delete e[i];if(n)return t.destroy()},t.prototype.attachMovie=function(e,n,r){var i,s,o,u,a;null==r&&(r=null);if(e instanceof k)return this.attachLWF(e,n,r);null==r&&(r={}),i=r.depth,u=null!=(a=r.reorder)?a:!1;if(e instanceof t&&e.lwf===this.lwf)s=e,this.deleteAttachedMovie(s.parent,s,!1);else{if("string"!=typeof e)return null;if(o=this.lwf.searchMovieLinkage(this.lwf.getStringId(e)),-1===o)return null}return null==this.attachedMovies&&(this.attachedMovies={},this.detachedMovies={},this.attachedMovieList={},this.attachedMovieListKeys=X.newIntArray()),e=this.attachedMovies[n],null!=e&&this.deleteAttachedMovie(this,e),u||null==i||(e=this.attachedMovieList[i],null!=e&&this.deleteAttachedMovie(this,e)),e=new H,e.add(r),null!=s?(s.parent=this,s.setHandlers(e)):(s=new t(this.lwf,this,o,-1,0,0,!0,e,n),this.attachMovieExeced&&s.exec(),this.attachMoviePostExeced&&s.postExec(!0)),s.attachName=n,null==i&&(i=this.getDepth(this.attachedMovieListKeys)),s.depth=i,this.attachedMovies[n]=s,this.attachedMovieList=this.reorderList(u,this.attachedMovieListKeys,this.attachedMovieList,s.depth,s,function(e,t){return e.depth=t}),this[n]=s},t.prototype.attachEmptyMovie=function(e,t){return null==t&&(t=null),this.attachMovie("_empty",e,t)},t.prototype.swapAttachedMovieDepth=function(e,t){var n,r;null!=this.attachedMovies&&e!==t&&(n=this.attachedMovieList[e],r=this.attachedMovieList[t],null!=n?(n.depth=t,this.attachedMovieList[t]=n,X.insertIntArray(this.attachedMovieListKeys,t)):(delete this.attachedMovieList[t],X.deleteIntArray(this.attachedMovieListKeys,t)),null!=r?(r.depth=e,this.attachedMovieList[e]=r,X.insertIntArray(this.attachedMovieListKeys,e)):(delete this.attachedMovieList[e],X.deleteIntArray(this.attachedMovieListKeys,e)))},t.prototype.getAttachedMovie=function(e){if(null==this.attachedMovies)return null;switch(typeof e){case"string":return this.attachedMovies[e];case"number":return this.attachedMovieList[e]}},t.prototype.searchAttachedMovie=function(e,t){var n,r;null==t&&(t=!0),n=this.getAttachedMovie(e);if(null!=n)return n;if(!t)return null;for(r=this.instanceHead;null!==r;){if(r.isMovie&&(n=r.searchAttachedMovie(e,t),null!==n))return n;r=r.linkInstance}return null},t.prototype.detachMovie=function(e){var n;if(null!=this.detachedMovies)if(e instanceof t)null!=(null!=e?e.attachName:void 0)&&(this.detachedMovies[e.attachName]=!0);else switch(typeof e){case"string":this.detachedMovies[e]=!0;break;case"number":e=null!=(n=this.attachedMovieList)?n[e]:void 0,null!=(null!=e?e.attachName:void 0)&&(this.detachedMovies[e.attachName]=!0)}},t.prototype.detachFromParent=function(){this.type===z.ATTACHEDMOVIE&&(this.active=!1,null!=this.parent&&this.parent.detachMovie(this))},t.prototype.removeMovieClip=function(){null!=this.attachName?null!=this.parent&&this.parent.detachMovie(this):null!=this.lwf.attachName&&null!=this.lwf.parent&&this.lwf.parent.detachLWF(this.lwf)},t.prototype.attachBitmap=function(e,t){var n;return n=this.lwf.data.bitmapMap[e],null==n?null:(n=new i(this.lwf,this,n),null!=this.bitmapClips?this.detachBitmap(t):this.bitmapClips=[],this.bitmapClips[t]=n,n.depth=t,n.name=e,n)},t.prototype.getAttachedBitmaps=function(){return this.bitmapClips},t.prototype.getAttachedBitmap=function(e){return null==this.bitmapClips?null:this.bitmapClips[e]},t.prototype.detachBitmap=function(e){var t;null!=this.bitmapClips&&(t=this.bitmapClips[e],null!=t&&(t.destroy(),this.bitmapClips[e]=null))},t.prototype.execDetachHandler=function(e){e=e.child,null!=e.detachHandler?e.detachHandler(e)?e.destroy():(e.setAttachVisible(!1),e.render()):e.destroy(),e.parent=null,e.detachHandler=null,e.attachName=null},t.prototype.deleteAttachedLWF=function(e,t,n,r){var i,s;null==n&&(n=!0),null==r&&(r=!0),i=t.child.attachName,s=t.child.depth,delete e.attachedLWFs[i],delete e.attachedLWFList[s],X.deleteIntArray(e.attachedLWFListKeys,s),r&&delete e.detachedLWFs[i],delete e[i];if(n)return this.execDetachHandler(t)},t.prototype.attachLWF=function(e,t,n){var r,i,s;null==n&&(n=null),null==n&&(n={}),r=n.depth,s=null!=(i=n.reorder)?i:!1,n=n.detach,null==this.attachedLWFs&&(this.attachedLWFs={},this.detachedLWFs={},this.attachedLWFList={},this.attachedLWFListKeys=X.newIntArray()),null!=e.parent&&(i=e.parent.attachedLWFs[e.attachName],this.deleteAttachedLWF(e.parent,i,!1)),i=this.attachedLWFs[t],null!=i&&this.deleteAttachedLWF(this,i),s||null==r||(i=this.attachedLWFList[r],null!=i&&this.deleteAttachedLWF(this,i)),i=new L(this,e),e.interactive&&this.lwf.setInteractive(),e.setParent(this),e.rootMovie.parent=this,e.detachHandler=n,e.attachName=t,null==r&&(r=this.getDepth(this.attachedLWFListKeys)),e.depth=r,this.attachedLWFs[t]=i,this.attachedLWFList=this.reorderList(s,this.attachedLWFListKeys,this.attachedLWFList,e.depth,i,function(e,t){return e.child.depth=t}),this[t]=e.rootMovie,null!=e.lwfInstanceId&&delete this.lwf.loadedLWFs[e.lwfInstanceId],this.lwf.isLWFAttached=!0},t.prototype.swapAttachedLWFDepth=function(e,t){var n,r;null!=this.attachedLWFs&&e!==t&&(n=this.attachedLWFList[e],r=this.attachedLWFList[t],null!=n?(n.child.depth=t,this.attachedLWFList[t]=n,X.insertIntArray(this.attachedLWFListKeys,t)):(delete this.attachedLWFList[t],X.deleteIntArray(this.attachedLWFListKeys,t)),null!=r?(r.child.depth=e,this.attachedLWFList[e]=r,X.insertIntArray(this.attachedLWFListKeys,e)):(delete this.attachedLWFList[e],X.deleteIntArray(this.attachedLWFListKeys,e)))},t.prototype.swapDepths=function(e){e instanceof t?null!=this.attachName?this.parent.swapAttachedMovieDepth(this.depth,e.depth):this.lwf===e.lwf&&null!=this.lwf.attachName&&this.parent.swapAttachedLWFDepth(this.lwf.depth,e.lwf.depth):null!=this.attachName?this.parent.swapAttachedMovieDepth(this.depth,e):null!=this.lwf.attachName&&this.parent.swapAttachedLWFDepth(this.lwf.depth,e)},t.prototype.getAttachedLWF=function(e){var t,n;if(null==this.attachedLWFs)return null;switch(typeof e){case"string":return null!=(t=this.attachedLWFs[e])?t.child:void 0;case"number":return null!=(n=this.attachedLWFList[e])?n.child:void 0}},t.prototype.searchAttachedLWF=function(e,t){var n,r;null==t&&(t=!0),n=this.getAttachedLWF(e);if(null!=n)return n;if(!t)return null;for(r=this.instanceHead;null!==r;){if(r.isMovie&&(n=r.searchAttachedLWF(e,t),null!==n))return n;r=r.linkInstance}return null},t.prototype.detachLWF=function(e){var t,n;if(null!=this.detachedLWFs)if(e instanceof k)null!=(null!=e?e.attachName:void 0)&&(this.detachedLWFs[e.attachName]=!0);else switch(typeof e){case"string":this.detachedLWFs[e]=!0;break;case"number":e=null!=(t=this.attachedLWFList)?t[e]:void 0,null!=(null!=e?null!=(n=e.child)?n.attachName:void 0:void 0)&&(this.detachedLWFs[e.child.attachName]=!0)}},t.prototype.detachAllLWFs=function(){var e,t,n;if(null!=this.detachedLWFs)for(e in n=this.attachedLWFs,n)t=n[e],this.detachedLWFs[t.child.attachName]=!0},t.prototype.execObject=function(e,n,i,u,a,f){var l,c;if(-1!==n){l=this.lwf.data,n=l.objects[n],l=n.objectId,c=this.displayList[e],null!=c&&(c.type!==n.objectType||c.objectId!==l||c.isMovie&&c.instanceId!==a)&&(c.destroy(),c=null);if(null==c)switch(n.objectType){case z.BUTTON:c=new o(this.lwf,this,l,a,i,u);break;case z.GRAPHIC:c=new C(this.lwf,this,l);break;case z.MOVIE:c=new t(this.lwf,this,l,a,i,u);switch(f){case T.Constant.BLEND_MODE_ADD:c.blendMode="add";break;case T.Constant.BLEND_MODE_ERASE:c.blendMode="erase";break;case T.Constant.BLEND_MODE_LAYER:c.blendMode="layer";break;case T.Constant.BLEND_MODE_MASK:c.blendMode="mask"}break;case z.BITMAP:c=new r(this.lwf,this,l);break;case z.BITMAPEX:c=new s(this.lwf,this,l);break;case z.TEXT:c=new R(this.lwf,this,l,a);break;case z.PARTICLE:c=new j(this.lwf,this,l);break;case z.PROGRAMOBJECT:c=new I(this.lwf,this,l)}if(c.isMovie||c.isButton)c.linkInstance=null,null===this.instanceHead?this.instanceHead=c:this.instanceTail.linkInstance=c,this.instanceTail=c,c.isButton&&(this.hasButton=!0);this.displayList[e]=c,c.execCount=this.movieExecCount,c.exec(i,u)}},t.prototype.override=function(e,t){this.overriding=!0,X.copyMatrix(this.matrix,e),X.copyColorTransform(this.colorTransform,t),this.lwf.isPropertyDirty=!0},t.prototype.exec=function(e,n){null==e&&(e=0),null==n&&(n=0),this.attachMoviePostExeced=this.attachMovieExeced=!1,t.__super__.exec.call(this,e,n)},t.prototype.postExec=function(e){var t,n,r,i,s,o,u,f,l;this.hasButton=!1;if(this.active){this.execedFrame=-1,u=this.postExecCount===this.lwf.execCount;for(e&&this.playing&&!this.jumped&&!u&&++this.currentFrameInternal;;){if(0>this.currentFrameInternal||this.currentFrameInternal>=this.totalFrames)this.currentFrameInternal=0;if(this.currentFrameInternal===this.execedFrame)break;this.execedFrame=this.currentFrameCurrent=this.currentFrameInternal,i=this.lwf.data,s=i.frames[this.data.frameOffset+this.currentFrameCurrent];if(this.lastControlOffset===s.controlOffset&&this.lastControls===s.controls)if(r=this.lastControlAnimationOffset,this.skipped){for(o=this.instanceHead;null!==o;)o.isMovie?(o.attachMovieExeced=!1,o.attachMoviePostExeced=!1):o.isButton&&o.enterFrame(),o=o.linkInstance;this.hasButton=this.lastHasButton}else{t=f=0;for(l=this.data.depths;0>l?f>l:f<l;t=0>l?--f:++f)o=this.displayList[t],null!=o&&(u||(o.matrixIdChanged=!1,o.colorTransformIdChanged=!1),o.isMovie?(o.attachMovieExeced=!1,o.attachMoviePostExeced=!1):o.isButton&&(o.enterFrame(),this.hasButton=!0));this.lastHasButton=this.hasButton,this.skipped=!0}else{++this.movieExecCount,this.instanceTail=this.instanceHead=null,this.lastControlOffset=s.controlOffset,this.lastControls=s.controls,r=-1,o=f=0;for(l=s.controls;0>l?f>l:f<l;o=0>l?--f:++f)switch(t=i.controls[s.controlOffset+o],t.controlType){case E.MOVE:o=i.places[t.controlId],this.execObject(o.depth,o.objectId,o.matrixId,0,o.instanceId,o.blendMode);break;case E.MOVEM:t=i.controlMoveMs[t.controlId],o=i.places[t.placeId],this.execObject(o.depth,o.objectId,t.matrixId,0,o.instanceId,o.blendMode);break;case E.MOVEC:t=i.controlMoveCs[t.controlId],o=i.places[t.placeId],this.execObject(o.depth,o.objectId,o.matrixId,t.colorTransformId,o.instanceId,o.blendMode);break;case E.MOVEMC:t=i.controlMoveMCs[t.controlId],o=i.places[t.placeId],this.execObject(o.depth,o.objectId,t.matrixId,t.colorTransformId,o.instanceId,o.blendMode);break;case E.ANIMATION:-1===r&&(r=o)}this.lastControlAnimationOffset=r,this.lastHasButton=this.hasButton,t=f=0;for(l=this.data.depths;0>l?f>l:f<l;t=0>l?--f:++f)o=this.displayList[t],null!=o&&o.execCount!==this.movieExecCount&&(o.destroy(),this.displayList[t]=null)}this.attachMovieExeced=!0;if(null!=this.attachedMovies)for(l=this.attachedMovieListKeys,o=0,f=l.length;o<f;o++)t=l[o],t=this.attachedMovieList
[t],t.exec();for(o=this.instanceHead;null!==o;)o.isMovie&&(t=o,t.postExec(e),!this.hasButton&&t.hasButton&&(this.hasButton=!0)),o=o.linkInstance;this.attachMoviePostExeced=!0;if(null!=this.attachedMovies){t=this.detachedMovies;for(n in t)t=this.attachedMovies[n],null!=t&&this.deleteAttachedMovie(this,t,!0,!1);this.detachedMovies={},l=this.attachedMovieListKeys,f=0;for(o=l.length;f<o;f++)t=l[f],t=this.attachedMovieList[t],t.postExec(e),!this.hasButton&&t.hasButton&&(this.hasButton=!0)}null!=this.attachedLWFs&&(this.hasButton=!0),this.postLoaded||(this.postLoaded=!0,null!=this.postLoadFunc&&this.postLoadFunc.call(this),this.handler.empty||this.handler.call("postLoad",this));if(null!=this.nextEnterFrameFunctions)for(o=this.nextEnterFrameFunctions,this.nextEnterFrameFunctions=null,l=0,f=o.length;l<f;l++)t=o[l],t.call(this);if(-1!==r&&this.execedFrame===this.currentFrameInternal&&(t=this.animationPlayedFrame===this.currentFrameCurrent&&!this.jumped,!t))for(o=f=r,l=s.controls;r>l?f>l:f<l;o=r>l?--f:++f)t=i.controls[s.controlOffset+o],this.lwf.playAnimation(t.controlId,this);this.animationPlayedFrame=this.currentFrameCurrent,this.currentFrameCurrent===this.currentFrameInternal&&(this.jumped=!1)}this.postExecCount!==this.lwf.execCount&&(null!=this.enterFrameFunc&&this.enterFrameFunc.call(this),this.playAnimation(a.ENTERFRAME),this.handler.empty||this.handler.call("enterFrame",this)),this.postExecCount=this.lwf.execCount}},t.prototype.updateObject=function(e,t,n,r,i){return t=e.isMovie&&e.property.hasMatrix?t:r||!e.updated||e.matrixIdChanged?X.calcMatrixId(this.lwf,this.matrix1,t,e.matrixId):null,n=e.isMovie&&e.property.hasColorTransform?n:i||!e.updated||e.colorTransformIdChanged?X.calcColorTransformId(this.lwf,this.colorTransform1,n,e.colorTransformId):null,e.update(t,n)},t.prototype.update=function(e,t){var n,r,i,s,o,u,a;if(this.active){this.overriding?i=o=!0:(o=this.matrix.setWithComparing(e),i=this.colorTransform.setWithComparing(t)),this.property.hasMatrix?(o=!0,e=X.calcMatrix(this.matrix0,this.matrix,this.property.matrix)):e=this.matrix,this.property.hasColorTransform?(i=!0,t=X.calcColorTransform(this.colorTransform0,this.colorTransform,this.property.colorTransform)):t=this.colorTransform,s=r=0;for(u=this.data.depths;0>u?r>u:r<u;s=0>u?--r:++r)s=this.displayList[s],null!=s&&this.updateObject(s,e,t,o,i);if(null!=this.bitmapClips)for(a=this.bitmapClips,u=0,s=a.length;u<s;u++)r=a[u],null!=r&&r.update(e,t);if(null!=this.attachedMovies||null!=this.attachedLWFs){if(null!=this.attachedMovies)for(a=this.attachedMovieListKeys,u=0,s=a.length;u<s;u++)r=a[u],r=this.attachedMovieList[r],this.updateObject(r,e,t,o,i);if(null!=this.attachedLWFs){i=this.detachedLWFs;for(n in i)i=this.attachedLWFs[n],null!=i&&this.deleteAttachedLWF(this,i,!0,!1);this.detachedLWFs={},u=this.attachedLWFListKeys,n=0;for(o=u.length;n<o;n++)r=u[n],i=this.attachedLWFList[r],this.lwf.renderObject(i.child.exec(this.lwf.thisTick,e,t))}}this.requestedCalculateBounds&&(this.xMin=Number.MAX_VALUE,this.xMax=-Number.MAX_VALUE,this.yMin=Number.MAX_VALUE,this.yMax=-Number.MAX_VALUE,n=function(e){return function(t,n,r,i){return e.calculateBounds(t)}}(this),this.inspect(n,0,0),this.lwf.property.hasMatrix&&(n=new D,X.invertMatrix(n,this.lwf.property.matrix),i=X.calcMatrixToPoint(this.xMin,this.yMin,n),this.xMin=i[0],this.yMin=i[1],i=X.calcMatrixToPoint(this.xMax,this.yMax,n),this.xMax=i[0],this.yMax=i[1]),this.bounds={xMin:this.xMin,xMax:this.xMax,yMin:this.yMin,yMax:this.yMax},this.requestedCalculateBounds=!1,null!=this.calculateBoundsCallback&&(this.calculateBoundsCallback.call(this),this.calculateBoundsCallback=null)),this.handler.empty||this.handler.call("update",this)}},t.prototype.calculateBounds=function(e){var t,n,r;switch(e.type){case z.GRAPHIC:r=e.displayList,t=0;for(n=r.length;t<n;t++)e=r[t],this.calculateBounds(e);break;case z.BITMAP:case z.BITMAPEX:t=e.type===z.BITMAP?e.lwf.data.bitmaps[e.objectId].textureFragmentId:e.lwf.data.bitmapExs[e.objectId].textureFragmentId,null!=t&&0<=t&&(t=e.lwf.data.textureFragments[t],this.updateBounds(e.matrix,t.x,t.x+t.w,t.y,t.y+t.h));break;case z.BUTTON:this.updateBounds(e.matrix,0,e.width,0,e.height);break;case z.TEXT:t=e.lwf.data.texts[e.objectId],this.updateBounds(e.matrix,0,t.width,0,t.height);break;case z.PROGRAMOBJECT:t=e.lwf.data.programObjects[e.objectId],this.updateBounds(e.matrix,0,t.width,0,t.height)}},t.prototype.updateBounds=function(e,t,n,r,i){var s;r=[[t,r],[t,i],[n,r],[n,i]],t=0;for(n=r.length;t<n;t++)i=r[t],s=X.calcMatrixToPoint(i[0],i[1],e),i=s[0],s=s[1],i<this.xMin?this.xMin=i:i>this.xMax&&(this.xMax=i),s<this.yMin?this.yMin=s:s>this.yMax&&(this.yMax=s)},t.prototype.linkButton=function(){var e,t,n,r;if(this.visible&&this.active&&this.hasButton){e=t=0;for(n=this.data.depths;0>n?t>n:t<n;e=0>n?--t:++t)e=this.displayList[e],null!=e&&(e.isButton?e.linkButton():e.isMovie&&e.hasButton&&e.linkButton());if(null!=this.attachedMovies)for(r=this.attachedMovieListKeys,n=0,e=r.length;n<e;n++)t=r[n],t=this.attachedMovieList[t],t.hasButton&&t.linkButton();if(null!=this.attachedLWFs)for(r=this.attachedLWFListKeys,n=0,e=r.length;n<e;n++)t=r[n],t=this.attachedLWFList[t],t.linkButton()}},t.prototype.render=function(e,t){var n,r,i,s,o,u;if(this.active||null!=this.lwf.rendererFactory.needsRenderForInactive){this.visible&&this.active||(e=!1),s=i=!1;if("normal"!==this.blendMode)switch(this.blendMode){case"add":this.lwf.beginBlendMode(this.blendMode),i=!0;break;case"erase":case"layer":case"mask":this.lwf.beginMaskMode(this.blendMode),s=!0}this.handler.empty||this.handler.call("render",this),this.property.hasRenderingOffset&&(this.lwf.renderOffset(),t=this.property.renderingOffset),t===Number.MIN_VALUE&&this.lwf.clearRenderOffset(),r=n=0;for(o=this.data.depths;0>o?n>o:n<o;r=0>o?--n:++n)r=this.displayList[r],null!=r&&r.render(e,t);if(null!=this.bitmapClips)for(u=this.bitmapClips,o=0,r=u.length;o<r;o++)n=u[o],null!=n&&n.render(e&&n.visible,t);if(null!=this.attachedMovies)for(u=this.attachedMovieListKeys,o=0,r=u.length;o<r;o++)n=u[o],n=this.attachedMovieList[n],n.render(e,t);if(null!=this.attachedLWFs)for(u=this.attachedLWFListKeys,o=0,r=u.length;o<r;o++)n=u[o],n=this.attachedLWFList[n],n=n.child,n.setAttachVisible(e),this.lwf.renderObject(n.render(this.lwf.renderingIndex,this.lwf.renderingCount,t));i&&this.lwf.endBlendMode(),s&&this.lwf.endMaskMode()}},t.prototype.inspect=function(e,t,n){var r,i,s,o,u;this.property.hasRenderingOffset&&(this.lwf.renderOffset(),i=this.property.renderingOffset),i===Number.MIN_VALUE&&this.lwf.clearRenderOffset(),e(this,t,n,i),++t,n=s=0;for(o=this.data.depths;0>o?s>o:s<o;n=0>o?--s:++s)r=this.displayList[n],null!=r&&r.inspect(e,t,n,i);if(null!=this.bitmapClips)for(u=this.bitmapClips,s=0,o=u.length;s<o;s++)r=u[s],null!=r&&r.inspect(e,t,n++,i);if(null!=this.attachedMovies)for(u=this.attachedMovieListKeys,s=0,o=u.length;s<o;s++)r=u[s],r=this.attachedMovieList[r],r.inspect(e,t,n++,i);if(null!=this.attachedLWFs)for(u=this.attachedLWFListKeys,s=0,o=u.length;s<o;s++)r=u[s],r=this.attachedLWFList[r],r=r.child,this.lwf.renderObject(r.inspect(e,t,n++,i))},t.prototype.destroy=function(){var e,n,r,i,s;s=this.displayList,r=0;for(i=s.length;r<i;r++)e=s[r],null!=e&&e.destroy();if(null!=this.bitmapClips){s=this.bitmapClips,r=0;for(i=s.length;r<i;r++)e=s[r],null!=e&&e.destroy();this.bitmapClips=null}if(null!=this.attachedMovies){r=this.attachedMovies;for(n in r)e=r[n],e.destroy();this.attachedMovieListKeys=this.attachedMovieList=this.detachedMovies=this.attachedMovies=null}if(null!=this.attachedLWFs){r=this.attachedLWFs;for(n in r)e=r[n],this.execDetachHandler(e);this.attachedLWFListKeys=this.attachedLWFList=this.detachedLWFs=this.attachedLWFs=null}null!=this.unloadFunc&&this.unloadFunc.call(this),this.playAnimation(a.UNLOAD),this.handler.empty||this.handler.call("unload",this),this.property=this.displayList=this.instanceTail=this.instanceHead=null,t.__super__.destroy.call(this)},t.prototype.playAnimation=function(e){var t,n,r,i;n=this.lwf.data.movieClipEvents,t=r=0;for(i=this.data.clipEvents;0>i?r>i:r<i;t=0>i?--r:++r)t=n[this.data.clipEventId+t],0!==(t.clipEvent&e)&&this.lwf.playAnimation(t.animationId,this)},t.prototype.dispatchEvent=function(e){var t,n,r,i,s;"object"==typeof e?(r=e.param,e=e.type):r=null;switch(e){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.empty||this.handler.call(e,this);break;default:n=this.eventHandlers[e];if(null==n)return!1;var o;o=[],i=0;for(s=n.length;i<s;i++)t=n[i],o.push(t);n=o,i=0;for(s=n.length;i<s;i++)t=n[i],null!=t&&t.call(this,{type:e,param:r})}return!0},t.prototype.addEventHandler=function(e,t){var n;switch(e){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.lwf.enableExec(),this.handler.addHandler(e,t);break;default:null==(n=this.eventHandlers)[e]&&(n[e]=[]),this.eventHandlers[e].push(t)}},t.prototype.removeEventHandler=function(e,t){var n,r;switch(e){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.removeHandler(e,t);break;default:n=this.eventHandlers[e];if(null==n)break;for(r=0;r<n.length;)n[r]===t?n.splice(r,1):++r;0===n.length&&delete this.eventHandlers[e]}},t.prototype.clearEventHandler=function(e){null==e&&(e=null);switch(e){case null:this.handler.clear(),this.eventHandlers={};break;case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.clear(e);break;default:delete this.eventHandlers[e]}},t.prototype.setEventHandler=function(e,t){this.clearEventHandler(e),this.addEventHandler(e,t)},t.prototype.nextEnterFrame=function(e){null==this.nextEnterFrameFunctions&&(this.nextEnterFrameFunctions=[]),this.nextEnterFrameFunctions.push(e)},t.prototype.searchFrame=function(e){return this.lwf.searchFrame(this,e)},t.prototype.gotoLabel=function(e){return"string"==typeof e&&(e=this.lwf.getStringId(e)),this.gotoFrame(this.lwf.searchFrame(this,e)),this},t.prototype.gotoAndStop=function(e){return"string"==typeof e?this.gotoFrame(this.lwf.searchFrame(this,this.lwf.getStringId(e))):this.gotoFrame(e),this.stop(),this},t.prototype.gotoAndPlay=function(e){return"string"==typeof e?this.gotoFrame(this.lwf.searchFrame(this,this.lwf.getStringId(e))):this.gotoFrame(e),this.play(),this},t.prototype.searchMovieInstance=function(e,t){var n,r;null==t&&(t=!0),"string"==typeof e&&(e=this.lwf.getStringId(e));for(r=this.instanceHead;null!==r;){if(r.isMovie&&this.lwf.getInstanceNameStringId(r.instanceId)===e)return r;if(t&&r.isMovie&&(n=r.searchMovieInstance(e,t),null!==n))return n;r=r.linkInstance}return null},t.prototype.searchMovieInstanceByInstanceId=function(e,t){var n,r;for(r=this.instanceHead;null!==r;){if(r.isMovie&&r.instanceId===e)return r;if(t&&r.isMovie&&(n=r.searchMovieInstanceByInstanceId(e,t),null!==n))return n;r=r.linkInstance}return null},t.prototype.searchButtonInstance=function(e,t){var n,r;null==t&&(t=!0),"string"==typeof e&&(e=this.lwf.getStringId(e));for(r=this.instanceHead;null!==r;){if(r.isButton&&this.lwf.getInstanceNameStringId(r.instanceId)===e)return r;if(t&&r.isMovie&&(n=r.searchButtonInstance(e,t),null!==n))return n;r=r.linkInstance}return null},t.prototype.searchButtonInstanceByInstanceId=function(e,t){var n,r;for(r=this.instanceHead;null!==r;){if(r.isButton&&r.instanceId===e)return r;if(t&&r.isMovie&&(n=r.searchMovieInstanceByInstanceId(e,t),null!==n))return n;r=r.linkInstance}return null},t.prototype.move=function(e,t){return this.property.hasMatrix||X.syncMatrix(this),this.property.move(e,t),this},t.prototype.moveTo=function(e,t){return this.property.hasMatrix||X.syncMatrix(this),this.property.moveTo(e,t),this},t.prototype.rotate=function(e){return this.property.hasMatrix||X.syncMatrix(this),this.property.rotate(e),this},t.prototype.rotateTo=function(e){return this.property.hasMatrix||X.syncMatrix(this),this.property.rotateTo(e),this},t.prototype.scale=function(e,t){return this.property.hasMatrix||X.syncMatrix(this),this.property.scale(e,t),this},t.prototype.scaleTo=function(e,t){return this.property.hasMatrix||X.syncMatrix(this),this.property.scaleTo(e,t),this},t.prototype.setMatrix=function(e,t,n,r){return null==t&&(t=1),null==n&&(n=1),null==r&&(r=0),this.property.setMatrix(e,t,n,r),this},t.prototype.setAlpha=function(e){return this.property.hasColorTransform||X.syncColorTransform(this),this.property.setAlpha(e),this},t.prototype.setColorTransform=function(e){return this.property.setColorTransform(e),this},t.prototype.setRenderingOffset=function(e){return this.property.setRenderingOffset(e),this},t.prototype.getX=function(){return this.property.hasMatrix?this.property.matrix.translateX:X.getX(this)},t.prototype.setX=function(e){this.property.hasMatrix||X.syncMatrix(this),this.property.moveTo(e,this.property.matrix.translateY)},t.prototype.getY=function(){return this.property.hasMatrix?this.property.matrix.translateY:X.getY(this)},t.prototype.setY=function(e){this.property.hasMatrix||X.syncMatrix(this),this.property.moveTo(this.property.matrix.translateX,e)},t.prototype.getScaleX=function(){return this.property.hasMatrix?this.property.scaleX:X.getScaleX(this)},t.prototype.setScaleX=function(e){this.property.hasMatrix||X.syncMatrix(this),this.property.scaleTo(e,this.property.scaleY)},t.prototype.getScaleY=function(){return this.property.hasMatrix?this.property.scaleY:X.getScaleY(this)},t.prototype.setScaleY=function(e){this.property.hasMatrix||X.syncMatrix(this),this.property.scaleTo(this.property.scaleX,e)},t.prototype.getRotation=function(){return this.property.hasMatrix?this.property.rotation:X.getRotation(this)},t.prototype.setRotation=function(e){this.property.hasMatrix||X.syncMatrix(this),this.property.rotateTo(e)},t.prototype.getAlphaProperty=function(){return this.property.hasColorTransform?this.property.colorTransform.multi.alpha:X.getAlpha(this)},t.prototype.setAlphaProperty=function(e){this.property.hasColorTransform||X.syncColorTransform(this),this.property.setAlpha(e)},t.prototype.requestCalculateBounds=function(e){null==e&&(e=null),this.requestedCalculateBounds=!0,this.calculateBoundsCallback=e,this.bounds=void 0},t.prototype.getBounds=function(){return this.bounds},t.prototype.setFrameRate=function(e){var t,n,r,i;if(null!=this.attachedMovies)for(i=this.attachedMovieListKeys,n=0,r=i.length;n<r;n++)t=i[n],t=this.attachedMovieList[t],t.setFrameRate(e);if(null!=this.attachedLWFs)for(i=this.attachedLWFListKeys,n=0,r=i.length;n<r;n++)t=i[n],t=this.attachedLWFList[t],t.child.setFrameRate(e);for(t=this.instanceHead;null!==t;)t.isMovie&&t.setFrameRate(e),t=t.linkInstance},t}(d),"undefined"!=typeof P.prototype.__defineGetter__?(P.prototype.__defineGetter__("x",function(){return this.getX()}),P.prototype.__defineSetter__("x",function(e){return this.setX(e)}),P.prototype.__defineGetter__("y",function(){return this.getY()}),P.prototype.__defineSetter__("y",function(e){return this.setY(e)}),P.prototype.__defineGetter__("scaleX",function(){return this.getScaleX()}),P.prototype.__defineSetter__("scaleX",function(e){return this.setScaleX(e)}),P.prototype.__defineGetter__("scaleY",function(){return this.getScaleY()}),P.prototype.__defineSetter__("scaleY",function(e){return this.setScaleY(e)}),P.prototype.__defineGetter__("rotation",function(){return this.getRotation()}),P.prototype.__defineSetter__("rotation",function(e){return this.setRotation(e)}),P.prototype.__defineGetter__("alpha",function(){return this.getAlphaProperty()}),P.prototype.__defineSetter__("alpha",function(e){return this.setAlphaProperty(e)}),P.prototype.__defineGetter__("currentFrame",function(){return this.currentFrameInternal+1})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(P.prototype,"x",{get:function(){return this.getX()},set:function(e){return this.setX(e)}}),Object.defineProperty(P.prototype,"y",{get:function(){return this.getY()},set:function(e){return this.setY(e)}}),Object.defineProperty(P.prototype,"scaleX",{get:function(){return this.getScaleX()},set:function(e){return this.setScaleX(e)}}),Object.defineProperty(P.prototype,"scaleY",{get:function(){return this.getScaleY()},set:function(e){return this.setScaleY(e)}}),Object.defineProperty(P.prototype,"rotation",{get:function(){return this.getRotation()},set:function(e){return this.setRotation(e)}}),Object.defineProperty(P.prototype,"alpha",{get:function(){return this.getAlphaProperty()},set:function(e){return this.setAlphaProperty(e)}}),Object.defineProperty(P.prototype,"currentFrame",{get:function(){return this.currentFrameInternal+1}})),x=function(){function e(){this.clear()}return e.prototype.clear=function(e){var t,n,r;null==e&&(e=null);if(null!=e)null!=this[e]&&(this[e]=[]);else for(r=this.types,t=0,n=r.length;t<n;t++)e=r[t],this[e]=[];this.empty=!0},e.prototype.add=function(e){var t,n,r,i,s;if(null!=e){s=this.types,r=0;for(i=s.length;r<i;r++)n=s[r],t=e[n],null!=t&&this[n].push(t);this.updateEmpty()}},e.prototype.concat=function(e){var t,n,r,i,s,o,u,a;if(null!=e&&!e.empty){a=this.types,i=0;for(o=a.length;i<o;i++)for(r=a[i],n=e[r],s=0,u=n.length;s<u;s++)t=n[s],this[r].push(t);this.updateEmpty()}},e.prototype.addHandler=function(e,t){null!=t&&(this[e].push(t),this.empty=!1)},e.prototype.removeInternal=function(e,t){var n;for(n=0;n<e.length;)e[n]===t?e.splice(n,1):++n},e.prototype.remove=function(e){var t,n,r,i,s;s=this.types,r=0;for(i=s.length;r<i;r++)n=s[r],t=e[n],null!=t&&this.removeInternal(this[n],t);this.updateEmpty()},e.prototype.removeHandler=function(e,t){null!=t&&this.removeInternal(this[e],t),this.updateEmpty()},e.prototype.call=function(e,t){var n,r,i,s;r=this[e];if(null!=r&&0<r.length){var o;o=[],i=0;for(s=r.length;i<s;i++)n=r[i],o.push(n);r=o,i=0;for(s=r.length;i<s;i++)n=r[i],n.call(t)}},e.prototype.updateEmpty=function(){var e,t,n,r,i;r=this.types,t=0;for(n=r.length;t<n;t++)if(e=r[t],0<(null!=(i=this[e])?i.length:void 0)){this.empty=!1;return}this.empty=!0},e}(),H=function(e){function t(){this.types=n,t.__super__.constructor.apply(this,arguments)}var n;return G(t,e),n="load postLoad unload enterFrame update render".split(" "),t}(x),u=function(e){function t(){this.types=n,t.__super__.constructor.apply(this,arguments)}var n;return G(t,e),n="load unload enterFrame update render press release rollOver rollOut keyPress".split(" "),t}(x),k=function(){function e(e,n,r,i){null==n&&(n=null),null==r&&(r=null),this.privateData=null!=i?i:null,this.data=e,null!=r&&(this.functions=r()),this.width=this.data.header.width,this.height=this.data.header.height,this.backgroundColor=this.data.header.backgroundColor,this.name=this.data.strings[this.data.header.nameStringId],this.interactive=0<this.data.buttonConditions.length,this.lwfInstanceId=this.url=null,this.frameRate=this.data.header.frameRate,this.active=!0,this.fastForwardTimeout=15,this.fastForward=!1,this.frameSkip=!0,this.execLimit=3,this.tick=1/this.frameRate,this.roundOffTick=this.tick*t,this.thisTick=this.time=0,this.attachVisible=!0,this.renderCount=this.execCount=0,this.isLWFAttached=this.isPropertyDirty=this.isExecDisabled=!1,this.interceptByNotAllowOrDenyButtons=!0,this.intercepted=!1,this.textScale=1,this.pointY=this.pointX=Number.MIN_VALUE,this.pressing=!1,this.buttonHead=null,this.blendModes=[],this.maskModes=[],this._tweens=null,this.interactive||1!==this.data.frames.length||this.functions&&(this.functions._root_load||this.functions._root_postLoad||this.functions._root_unload||this.functions._root_enterFrame||this.functions._root_update||this.functions._root_render)||this.disableExec(),this.property=new q(this),this.instances=[],this.execHandlers=null,this.eventHandlers=[],this.genericEventHandlers=[],this.movieEventHandlers=[],this.buttonEventHandlers=[],this.movieCommands={},this.programObjectConstructors=[],this.loadedLWFs={},this.depth=this.attachName=this.parent=null,this.matrix=new D,this.matrixIdentity=new D,this.colorTransform=new y,this.colorTransformIdentity=new y,this.setRendererFactory(n),this.init()}var t;return t=.05,e.prototype.setRendererFactory=function(e){null==e&&(e=null),null==e&&(e=new B),this.rendererFactory=e,this.rendererFactory.init(this)},e.prototype.setFrameRate=function(e){0!==e&&(this.frameRate=e,this.tick=1/this.frameRate,this.isLWFAttached&&this.rootMovie.setFrameRate(e))},e.prototype.setPreferredFrameRate=function(e,t){null==t&&(t=2),0!==e&&(this.execLimit=Math.ceil(this.frameRate/e)+t)},e.prototype.fitForHeight=function(e,t){X.fitForHeight(this,e,t)},e.prototype.fitForWidth=function(e,t){X.fitForWidth(this,e,t)},e.prototype.scaleForHeight=function(e,t){X.scaleForHeight(this,e,t)},e.prototype.scaleForWidth=function(e,t){X.scaleForWidth(this,e,t)},e.prototype.setTextScale=function(e){this.textScale=e},e.prototype.getStageSize=function(){var e;return e=this.rendererFactory.getStageSize(),{width:e[0],height:e[1]}},e.prototype.renderOffset=function(){this.renderingIndexOffsetted=0},e.prototype.clearRenderOffset=function(){this.renderingIndexOffsetted=this.renderingIndex},e.prototype.renderObject=function(e){return null==e&&(e=1),this.renderingIndex+=e,this.renderingIndexOffsetted+=e,this.renderingIndex},e.prototype.beginBlendMode=function(e){this.blendModes.unshift(e),this.rendererFactory.setBlendMode(e)},e.prototype.endBlendMode=function(){this.blendModes.shift(),this.rendererFactory.setBlendMode(0<this.blendModes.length?this.blendModes[0]:"normal")},e.prototype.beginMaskMode=function(e){this.maskModes.unshift(e),this.rendererFactory.setMaskMode(e)},e.prototype.endMaskMode=function(){this.maskModes.shift(),this.rendererFactory.setMaskMode(0<this.maskModes.length?this.maskModes[0]:"normal")},e.prototype.setAttachVisible=function(e){this.attachVisible=e},e.prototype.clearFocus=function(e){this.focus===e&&(this.focus=null)},e.prototype.clearPressed=function(e){this.pressed===e&&(this.pressed=null)},e.prototype.clearIntercepted=function(){this.intercepted=!1},e.prototype.init=function(){this.progress=this.time=0,this.instances=[],this.pressed=this.focus=null,this.movieCommands={},this.rootMovieStringId=this.getStringId("_root"),null!=this.rootMovie&&this.rootMovie.destroy(),this.rootMovie=new P(this,null,this.data.header.rootMovieId,this.searchInstanceId(this.rootMovieStringId))},e.prototype.calcMatrix=function(e){var t;return t=this.property,t.hasMatrix?null!=e?X.calcMatrix(this.matrix,e,t.matrix):t.matrix:null!=e?e:this.matrixIdentity},e.prototype.calcColorTransform=function(e){var t;return t=this.property,t.hasColorTransform?null!=e?X.calcColorTransform(this.colorTransform,e,t.colorTransform):t.colorTransform:null!=e?e:this.colorTransformIdentity},e.prototype.execInternal=function(e,t,n){var r,i,s,o,u,a,f;if(null==this.rootMovie||!this.active)return 0;s=!1,r=this.progress,this.thisTick=e;if(this.isExecDisabled&&null===this._tweens)this.executedForExecDisabled||(++this.execCount,this.rootMovie.exec(),this.rootMovie.postExec(!0),s=this.executedForExecDisabled=!0);else{u=!0,0===e?this.progress=this.tick:0>e?(this.progress=this.tick,u=!1):0===this.time?(this.time+=this.tick,this.progress+=this.tick):(this.time+=e,this.progress+=e),o=this.execHandlers;if(null!=o)for(a=0,f=o.length;a<f;a++)i=o[a],i.call(this);for(i=this.execLimit;this.progress>=this.tick-this.roundOffTick;){if(0>--i){this.progress=0;break}this.progress-=this.tick,++this.execCount,this.rootMovie.exec(),this.rootMovie.postExec(u),s=!0;if(!this.frameSkip)break}this.progress<this.roundOffTick&&(this.progress=0),this.buttonHead=null,this.interactive&&this.rootMovie.hasButton&&(this.focusOnLink=!1,this.rootMovie.linkButton(),null===this.focus||this.focusOnLink||(this.focus.rollOut(),this.focus=null))}return u=this.isLWFAttached,this.fastForward||!s&&!this.isPropertyDirty&&null==t&&null==n||(u=!0),u&&this.update(t,n),!this.execDisabled&&0>e&&(this.progress=r),this.renderingCount},e.prototype.exec=function(e,t,n){var r,i;null==e&&(e=0),null==t&&(t=null),null==n&&(n=null),null==this.parent&&(this.fastForwardCurrent=this.fastForward)&&(e=this.tick,i=Date.now());for(;;){if(r=this.execInternal(e,t,n),!this.fastForwardCurrent||!this.fastForward||null!=this.parent)break;if(Date.now()-i>=this.fastForwardTimeout)break}return r},e.prototype.forceExec=function(e,t){return null==e&&(e=null),null==t&&(t=null),this.exec(0,e,t)},e.prototype.forceExecWithoutProgress=function(e,t){return null==e&&(e=null),null==t&&(t=null),this.exec(-1,e,t)},e.prototype.update=function(e,t){var n,r;null==e&&(e=null),null==t&&(t=null),r=this.calcMatrix(e),n=this.calcColorTransform(t),this.renderingIndexOffsetted=this.renderingIndex=0,this.rootMovie.update(r,n),this.renderingCount=this.renderingIndex,this.isPropertyDirty=!1},e.prototype.render=function(e,t,n){var r;null==e&&(e=0),null==t&&(t=0),null==n&&(n=Number.MIN_VALUE);if(null!=this.rootMovie&&this.active&&!this.fastForwardCurrent)return++this.renderCount,r=this.renderingCount,0<t&&(this.renderingCount=t),this.renderingIndexOffsetted=this.renderingIndex=e,this.property.hasRenderingOffset&&(this.renderOffset(),n=this.property.renderingOffset),this.rendererFactory.beginRender(this),this.rootMovie.render(this.attachVisible,n),this.rendererFactory.endRender(this),this.renderingCount=r},e.prototype.inspect=function(e,t,n,r,i,s){var o;return null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),null==i&&(i=0),null==s&&(s=Number.MIN_VALUE),o=this.renderingCount,0<i&&(this.renderingCount=i),this.renderingIndexOffsetted=this.renderingIndex=r,this.property.hasRenderingOffset&&(this.renderOffset(),s=this.property.renderingOffset),this.rootMovie.inspect(e,t,n,s),this.renderingCount=o},e.prototype.destroy=function(){var e,t,n,r;if(null!=this.rootMovie){null!=this.stopTweens&&this.stopTweens(),r=this.loadedLWFs;for(e in r)t=r[e],t.destroy();this.loadedLWFs=null,this.rootMovie.destroy(),this.rootMovie=null,e=null!=(n=this.functions)?n.destroy:void 0,null!=e&&e.call(this),this.functions=null,null!=this.rendererFactory&&(n=this.rendererFactory.resourceCache,null!=n&&n.unloadLWF(this),this.rendererFactory.destruct(),this.rendererFactory=null),this.programObjectConstructors=this.movieCommands=this.buttonEventHandlers=this.movieEventHandlers=this.genericEventHandlers=this.eventHandlers=this.execHandlers=this.instances=this.buttonHead=this.property=null}},e.prototype.getInstanceNameStringId=function(e){return 0>e||e>=this.data.instanceNames.length?-1:this.data.instanceNames[e].stringId},e.prototype.getStringId=function(e){return e=this.data.stringMap[e],null!=e?e:-1},e.prototype.searchInstanceId=function(e){return 0>e||e>=this.data.strings.length?-1:(e=this.data.instanceNameMap[e],null!=e?e:-1)},e.prototype.searchFrame=function(e,t){var n;return"string"==typeof t&&(t=this.getStringId(t)),0>t||t>=this.data.strings.length?-1:(n=this.data.labelMap[e.objectId][t],null!=n?n+1:-1)},e.prototype.getMovieLabels=function(e){return null==e?null:this.data.labelMap[e.objectId]},e.prototype.searchMovieLinkage=function(e){return 0>e||e>=this.data.strings.length?-1:(e=this.data.movieLinkageMap[e],null!=e?this.data.movieLinkages[e].movieId:-1)},e.prototype.getMovieLinkageName=function(e){return e=this.data.movieLinkageNameMap[e],null!=e?this.data.strings[e]:null},e.prototype.searchMovieInstance=function(e){var t,n,r,i;if("string"==typeof e){t=e;if(-1!==t.indexOf(".")){n=t.split(".");if(n[0]!==this.data.strings[this.rootMovieStringId])return null;e=this.rootMovie,r=0;for(i=n.length;r<i;r++)if(t=n[r],e=e.searchMovieInstance(t,!1),null==e)return null;return e}e=this.getStringId(e)}return this.searchMovieInstanceByInstanceId(this.searchInstanceId(e))},e.prototype.searchMovieInstanceByInstanceId=function(e){"string"==typeof e&&(e=this.searchInstanceId(this.getStringId(e)));if(0>e||e>=this.data.instanceNames.length)return null;for(e=this.instances[e];null!=e;){if(e.isMovie)return e;e=e.nextInstance}return null},e.prototype.searchButtonInstance=function(e){var t,n,r,i;if("string"==typeof e){t=e;if(-1!==t.indexOf(".")){n=t.split(".");if(n[0]!==this.data.strings[this.rootMovieStringId])return null;t=this.rootMovie,e=r=1;for(i=n.length;1>i?r>i:r<i;e=1>i?--r:++r){if(e===n.length-1)return t.searchButtonInstance(n[e],!1);t=t.searchButtonInstance(n[e],!1);if(null==t)break}return null}e=this.getStringId(e)}return this.searchButtonInstanceByInstanceId(this.searchInstanceId(e))},e.prototype.searchButtonInstanceByInstanceId=function(e){"string"==typeof e&&(e=this.searchInstanceId(this.getStringId(e)));if(0>e||e>=this.data.instanceNames.length)return null;for(e=this.instances[e];null!=e;){if(e.isButton)return e;e=e.nextInstance}return null},e.prototype.searchEventId=function(e){return"string"==typeof e&&(e=this.getStringId(e)),0>e||e>=this.data.strings.length?-1:(e=this.data.eventMap[e],null!=e?e:-1)},e.prototype.searchProgramObjectId=function(e){return"string"==typeof e&&(e=this.getStringId(e)),0>e||e>=this.data.strings.length?-1:(e=this.data.programObjectMap[e],null!=e?e:-1)},e.prototype.getInstance=function(e){return this.instances[e]},e.prototype.setInstance=function(e,t){this.instances[e]=t},e.prototype.addExecHandler=function(e){null==this.execHandlers&&(this.execHandlers=[]),this.execHandlers.push(e)},e.prototype.removeExecHandler=function(e){var t,n;t=this.execHandlers;if(null!=t)for(n=0;n<t.length;)t[n]===e?t.splice(n,1):++n},e.prototype.clearExecHandler=function(){this.execHandlers=null},e.prototype.setExecHandler=function(e){this.clearExecHandler(),this.addExecHandler(e)},e.prototype.addEventHandler=function(e,t){var n,r,i;n="string"==typeof e?this.searchEventId(e):e,0>n||n>=this.data.events.length?(null==(r=this.genericEventHandlers)[e]&&(r[e]=[]),this.genericEventHandlers[e].push(t)):(null==(i=this.eventHandlers)[n]&&(i[n]=[]),this.eventHandlers[n].push(t))},e.prototype.removeEventHandler=function(e,t){var n,r,i,s,o;n="string"==typeof e?this.searchEventId(e):e;if(0>n||n>=this.data.events.length){if(r=this.genericEventHandlers[e],null!=r){n=[];for(i in r)s=r[i],s===t&&n.push(i);s=0;for(o=n.length;s<o;s++)i=n[s],delete r[i]}}else if(r=this.eventHandlers[n],null!=r){for(i=0;i<r.length;)r[i]===t?r.splice(i,1):++i;0===r.length&&delete this.eventHandlers[n]}},e.prototype.clearEventHandler=function(e){var t;t="string"==typeof e?this.searchEventId(e):e,0>t||t>=this.data.events.length?this.genericEventHandlers[e]=null:this.eventHandlers[t]=null},e.prototype.setEventHandler=function(e,t){this.clearEventHandler(e),this.addEventHandler(e,t)},e.prototype.getProgramObjectConstructor=function(e){return"string"==typeof e&&(e=this.searchProgramObjectId(this.getStringId(e))),0>e||e>=this.data.programObjects.length?null:this.programObjectConstructors[e]},e.prototype.setProgramObjectConstructor=function(e,t){"string"==typeof e&&(e=this.searchProgramObjectId(this.getStringId(e))),0>e||e>=this.data.programObjects.length||(this.programObjectConstructors[e]=t)},e.prototype.getMovieEventHandlers=function(e){var t;return"string"==typeof e?(t=this.searchInstanceId(this.getStringId(e)),0<=t&&t<this.data.instanceNames.length?this.movieEventHandlers[t]:null==this.movieEventHandlersByFullName?null:this.movieEventHandlersByFullName[e]):null!=this.movieEventHandlersByFullName&&(t=e.getFullName(),null!=t&&(t=this.movieEventHandlersByFullName[t],null!=t))?t:this.movieEventHandlers[e.instanceId]},e.prototype.addMovieEventHandler=function(e,t){var n,r;r=this.searchInstanceId(this.getStringId(e));if(0<=r&&r<this.data.instanceNames.length)n=this.movieEventHandlers[r],null==n&&(n=new H,this.movieEventHandlers[r]=n),r=this.searchMovieInstanceByInstanceId(r);else{if(-1===e.indexOf("."))return;null==this.movieEventHandlersByFullName&&(this.movieEventHandlersByFullName=[]),n=this.movieEventHandlersByFullName[e],null==n&&(n=new H,this.movieEventHandlersByFullName[e]=n),r=this.searchMovieInstance(e)}n.add(t),null!=r&&r.setHandlers(n)},e.prototype.removeMovieEventHandler=function(e,t){var n;n=this.getMovieEventHandlers(e),null!=n&&n.remove(t),n=this.searchMovieInstance(e),null!=n&&n.handler.remove(t)},e.prototype.clearMovieEventHandler=function(e,t){var n;null==t&&(t=null),n=this.getMovieEventHandlers(e),null!=n&&n.clear(t),n=this.searchMovieInstance(e),null!=n&&n.handler.clear(t)},e.prototype.setMovieEventHandler=function(e,t){this.clearMovieEventHandler(e),this.addMovieEventHandler(e,t)},e.prototype.getButtonEventHandlers=function(e){var t;return"string"==typeof e?(t=this.searchInstanceId(this.getStringId(e)),0<=t&&t<this.data.instanceNames.length?this.buttonEventHandlers[t]:null==this.buttonEventHandlersByFullName?null:this.buttonEventHandlersByFullName[e]):null!=this.buttonEventHandlersByFullName&&(t=e.getFullName(),null!=t&&(t=this.buttonEventHandlersByFullName[t],null!=t))?t:this.buttonEventHandlers[e.instanceId]},e.prototype.addButtonEventHandler=function(e,t){var n,r;this.setInteractive(),n=this.searchInstanceId(this.getStringId(e));if(0<=n&&n<this.data.instanceNames.length)r=this.buttonEventHandlers[n],null==
r&&(r=new u,this.buttonEventHandlers[n]=r),n=this.searchButtonInstanceByInstanceId(n);else{if(-1===e.indexOf("."))return;null==this.buttonEventHandlersByFullName&&(this.buttonEventHandlersByFullName=[]),r=this.buttonEventHandlersByFullName[e],null==r&&(r=new u,this.buttonEventHandlersByFullName[e]=r),n=this.searchButtonInstance(e)}r.add(t),null!=n&&n.setHandlers(r)},e.prototype.removeButtonEventHandler=function(e,t){var n;n=this.getButtonEventHandlers(e),null!=n&&n.remove(t),n=this.searchButtonInstance(e),null!=(null!=n?n.handler:void 0)&&n.handler.remove(t)},e.prototype.clearButtonEventHandler=function(e,t){var n;null==t&&(t=null),n=this.getButtonEventHandlers(e),null!=n&&n.clear(t),n=this.searchButtonInstance(e),null!=("undefined"!==typeof buffon&&null!==buffon?buffon.handler:void 0)&&n.handler.clear(t)},e.prototype.setButtonEventHandler=function(e,t){this.clearButtonEventHandler(e),this.addButtonEventHandler(e,t)},e.prototype.setMovieLoadCommand=function(e,t){var n,r;r=this.searchMovieInstance(e),null!=r?t.call(r):(n={load:function(){return this.lwf.removeMovieEventHandler(e,n),t.call(this)}},this.addMovieEventHandler(e,n))},e.prototype.setMoviePostLoadCommand=function(e,t){var n,r;r=this.searchMovieInstance(e),null!=r?t.call(r):(n={postLoad:function(){return this.lwf.removeMovieEventHandler(e,n),t.call(this)}},this.addMovieEventHandler(e,n))},e.prototype.playMovie=function(e){this.setMovieLoadCommand(e,function(){return this.play()})},e.prototype.stopMovie=function(e){this.setMovieLoadCommand(e,function(){return this.stop()})},e.prototype.nextFrameMovie=function(e){this.setMovieLoadCommand(e,function(){return this.nextFrame()})},e.prototype.prevFrameMovie=function(e){this.setMovieLoadCommand(e,function(){return this.prevFrame()})},e.prototype.setVisibleMovie=function(e,t){this.setMovieLoadCommand(e,function(){return this.setVisible(t)})},e.prototype.gotoAndStopMovie=function(e,t){this.setMovieLoadCommand(e,function(){return this.gotoAndStop(t)})},e.prototype.gotoAndStopMovie=function(e,t){this.setMovieLoadCommand(e,function(){return this.gotoAndStop(t)})},e.prototype.gotoAndPlayMovie=function(e,t){this.setMovieLoadCommand(e,function(){return this.gotoAndPlay(t)})},e.prototype.gotoAndPlayMovie=function(e,t){this.setMovieLoadCommand(e,function(){return this.gotoAndPlay(t)})},e.prototype.moveMovie=function(e,t,n){this.setMovieLoadCommand(e,function(){return this.move(t,n)})},e.prototype.moveToMovie=function(e,t,n){this.setMovieLoadCommand(e,function(){return this.moveTo(t,n)})},e.prototype.rotateMovie=function(e,t){this.setMovieLoadCommand(e,function(){return this.rotate(t)})},e.prototype.rotateToMovie=function(e,t){this.setMovieLoadCommand(e,function(){return this.rotateTo(t)})},e.prototype.scaleMovie=function(e,t,n){this.setMovieLoadCommand(e,function(){return this.scale(t,n)})},e.prototype.scaleToMovie=function(e,t,n){this.setMovieLoadCommand(e,function(){return this.scaleTo(t,n)})},e.prototype.setMatrixMovie=function(e,t,n,r,i){null==n&&(n=1),null==r&&(r=1),null==i&&(i=0),this.setMovieLoadCommand(e,function(){return this.setMatrix(t,n,r,i)})},e.prototype.setAlphaMovie=function(e,t){this.setMovieLoadCommand(e,function(){return this.setAlpha(t)})},e.prototype.setColorTransformMovie=function(e,t){this.setMovieLoadCommand(e,function(){return this.setColorTransform(t)})},e.prototype.execMovieCommand=function(){var e,t,n,r,i,s,o,u,a;t=[],a=this.movieCommands;for(n in a){s=a[n],e=!0,r=this.rootMovie,o=0;for(u=n.length;o<u;o++)if(i=n[o],r=r.searchMovieInstance(i),null==r){e=!1;break}e&&(s(r),t.push(n))}e=0;for(r=t.length;e<r;e++)n=t[e],delete this.movieCommands[n]},e.prototype.setMovieCommand=function(e,t){var n;n=e.slice(0),this.movieCommands[n]=t,this.execMovieCommand()},e.prototype.searchAttachedMovie=function(e){return this.rootMovie.searchAttachedMovie(e)},e.prototype.searchAttachedLWF=function(e){return this.rootMovie.searchAttachedLWF(e)},e.prototype.addAllowButton=function(e){return e=this.searchInstanceId(this.getStringId(e)),0>e?!1:(null==this.allowButtonList&&(this.allowButtonList={}),this.allowButtonList[e]=!0)},e.prototype.removeAllowButton=function(e){return null==this.allowButtonList?!1:(e=this.searchInstanceId(this.getStringId(e)),0>e?!1:(delete this.allowButtonList[e],!0))},e.prototype.clearAllowButton=function(){this.allowButtonList=null},e.prototype.addDenyButton=function(e){return e=this.searchInstanceId(this.getStringId(e)),0>e?!1:(null==this.denyButtonList&&(this.denyButtonList={}),this.denyButtonList[e]=!0)},e.prototype.denyAllButtons=function(){var e,t,n;null==this.denyButtonList&&(this.denyButtonList={}),e=t=0;for(n=this.data.instanceNames.length;0>n?t>n:t<n;e=0>n?--t:++t)this.denyButtonList[e]=!0},e.prototype.removeDenyButton=function(e){return null==this.denyButtonList?!1:(e=this.searchInstanceId(this.getStringId(e)),0>e?!1:(delete this.denyButtonList[e],!0))},e.prototype.clearDenyButton=function(){this.denyButtonList=null},e.prototype.disableExec=function(){this.isExecDisabled=!0,this.executedForExecDisabled=!1},e.prototype.enableExec=function(){this.isExecDisabled=!1},e.prototype.setPropertyDirty=function(){this.isPropertyDirty=!0,null!=this.parent&&this.parent.lwf.setPropertyDirty()},e.prototype.setParent=function(e){var t;this.active=!0,this.parent=e,this.setTextScale(e.lwf.textScale),e=null!=(t=this.functions)?t.init:void 0,null!=e&&e.call(this)},e.prototype.setInteractive=function(){this.interactive=!0,null!=this.parent&&this.parent.lwf.setInteractive()},e.prototype.setFrameSkip=function(e){this.frameSkip=e,this.progress=0,null!=this.parent&&this.parent.lwf.setFrameSkip(e)},e.prototype.setFastForwardTimeout=function(e){this.fastForwardTimeout=e},e.prototype.setFastForward=function(e){this.fastForward=e,null!=this.parent&&this.parent.lwf.setFastForward(e)},e.prototype.getMovieFunctions=function(e){var t,n,r,i,s;return n=this.getMovieLinkageName(e),e=null!=(r=this.functions)?r[n+"_load"]:void 0,r=null!=(i=this.functions)?i[n+"_postLoad"]:void 0,i=null!=(t=this.functions)?t[n+"_unload"]:void 0,t=null!=(s=this.functions)?s[n+"_enterFrame"]:void 0,[e,r,i,t]},e.prototype.playAnimation=function(e,t,r){var i,s,o,u,a,f,l,c;o=0,e=this.data.animations[e];for(u=t;;)switch(i=e[o++],i){case n.END:return;case n.PLAY:u.play();break;case n.STOP:u.stop();break;case n.NEXTFRAME:u.nextFrame();break;case n.PREVFRAME:u.prevFrame();break;case n.GOTOFRAME:u.gotoFrameInternal(e[o++]);break;case n.GOTOLABEL:u.gotoFrame(this.searchFrame(u,e[o++]));break;case n.SETTARGET:u=t,i=e[o++];if(0!==i)for(a=0;0>i?a>i:a<i;0>i?--a:++a)switch(s=e[o++],s){case n.INSTANCE_TARGET_ROOT:u=this.rootMovie;break;case n.INSTANCE_TARGET_PARENT:u=u.parent,null==this.target&&(u=this.rootMovie);break;default:u=u.searchMovieInstanceByInstanceId(s,!1),null==u&&(u=t)}break;case n.EVENT:i=e[o++],s=null!=(l=this.eventHandlers[i])?l.slice(0):void 0;if(null!=s)for(a=0,f=s.length;a<f;a++)i=s[a],i(t,r);break;case n.CALL:i=e[o++],i=null!=(c=this.functions)?c[this.data.strings[i]]:void 0,null!=i&&i.call(t)}},e.prototype.dispatchEvent=function(e,t,n){var r,i,s;null==t&&(t=this.rootMovie),null==n&&(n=null),r="string"==typeof e?this.searchEventId(e):e,r=0>r||r>=this.data.events.length?this.genericEventHandlers[e]:this.eventHandlers[r];if(null==r)return!1;var o;o=[],i=0;for(s=r.length;i<s;i++)e=r[i],o.push(e);r=o,i=0;for(s=r.length;i<s;i++)e=r[i],null!=e&&e(t,n);return!0},e.prototype.inputPoint=function(e,t){var n,r;if(null==this.rootMovie)return null;this.intercepted=!1;if(!this.interactive)return null;this.pointX=e,this.pointY=t,r=!1;for(n=this.buttonHead;null!=n;){if(n.checkHit(e,t)){if(null!=this.allowButtonList){if(null==this.allowButtonList[n.instanceId]){if(this.interceptByNotAllowOrDenyButtons){this.intercepted=!0;break}n=n.buttonLink;continue}}else if(null!=this.denyButtonList&&null!=this.denyButtonList[n.instanceId]){if(this.interceptByNotAllowOrDenyButtons){this.intercepted=!0;break}n=n.buttonLink;continue}r=!0,this.focus!==n&&(null!=this.focus&&this.focus.rollOut(),this.focus=n,this.focus.rollOver());break}n=n.buttonLink}return r||null==this.focus||(this.focus.rollOut(),this.focus=null),this.focus},e.prototype.inputPress=function(){null!=this.rootMovie&&this.interactive&&(this.pressing=!0,null!=this.focus&&(this.pressed=this.focus,this.focus.press()))},e.prototype.inputRelease=function(){null!=this.rootMovie&&this.interactive&&(this.pressing=!1,null!=this.focus&&this.pressed===this.focus&&(this.focus.release(),this.pressed=null))},e.prototype.inputKeyPress=function(e){var t;if(null!=this.rootMovie&&this.interactive)for(t=this.buttonHead;null!=t;)t.keyPress(e),t=t.buttonLink},e}(),"undefined"!=typeof global&&(null==global.LWF&&(global.LWF={}),global.LWF.BitmapClip=i,global.LWF.Color=g,global.LWF.ColorTransform=y,global.LWF.Format=T,global.LWF.LWF=k,global.LWF.Loader=_,global.LWF.Matrix=D,global.LWF.Movie=P,global.LWF.Point=F,global.LWF.Property=q),k.prototype.addAllowButton=k.prototype.addAllowButton,k.prototype.addButtonEventHandler=k.prototype.addButtonEventHandler,k.prototype.addButtonEventListener=k.prototype.addButtonEventHandler,k.prototype.addDenyButton=k.prototype.addDenyButton,k.prototype.addEventHandler=k.prototype.addEventHandler,k.prototype.addEventListener=k.prototype.addEventHandler,k.prototype.addExecHandler=k.prototype.addExecHandler,k.prototype.addExecListener=k.prototype.addExecHandler,k.prototype.addMovieEventHandler=k.prototype.addMovieEventHandler,k.prototype.addMovieEventListener=k.prototype.addMovieEventHandler,k.prototype.clearAllowButton=k.prototype.clearAllowButton,k.prototype.clearButtonEventHandler=k.prototype.clearButtonEventHandler,k.prototype.clearButtonEventListener=k.prototype.clearButtonEventHandler,k.prototype.clearDenyButton=k.prototype.clearDenyButton,k.prototype.clearEventHandler=k.prototype.clearEventHandler,k.prototype.clearEventListener=k.prototype.clearEventHandler,k.prototype.clearExecHandler=k.prototype.clearExecHandler,k.prototype.clearExecListener=k.prototype.clearExecHandler,k.prototype.clearMovieEventHandler=k.prototype.clearMovieEventHandler,k.prototype.clearMovieEventListener=k.prototype.clearMovieEventHandler,k.prototype.denyAllButtons=k.prototype.denyAllButtons,k.prototype.destroy=k.prototype.destroy,k.prototype.dispatchEvent=k.prototype.dispatchEvent,k.prototype.exec=k.prototype.exec,k.prototype.fitForHeight=k.prototype.fitForHeight,k.prototype.fitForWidth=k.prototype.fitForWidth,k.prototype.forceExec=k.prototype.forceExec,k.prototype.forceExecWithoutProgress=k.prototype.forceExecWithoutProgress,k.prototype.getStageSize=k.prototype.getStageSize,k.prototype.getStringId=k.prototype.getStringId,k.prototype.gotoAndPlayMovie=k.prototype.gotoAndPlayMovie,k.prototype.gotoAndPlayMovie=k.prototype.gotoAndPlayMovie,k.prototype.gotoAndStopMovie=k.prototype.gotoAndStopMovie,k.prototype.gotoAndStopMovie=k.prototype.gotoAndStopMovie,k.prototype.init=k.prototype.init,k.prototype.inputKeyPress=k.prototype.inputKeyPress,k.prototype.inputPoint=k.prototype.inputPoint,k.prototype.inputPress=k.prototype.inputPress,k.prototype.inputRelease=k.prototype.inputRelease,k.prototype.inspect=k.prototype.inspect,k.prototype.moveMovie=k.prototype.moveMovie,k.prototype.moveToMovie=k.prototype.moveToMovie,k.prototype.nextFrameMovie=k.prototype.nextFrameMovie,k.prototype.playMovie=k.prototype.playMovie,k.prototype.prevFrameMovie=k.prototype.prevFrameMovie,k.prototype.removeAllowButton=k.prototype.removeAllowButton,k.prototype.removeButtonEventHandler=k.prototype.removeButtonEventHandler,k.prototype.removeButtonEventListener=k.prototype.removeButtonEventHandler,k.prototype.removeDenyButton=k.prototype.removeDenyButton,k.prototype.removeEventHandler=k.prototype.removeEventHandler,k.prototype.removeEventListener=k.prototype.removeEventHandler,k.prototype.removeExecHandler=k.prototype.removeExecHandler,k.prototype.removeExecListener=k.prototype.removeExecHandler,k.prototype.removeMovieEventHandler=k.prototype.removeMovieEventHandler,k.prototype.removeMovieEventListener=k.prototype.removeMovieEventHandler,k.prototype.render=k.prototype.render,k.prototype.rotateMovie=k.prototype.rotateMovie,k.prototype.rotateToMovie=k.prototype.rotateToMovie,k.prototype.scaleForHeight=k.prototype.scaleForHeight,k.prototype.scaleForWidth=k.prototype.scaleForWidth,k.prototype.scaleMovie=k.prototype.scaleMovie,k.prototype.scaleToMovie=k.prototype.scaleToMovie,k.prototype.searchAttachedLWF=k.prototype.searchAttachedLWF,k.prototype.searchAttachedMovie=k.prototype.searchAttachedMovie,k.prototype.searchEventId=k.prototype.searchEventId,k.prototype.searchFrame=k.prototype.searchFrame,k.prototype.searchProgramObjectId=k.prototype.searchProgramObjectId,k.prototype.setAlphaMovie=k.prototype.setAlphaMovie,k.prototype.setButtonEventHandler=k.prototype.setButtonEventHandler,k.prototype.setButtonEventListener=k.prototype.setButtonEventHandler,k.prototype.setColorTransformMovie=k.prototype.setColorTransformMovie,k.prototype.setEventHandler=k.prototype.setEventHandler,k.prototype.setEventListener=k.prototype.setEventHandler,k.prototype.setExecHandler=k.prototype.setExecHandler,k.prototype.setExecListener=k.prototype.setExecHandler,k.prototype.setFastForward=k.prototype.setFastForward,k.prototype.setFastForwardTimeout=k.prototype.setFastForwardTimeout,k.prototype.setFrameRate=k.prototype.setFrameRate,k.prototype.setFrameSkip=k.prototype.setFrameSkip,k.prototype.setMatrixMovie=k.prototype.setMatrixMovie,k.prototype.setMovieCommand=k.prototype.setMovieCommand,k.prototype.setMovieEventHandler=k.prototype.setMovieEventHandler,k.prototype.setMovieEventListener=k.prototype.setMovieEventHandler,k.prototype.setMovieLoadCommand=k.prototype.setMovieLoadCommand,k.prototype.setMoviePostLoadCommand=k.prototype.setMoviePostLoadCommand,k.prototype.setPreferredFrameRate=k.prototype.setPreferredFrameRate,k.prototype.setProgramObjectConstructor=k.prototype.setProgramObjectConstructor,k.prototype.setRendererFactory=k.prototype.setRendererFactory,k.prototype.setTextScale=k.prototype.setTextScale,k.prototype.setVisibleMovie=k.prototype.setVisibleMovie,k.prototype.stopMovie=k.prototype.stopMovie,_.load=_.load,S.prototype.check=S.prototype.check,S.prototype.name=S.prototype.name,d.prototype.getFullName=d.prototype.getFullName,o.prototype.addEventHandler=o.prototype.addEventHandler,o.prototype.addEventListener=o.prototype.addEventHandler,o.prototype.clearEventHandler=o.prototype.clearEventHandler,o.prototype.clearEventListener=o.prototype.clearEventHandler,o.prototype.removeEventHandler=o.prototype.removeEventHandler,o.prototype.removeEventListener=o.prototype.removeEventHandler,o.prototype.setEventHandler=o.prototype.setEventHandler,o.prototype.setEventListener=o.prototype.setEventHandler,P.prototype.addEventHandler=P.prototype.addEventHandler,P.prototype.addEventListener=P.prototype.addEventHandler,P.prototype.attachBitmap=P.prototype.attachBitmap,P.prototype.attachEmptyMovie=P.prototype.attachEmptyMovie,P.prototype.attachLWF=P.prototype.attachLWF,P.prototype.attachMovie=P.prototype.attachMovie,P.prototype.clearEventHandler=P.prototype.clearEventHandler,P.prototype.clearEventListener=P.prototype.clearEventHandler,P.prototype.detachBitmap=P.prototype.detachBitmap,P.prototype.detachFromParent=P.prototype.detachFromParent,P.prototype.detachLWF=P.prototype.detachLWF,P.prototype.detachMovie=P.prototype.detachMovie,P.prototype.dispatchEvent=P.prototype.dispatchEvent,P.prototype.getAttachedBitmap=P.prototype.getAttachedBitmap,P.prototype.getAttachedLWF=P.prototype.getAttachedLWF,P.prototype.getAttachedMovie=P.prototype.getAttachedMovie,P.prototype.getAttachedBitmaps=P.prototype.getAttachedBitmaps,P.prototype.getBounds=P.prototype.getBounds,P.prototype.globalToLocal=P.prototype.globalToLocal,P.prototype.gotoAndPlay=P.prototype.gotoAndPlay,P.prototype.gotoAndStop=P.prototype.gotoAndStop,P.prototype.gotoFrame=P.prototype.gotoFrame,P.prototype.gotoLabel=P.prototype.gotoLabel,P.prototype.inspect=P.prototype.inspect,P.prototype.localToGlobal=P.prototype.localToGlobal,P.prototype.move=P.prototype.move,P.prototype.moveTo=P.prototype.moveTo,P.prototype.nextEnterFrame=P.prototype.nextEnterFrame,P.prototype.nextFrame=P.prototype.nextFrame,P.prototype.override=P.prototype.override,P.prototype.play=P.prototype.play,P.prototype.prevFrame=P.prototype.prevFrame,P.prototype.removeEventHandler=P.prototype.removeEventHandler,P.prototype.removeEventListener=P.prototype.removeEventHandler,P.prototype.removeMovieClip=P.prototype.removeMovieClip,P.prototype.requestCalculateBounds=P.prototype.requestCalculateBounds,P.prototype.rotate=P.prototype.rotate,P.prototype.rotateTo=P.prototype.rotateTo,P.prototype.scale=P.prototype.scale,P.prototype.scaleTo=P.prototype.scaleTo,P.prototype.searchAttachedLWF=P.prototype.searchAttachedLWF,P.prototype.searchAttachedMovie=P.prototype.searchAttachedMovie,P.prototype.searchMovieInstance=P.prototype.searchMovieInstance,P.prototype.searchMovieInstanceByInstanceId=P.prototype.searchMovieInstanceByInstanceId,P.prototype.setAlpha=P.prototype.setAlpha,P.prototype.setColorTransform=P.prototype.setColorTransform,P.prototype.setEventHandler=P.prototype.setEventHandler,P.prototype.setEventListener=P.prototype.setEventHandler,P.prototype.setMatrix=P.prototype.setMatrix,P.prototype.setRenderingOffset=P.prototype.setRenderingOffset,P.prototype.setVisible=P.prototype.setVisible,P.prototype.stop=P.prototype.stop,P.prototype.swapAttachedLWFDepth=P.prototype.swapAttachedLWFDepth,P.prototype.swapAttachedMovieDepth=P.prototype.swapAttachedMovieDepth,P.prototype.swapDepths=P.prototype.swapDepths,q.prototype.clear=q.prototype.clear,q.prototype.move=q.prototype.move,q.prototype.moveTo=q.prototype.moveTo,q.prototype.rotate=q.prototype.rotate,q.prototype.rotateTo=q.prototype.rotateTo,q.prototype.scale=q.prototype.scale,q.prototype.scaleTo=q.prototype.scaleTo,q.prototype.setAlpha=q.prototype.setAlpha,q.prototype.setColorTransform=q.prototype.setColorTransform,q.prototype.setMatrix=q.prototype.setMatrix,D.prototype.clear=D.prototype.clear,D.prototype.set=D.prototype.set,g.prototype.set=g.prototype.set,y.prototype.clear=y.prototype.clear,y.prototype.set=y.prototype.set,i.prototype.detachFromParent=i.prototype.detachFromParent,i.prototype.setMatrix=i.prototype.setMatrix,V=function(){function e(e,t){this.factory=e,this.node=t,this.appended=!1,this.node.style.visibility="hidden",this.matrix=new D(0,0,0,0,0,0),this.matrixForDom=new D(0,0,0,0,0,0),this.matrixForRender=new D(0,0,0,0,0,0),this.zIndex=this.alpha=-1,this.visible=!1}return e.prototype.destructor=function(){this.appended&&this.factory.stage.parentNode.removeChild(this.node)},e.prototype.destruct=function(){this.factory.resourceCache.constructor===J?this.factory.destructRenderer(this):this.destructor()},e.prototype.update=function(e,t){},e.prototype.render=function(e,t,n,r,i){if(this.visible===i){if(!1===i)return}else{this.visible=i;if(!1===i){this.node.style.visibility="hidden";return}this.node.style.visibility="visible"}if(this.matrix.setWithComparing(e)||!this.appended||this.alpha!==t.multi.alpha||this.zIndex!==n+r)this.appended||(this.appended=!0,this.node.style.position="absolute",this.node.style.webkitTransformOrigin="0px 0px",this.node.style.display="block",this.factory.stage.parentNode.appendChild(this.node)),this.alpha=t.multi.alpha,this.zIndex=n+r,i=this.node.style,i.zIndex=this.zIndex,i.opacity=this.alpha,i.webkitTransform="none",r=this.factory.stage.getBoundingClientRect(),n=this.node.getBoundingClientRect(),t=this.factory.resourceCache.constructor===J?1:window.devicePixelRatio,e=this.matrixForDom,e.scaleX=1/t,e.scaleY=1/t,e.translateX=r.left-n.left,e.translateY=r.top-n.top,e=X.calcMatrix(this.matrixForRender,this.matrixForDom,this.matrix),i.webkitTransform=this.use3D?"matrix3d("+(""+e.scaleX+","+e.skew1+",0,0,")+(""+e.skew0+","+e.scaleY+",0,0,")+"0,0,1,0,"+(""+e.translateX+","+e.translateY+",0,1)"):"matrix("+(""+e.scaleX+","+e.skew1+","+e.skew0+","+e.scaleY+",")+(""+e.translateX+","+e.translateY+")")},e}(),$=function(){function e(){}return e.load=function(e){var t,n,r,i,s;if(null==e||"string"!=typeof e)return null;if(0===(e.charCodeAt(T.Constant.OPTION_OFFSET)&255&T.Constant.OPTION_COMPRESSED))return _.load(e);if("undefined"!=typeof Uint8Array){t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=i=0;for(s=e.length;0>s?i>s:i<s;r=0>s?--i:++i)n[r]=e.charCodeAt(r)&255;return this.loadArrayBuffer(t)}t=Array(e.length),r=n=0;for(i=e.length;0>i?n>i:n<i;r=0>i?--n:++n)t[r]=e.charCodeAt(r)&255;return this.loadArray(t)},e.loadArray=function(e){var t,n;if(null==e)return null;if(0===(e[T.Constant.OPTION_OFFSET]&T.Constant.OPTION_COMPRESSED))return _.loadArray(e);n=e.slice(0,T.Constant.HEADER_SIZE),e=e.slice(T.Constant.HEADER_SIZE);try{t=global.LWF.LZMA.decompressFile(e)}catch(r){return null}return e=n.concat(t),_.loadArray(e)},e.loadArrayBuffer=function(e){var t,n;if(null==e)return null;if(0===((new Uint8Array(e,T.Constant.OPTION_OFFSET,1))[0]&T.Constant.OPTION_COMPRESSED))return _.loadArrayBuffer(e);n=new Uint8Array(e.slice(0,T.Constant.HEADER_SIZE)),e=new Uint8Array(e.slice(T.Constant.HEADER_SIZE));try{t=global.LWF.LZMA.decompressFile(e),t=new Uint8Array(t)}catch(r){return null}return e=new Uint8Array(n.length+t.length),e.set(n,0),e.set(t,T.Constant.HEADER_SIZE),_.loadArrayBuffer(e.buffer)},e}(),J=function(){function e(){this.cache={},this.canvasIndex=this.lwfInstanceIndex=0}var t;return t=null,e.get=function(){return null!=t?t:t=new this},e.prototype.getRendererName=function(){return"WebkitCSS"},e.prototype.clear=function(){var e,t,n,r,i;r=this.cache;for(t in r)for(n in e=r[t],i=e.instances,i)e=i[n],e.destroy();return this.cache={}},e.prototype.getTextureURL=function(e,t,n){var r,i,s,o;return t=null!=(s=null!=(o=e.imagePrefix)?o:e.prefix)?s:"",s=null!=(i=e.imageSuffix)?i:"",i=null!=(r=e.imageQueryString)?r:"",0<i.length&&(i="?"+i),r=e.imageMap,n=n.filename,"function"==typeof r?(e=r.call(e,n),null!=e&&(n=e)):"object"==typeof r&&(e=r[n],null!=e&&(n=e)),n.match(/^\//)||(n=t+n),n=n.replace(/(\.gif|\.png|\.jpg)/i,s+"$1"+i)},e.prototype.checkTextures=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;e._alphaMap={},e._colorMap={},e._textures=[],f=/_atlas_(.*)_info_([0-9])_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)/i,h=/(.*)_rgb_([0-9a-f]{6})(.*)$/i,p=/(.*)_rgb_([0-9]*),([0-9]*),([0-9]*)(.*)$/i,d=/(.*)_rgba_([0-9a-f]{8})(.*)$/i,v=/(.*)_rgba_([0-9]*),([0-9]*),([0-9]*),([0-9]*)(.*)$/i,l=/(.*)_add_([0-9a-f]{6})(.*)$/i,c=/(.*)_add_([0-9]*),([0-9]*),([0-9]*)(.*)$/i,x=t.textures,E=0;for(S=x.length;E<S;E++)m=x[E],u=null,null!=(n=m.filename.match(h))?(u=n[1]+n[3],i="rgb",r=n[2]):null!=(n=m.filename.match(p))?(u=n[1]+n[5],i="rgb",a=parseInt(n[2],10).toString(16),s=parseInt(n[3],10).toString(16),r=parseInt(n[4],10).toString(16),r=(1===a.length?"0":"")+a+(1===s.length?"0":"")+s+(1===r.length?"0":"")+r):null!=(n=m.filename.match(d))?(u=n[1]+n[3],i="rgba",r=n[2]):null!=(n=m.filename.match(v))?(u=n[1]+n[6],i="rgba",a=parseInt(n[2],10).toString(16),s=parseInt(n[3],10).toString(16),r=parseInt(n[4],10).toString(16),n=parseInt(n[5],10).toString(16),r=(1===a.length?"0":"")+a+(1===s.length?"0":"")+s+(1===r.length?"0":"")+r+(1===n.length?"0":"")+n):null!=(n=m.filename.match(l))?(u=n[1]+n[3],i="add",r=n[2]):null!=(n=m.filename.match(c))&&(u=n[1]+n[5],i="add",a=parseInt(n[2],10).toString(16),s=parseInt(n[3],10).toString(16),r=parseInt(n[4],10).toString(16),r=(1===a.length?"0":"")+a+(1===s.length?"0":"")+s+(1===r.length?"0":"")+r),null!=u?(o=m.filename.match(f),null!=o?(u=o[1],n="1"===o[2]?!0:!1,a=parseInt(o[3],10),g=parseInt(o[4],10),y=parseInt(o[5],10),s=parseInt(o[6],10),b=parseInt(o[7],10),o=parseInt(o[8],10)):(n=!1,g=a=0,s=y=null,o=b=0),null==(w=e._colorMap)[u]&&(w[u]=[]),e._colorMap[u].push({filename:m.filename,colorOp:i,colorValue:r,rotated:n,u:a,v:g,w:y,h:s,x:b,y:o})):(e._textures.push(m),n=m.filename.match(/^(.*)_withalpha(.*\.)jpg(.*)$/i),null!=n&&(u=""+n[1]+"_alpha"+n[2]+"png"+n[3],u=new T.TextureReplacement(u),e._textures.push(u),e._alphaMap[m.filename]=[m,u],e._alphaMap[u.filename]=[m,u]))},e.prototype.onloaddata=function(e,t,n){var r,i;null!=t&&t.check()?(e.name=t.name(),this.checkTextures(e,t),n=t.useScript&&null==(null!=(r=global.LWF)?null!=(i=r.Script)?i[t.name()]:void 0:void 0),this.cache[e.lwfUrl].data=t,e.total=e._textures.length+1,n&&e.total++,e.loadedCount=1,null!=e.onprogress&&e.onprogress.call(e,e.loadedCount,e.total),n?this.loadJS(e,t):this.loadImages(e,t)):(e.error.push({url:n,reason:"dataError"}),e.onload.call(e,null))},e.prototype.loadLWF=function(e){var t,n;n=e.lwf,n.match(/^\//)||(n=(null!=(t=e.prefix)?t:"")+n),e.lwfUrl=n,e.error=[];if(null!=this.cache[n]&&(t=this.cache[n].data,null!=t)){e.name=t.name(),this.checkTextures(e,t),e.total=e._textures.length+1,e.loadedCount=1,null!=e.onprogress&&e.onprogress.call(e,e.loadedCount,e.total),this.loadImages(e,t);return}this.cache[n]={},this.loadLWFData(e,n)},e.prototype.dispatchOnloaddata=function(e,t,n,r,i,s){var o,u,a,f,l;if(n){a=null,u=document.getElementsByTagName("script"),n=/(^|.*\/lwf_cocos2d.js)$/i,o=f=0;for(l=u.length;0>l?f>l:f<l;o=0>l?--f:++f)if(""!==u[o].src&&(o=u[o].src.split("?")[0],o=o.match(n),null!=o)){a=o[1];break}null!=a&&function(n){return function(r){var o;return o=new Worker(r),o.onmessage=function(r){return s=new S(r.data),o=o.onmessage=o.onerror=null,n.onloaddata(e,s,t)},o.onerror=function(t){return e.error.push({url:r,reason:"error"}),o=o.onmessage=o.onerror=null,e.onload.call(e,null)},i&&"base64"!==s.type?o.webkitPostMessage(s.data):o.postMessage(s.data)}}(this)(a)}if(null==a){if("base64"===s.type){try{s=global.LWF.Base64.atobArray(s.data),s=global.LWF.LZMA.decompressFile(s)}catch(c){s=null}s=$.loadArray(s)}else s=r?$.loadArrayBuffer(s.data):$.load(s.data);this.onloaddata(e,s,t)}},e.prototype.loadLWFData=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d;o=e.onload,c=l=!1,"undefined"==typeof Worker||null!=e.worker&&!e.worker||(l=!0,"undefined"!=typeof Worker.prototype.webkitPostMessage&&(c=!0)),i=t.match(/([^\/]+)\.lwf\.js/i),null!=i?(s=i[1].toLowerCase(),a=null!=(p=global.LWF)?null!=(d=p.DataScript)?d[s]:void 0:void 0,null!=a?(n={type:"base64",data:a},this.dispatchOnloaddata(e,t,l,f,c,n)):(r=document.getElementsByTagName("head")[0],u=document.createElement("script"),u.type="text/javascript",u.charset="UTF-8",u.onabort=function(n){return function(){return e.error.push({url:t,reason:"abort"}),r.removeChild(u),u=u.onload=u.onabort=u.onerror=null,o.call(e,null)}}(this),u.onerror=function(n){return function(){return e.error.push({url:t,reason:"error"}),r.removeChild(u),u=u.onload=u.onabort=u.onerror=null,o.call(e,null)}}(this),u.onload=function(i){return function(){var h,p;return a=null!=(h=global.LWF)?null!=(p=h.DataScript)?p[s]:void 0:void 0,r.removeChild(u),u=u.onload=u.onabort=u.onerror=null,null!=a?(n={type:"base64",data:a},i.dispatchOnloaddata(e,t,l,f,c,n)):(e.error.push({url:t,reason:"error"}),o.call(e,null))}}(this),u.src=t,r.appendChild(u),i=e.lwfUrl,null==(p=this.cache[i]).scripts&&(p.scripts=[]),this.cache[i].scripts.push(u))):(h=new XMLHttpRequest,h.open("GET",t,!0),"string"!=typeof h.responseType||"undefined"==typeof Uint8Array||"undefined"==typeof Int32Array||"undefined"==typeof Float32Array||l&&!c?(f=!1,h.overrideMimeType("text/plain; charset=x-user-defined")):(f=!0,h.responseType="arraybuffer"),h.onabort=function(n){return function(){return e.error.push({url:t,reason:"abort"}),h=h.onabort=h.onerror=h.onreadystatechange=null,o.call(e,null)}}(this),h.onerror=function(n){return function(){return e.error.push({url:t,reason:"error"}),h=h.onabort=h.onerror=h.onreadystatechange=null,o.call(e,null)}}(this),h.onreadystatechange=function(r){return function(){var i,s;if(4===h.readyState){if(0===h.status){if(i=t.match(/^([a-zA-Z][a-zA-Z0-9\+\-\.]*\:)./i)?RegExp.$1:"undefined"!=typeof global&&null!==global?null!=(s=global.location)?s.protocol:void 0:void 0,"http:"===i||"https:"===i)e.error.push({url:t,reason:"networkError"}),h=h.onabort=h.onerror=h.onreadystatechange=null,o.call(e,null)}else if(200>h.status||300<=h.status){e.error.push({url:t,reason:"error"}),h=h.onabort=h.onerror=h.onreadystatechange=null,o.call(e,null);return}return n=f?{type:"arraybuffer",data:h.response}:{type:"text",data:h.responseText},r.dispatchOnloaddata(e,t,l,f,c,n),h=h.onabort=h.onerror=h.onreadystatechange=null}}}(this),h.send(null))},e.prototype.loadJS=function(e,t){var n,r,i,s,o,u,a;n=e.lwfUrl,o=null!=(u=e.js)?u:e.lwf.replace(/\.lwf(\.js)?/i,".js"),o.match(/^\//)||(o=(null!=(a=e.prefix)?a:"")+o),r=e.onload,i=e.onprogress,s=document.createElement("script"),s.type="text/javascript",s.charset="UTF-8",s.onabort=function(t){return function(){return delete t.cache[n],e.error.push({url:o,reason:"abort"}),s=s.onload=s.onabort=s.onerror=null,r.call(e,null)}}(this),s.onerror=function(t){return function(){return delete t.cache[n],e.error.push({url:o,reason:"error"}),s=s.onload=s.onabort=s.onerror=null,r.call(e,null)}}(this),s.onload=function(n){return function(){return e.loadedCount++,null!=i&&i.call(e,e.loadedCount,e.total),s=s.onload=s.onabort=s.onerror=null,n.loadImages(e,t)}}(this),s.src=o,document.getElementsByTagName("head")[0].appendChild(s),null==(u=this.cache[n]).scripts&&(u.scripts=[]),this.cache[n].scripts.push(s)},e.prototype.loadImagesCallback=function(e,t,n){e.loadedCount++,null!=e.onprogress&&e.onprogress.call(e,e.loadedCount,e.total),e.loadedCount===e.total&&(delete e._alphaMap,delete e._colorMap,delete e._textures,0<e.error.length?(delete this.cache[e.lwf],e.onload.call(e,null)):this.newLWF(e,t,n))},e.prototype.drawImage=function(e,t,n,r,i,s,o,u,a,f){n.rotated?(n=new D,X.rotateMatrix(n,new D,1,r,i+u),e.setTransform(n.scaleX,n.skew1,n.skew0,n.scaleY,n.translateX,n.translateY)):0!==r||0!==i?(n=new D,X.scaleMatrix(n,new D,1,r,i),e.setTransform(n.scaleX,n.skew1,n.skew0,n.scaleY,n.translateX,n.translateY)):e.setTransform(1,0,0,1,0,0),e.drawImage(t,s,o,a,f,0,0,a,f)},e.prototype.getCanvasName=function(){return"__canvas__"+ ++this.canvasIndex},e.prototype.createCanvas=function(t,n){var r,i,s;return s=this.getCanvasName(),this.constructor===e?(i=document.getCSSCanvasContext("2d",s,t,n),r=i.canvas):(r=document.createElement("canvas"),r.width=t,r.height=n,i=r.getContext("2d")),r.name=s,[r,i]},e.prototype.generateImages=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;f=e._colorMap[n.filename];if(null!=f)for(d=r.width/n.width,m=0,g=f.length;m<g;m++){h=f[m],p=Math.round(h.u*d),i=Math.round(h.v*d),v=Math.round((null!=(y=h.w)?y:n.width)*d),c=Math.round((null!=(b=h.h)?b:n.height)*d),h.rotated?(l=c,s=v):(l=v,s=c),u=this.createCanvas(v,c),e=u[0],u=u[1];switch(h.colorOp){case"rgb":u.fillStyle="#"+h.colorValue,u.fillRect(0,0,v,c),u.globalCompositeOperation="destination-in",this.drawImage(u,r,h,0,0,p,i,c,l,s);break;case"rgba":this.drawImage(u,r,h,0,0,p,i,c,l,s),u.globalCompositeOperation="source-atop",i=h.colorValue,p=parseInt(i.substr(0,2),16),l=parseInt(i.substr(2,2),16),s=parseInt(i.substr(4,2),16),i=parseInt(i.substr(6,2),16)/255,u.fillStyle="rgba("+p+", "+l+", "+s+", "+i+")",u.fillRect(0,0,v,c);break;case"add":o=document.createElement("canvas"),o.width=v,o.height=c,a=o.getContext("2d"),a.fillStyle="#"+h.colorValue,a.fillRect(0,0,v,c),a.globalCompositeOperation="destination-in",this.drawImage(a,r,h,0,0,p,i,c,l,s),this.drawImage(u,r,h,0,0,p,i,c,l,s),u.globalCompositeOperation="lighter",u.setTransform(1,0,0,1,0,0),u.drawImage(o,0,0,o.width,o.height,0,0,o.width,o.height)}u.globalCompositeOperation="source-over",t[h.filename]=e}},e.prototype.loadImages=function(e,t){var n,r,i,s,o,u,a;n={};if(0===t.textures.length)this.newLWF(e,n,t);else for(a=e._textures,s=function(r){return function(i,s){var o;return o=new Image,o.onabort=function(){return e.error.push({url:s,reason:"abort"}),o=o.onload=o.onabort=o.onerror=null,r.loadImagesCallback(e,n,t)},o.onerror=function(){return e.error.push({url:s,reason:"error"}),o=o.onload=o.onabort=o.onerror=null,r.loadImagesCallback(e,n,t)},o.onload=function(){var s,u,a,f,l,c;return n[i.filename]=o,s=e._alphaMap[i.filename],null!=s?(l=s[0],s=s[1],c=n[l.filename],u=n[s.filename],null!=c&&null!=u&&(f=r.createCanvas(c.width,c.height),a=f[0],f=f[1],f.drawImage(c,0,0,c.width,c.height,0,0,c.width,c.height),f.globalCompositeOperation="destination-in",f.drawImage(u,0,0,u.width,u.height,0,0,c.width,c.height),f.globalCompositeOperation="source-over",delete n[l.filename],delete n[s.filename],n[l.filename]=a,r.generateImages(e,n,l,a))):r.generateImages(e,n,i,o),o=o.onload=o.onabort=o.onerror=null,r.loadImagesCallback(e,n,t)},o.src=s}}(this),o=0,u=a.length;o<u;o++)r=a[o],i=this.getTextureURL(e,t,r),s(r,i)},e.prototype.newFactory=function(e,t,n){var r,i,s,o;return new WebkitCSSRendererFactory(n,this,t,e.stage,null!=(r=e.textInSubpixel)?r:!1,null!=(i=e.use3D)?i:!0,null!=(s=e.recycleTextCanvas)?s:!0,null!=(o=e
.quirkyClearRect)?o:!1)},e.prototype.onloadLWF=function(e,t){var n;n=t.rendererFactory,null!=e.setBackgroundColor?n.setBackgroundColor(e.setBackgroundColor):e.useBackgroundColor&&n.setBackgroundColor(t),e.fitForHeight?n.fitForHeight(t):e.fitForWidth&&n.fitForWidth(t),e.onload.call(e,t)},e.prototype.newLWF=function(e,t,n){var r,i,s,o;r=this.cache[e.lwfUrl],t=this.newFactory(e,t,n),n.useScript&&(i=null!=(s=global.LWF)?null!=(o=s.Script)?o[n.name()]:void 0:void 0),n=new k(n,t,i,e.privateData),null!=e.active&&(n.active=e.active),n.url=e.lwfUrl,n.lwfInstanceId=++this.lwfInstanceIndex,null==r.instances&&(r.instances={}),r.instances[n.lwfInstanceId]=n,r=e.parentLWF,null!=r&&(r.loadedLWFs[n.lwfInstanceId]=n),null!=e.preferredFrameRate&&(null!=e.execLimit?n.setPreferredFrameRate(e.preferredFrameRate,e.execLimit):n.setPreferredFrameRate(e.preferredFrameRate)),this.onloadLWF(e,n)},e.prototype.unloadLWF=function(e){var t,n,r,i,s,o,u,a,f;t=this.cache[e.url];if(null!=t){e.lwfInstanceId&&delete t.instances[e.lwfInstanceId],n=!0,a=t.instances;for(i in a){n=!1;break}if(n){try{if(null!=t.scripts)for(r=document.getElementsByTagName("head")[0],f=t.scripts,o=0,u=f.length;o<u;o++)s=f[o],r.removeChild(s)}catch(l){}delete this.cache[e.url]}}},e.prototype.loadLWFs=function(e,t){var n,r,i,s,o,u,a,f,l;r=e.length,i=0,n=null,u=function(e){return function(e){return o.onload=function(s){null!=e&&e(s),0<o.error.length&&(null==n&&(n=[]),n=n.concat(o.error)),++i;if(r===i)return t(n)}}}(this),l=[],a=0;for(f=e.length;a<f;a++)o=e[a],s=o.onload,u(s),l.push(this.loadLWF(o));return l},e.prototype.getCache=function(){return this.cache},e.prototype.setParticleConstructor=function(e){this.particleConstructor=e},e.prototype.setDOMElementConstructor=function(e){this.domElementConstructor=e},e}(),"undefined"!=typeof window&&null!==window||"undefined"==typeof self||null===self||(self.onmessage=function(e){if("undefined"!=typeof self.webkitPostMessage&&"object"==typeof e.data)e=$.loadArrayBuffer(e.data),self.webkitPostMessage(e);else{e=e.data;if("L"===e[0]&&"W"===e[1]&&"F"===e[2])e=$.load(e);else{try{e=global.LWF.Base64.atobArray(e),e=global.LWF.LZMA.decompressFile(e)}catch(t){e=null}e=$.loadArray(e)}"undefined"!=typeof self.webkitPostMessage?self.webkitPostMessage(e):self.postMessage(e)}return self.close()}),p=function(){function e(e,t,n,r){var i,s;this.resourceCache=t,this.cache=n,this.textInSubpixel=r,this.bitmapContexts=[],s=e.bitmaps,r=0;for(i=s.length;r<i;r++)n=s[r],-1!==n.textureFragmentId&&(t=new T.BitmapEx,t.matrixId=n.matrixId,t.textureFragmentId=n.textureFragmentId,t.u=0,t.v=0,t.w=1,t.h=1,this.bitmapContexts.push(new f(this,e,t)));this.bitmapExContexts=[],i=e.bitmapExs,n=0;for(r=i.length;n<r;n++)t=i[n],-1!==t.textureFragmentId&&this.bitmapExContexts.push(new f(this,e,t));this.textContexts=[],i=e.texts,n=0;for(r=i.length;n<r;n++)t=i[n],this.textContexts.push(new v(this,e,t));this.particleContexts=[],i=e.particles,n=0;for(r=i.length;n<r;n++)t=i[n],this.particleContexts.push(new c(this,e,t));this.lwfNode=null}return e.prototype.destruct=function(){var e,t,n,r;r=this.bitmapContexts,t=0;for(n=r.length;t<n;t++)e=r[t],e.destruct();r=this.bitmapExContexts,t=0;for(n=r.length;t<n;t++)e=r[t],e.destruct();r=this.textContexts,t=0;for(n=r.length;t<n;t++)e=r[t],e.destruct()},e.prototype.init=function(e){var t,n,r,i,s,o;if(!this.setupedDomElementConstructor){this.setupedDomElementConstructor=!0,s=e.data.programObjects,o=[],r=0;for(i=s.length;r<i;r++)t=s[r],n=e.data.strings[t.stringId],t=n.match(/^DOM_(.*)/),null!=t?(t=t[1],o.push(function(t){return function(r){return e.setProgramObjectConstructor(n,function(e,n,i,s){return n=t.resourceCache.domElementConstructor,null==n?null:(e=n(e,r,i,s),null==e?null:new V(t,e))})}}(this)(t))):o.push(void 0);return o}},e.prototype.beginRender=function(e){},e.prototype.endRender=function(e){},e.prototype.setBlendMode=function(e){},e.prototype.setMaskMode=function(e){},e.prototype.constructBitmap=function(e,t,n){if(e=this.bitmapContexts[t])return new l(e)},e.prototype.constructBitmapEx=function(e,t,n){if(e=this.bitmapExContexts[t])return new l(e)},e.prototype.constructText=function(e,t,n){if(t=this.textContexts[t])return new m(e,t,n)},e.prototype.constructParticle=function(e,t,n){if(e=this.particleContexts[t])return new h(e)},e.prototype.convertColor=function(e,t,n){X.calcColor(e,t,n),e.red=Math.round(255*e.red),e.green=Math.round(255*e.green),e.blue=Math.round(255*e.blue),e.alpha=Math.round(255*e.alpha)},e.prototype.getSize=function(){var e,t;return null!=this.lwfNode&&(e=this.lwfNode.getContentSize(),t=e.width,e=e.height),0===t&&0===e&&(e=cc.Director.getInstance().getWinSizeInPixels(),t=e.width,e=e.height),[t,e]},e.prototype.fitForHeight=function(e){var t,n;t=this.getSize(),n=t[0],t=t[1],0!==t&&t!==e.data.header.height&&e.fitForHeight(n,t)},e.prototype.fitForWidth=function(e){var t,n;t=this.getSize(),n=t[0],t=t[1],0!==n&&n!==e.data.header.width&&e.fitForWidth(n,t)},e.prototype.scaleForHeight=function(e){var t,n;t=this.getSize(),n=t[0],t=t[1],0!==t&&t!==e.data.header.height&&e.scaleForHeight(n,t)},e.prototype.scaleForWidth=function(e){var t,n;t=this.getSize(),n=t[0],t=t[1],0!==n&&n!==e.data.header.width&&e.scaleForWidth(n,t)},e.prototype.setBackgroundColor=function(e){"number"!=typeof e&&"string"==typeof e&&parseInt(e,16)},e}(),f=function(){function e(e,t,n){this.factory=e,this.data=t,this.fragment=t.textureFragments[n.textureFragmentId],t=t.textures[this.fragment.textureId],e=this.factory.cache[t.filename],this.texture2d=cc.TextureCache.getInstance().textureForKey(e),e=this.texture2d.getPixelsWide()/t.width,this.scale=1/(t.scale*e),this.fragment.rotated?(n=this.fragment.h,t=this.fragment.w):(n=this.fragment.w,t=this.fragment.h),this.imageHeight=this.fragment.h*e,this.rect=cc.rect(this.fragment.u,this.fragment.v,n,t)}return e.prototype.destruct=function(){},e}(),l=function(){function e(e){this.context=e,e=this.context.fragment,this.matrix=new D(0,0,0,0,0,0);if(e.rotated||0!==e.x||0!==e.y||1!==this.context.scale)this.matrixForAtlas=new D;this.bitmap=cc.LWFBitmap.lwfBitmapWithTexture(this.context.texture2d,this.context.rect),this.visible=!0,this.alpha=1,this.z=-1}return e.prototype.destruct=function(){this.bitmap.removeFromParent(!0)},e.prototype.render=function(e,t,n,r,i){var s,o;this.z!==n&&(-1===this.z?this.context.factory.lwfNode.addChild(this.bitmap,n):this.bitmap.getParent().reorderChild(this.bitmap,n),this.z=n);if(this.matrix.setWithComparing(e)){e=this.matrix,n=this.context.fragment,s=n.x,o=n.y,r=this.context.scale;if(n.rotated)e=X.rotateMatrix(this.matrixForAtlas,e,r,s,o+n.h);else if(1!==r||0!==s||0!==o)e=X.scaleMatrix(this.matrixForAtlas,e,r,s,o);this.bitmap.setMatrix(e)}if(this.alpha!==t.multi.alpha||this.visible!==i)this.alpha=t.multi.alpha,this.visible=i,this.bitmap.setOpacity(this.visible?255*this.alpha:0)},e}(),v=function(){function e(e,t,n){this.factory=e,this.data=t,this.text=n,this.str=this.data.strings[this.text.stringId],this.textProperty=this.data.textProperties[this.text.textPropertyId],e=this.data.fonts[this.textProperty.fontId],this.textColor=this.data.colors[this.text.colorId],this.name=this.data.strings[this.text.nameStringId],this.fontName='"'+this.data.strings[e.stringId]+'",sans-serif'}return e.prototype.destruct=function(){},e}(),m=function(){function t(t,n,r){var i;this.lwf=t,this.context=n,this.textObject=r,this.str=null!=(i=this.textObject.parent[this.context.name])?i:this.context.str,null!=this.str&&(this.str=this.str+""),this.matrix=new D(0,0,0,0,0,0),this.matrixForScale=new D,this.color=new g,this.color3B=cc.c3b();switch(this.context.textProperty.align&e.ALIGN_MASK){case e.RIGHT:t=cc.TEXT_ALIGNMENT_RIGHT;break;case e.CENTER:t=cc.TEXT_ALIGNMENT_CENTER;break;default:t=cc.TEXT_ALIGNMENT_LEFT}switch(this.context.textProperty.align&e.VERTICAL_MASK){case e.VERTICAL_BOTTOM:r=cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM;break;case e.VERTICAL_MIDDLE:r=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;break;default:r=cc.VERTICAL_TEXT_ALIGNMENT_TOP}n=this.lwf.textScale,this.label=cc.LWFLabel.create("",this.context.fontName,this.context.textProperty.fontHeight*n,cc.size(this.context.text.width*n,this.context.text.height*n),t,r),this.z=-1,this.textRendered=!1}return t.prototype.destruct=function(){this.label.removeFromParent(!0)},t.prototype.render=function(e,t,n,r,i){var s,o;if(i){this.z!==n&&(-1===this.z?this.context.factory.lwfNode.addChild(this.label,n):this.label.getParent().reorderChild(this.label,n),this.z=n),o=this.color.red,s=this.color.green,i=this.color.blue,this.context.factory.convertColor(this.color,this.context.textColor,t),t=this.color3B,t.r=this.color.red,t.g=this.color.green,t.b=this.color.blue,r=this.color.alpha,n=!1;if(o!==this.color.red||s!==this.color.green||i!==this.color.blue||r!==this.color.alpha)this.label.setOpacity(r),n=!0;i=!1,r=this.textObject.parent[this.context.name],null!=r&&(r=r+""),null!=r&&r!==this.str&&(i=!0,this.str=r),(!this.textRendered||n||i)&&this.renderText(t),this.matrix.setWithComparing(e)&&(e=X.scaleMatrix(this.matrixForScale,this.matrix,1/this.lwf.textScale,0,0),this.context.factory.textInSubpixel||(e.translateX=Math.round(e.translateX),e.translateY=Math.round(e.translateY)),this.label.setMatrix(e))}else this.label.setOpacity(0)},t.prototype.renderText=function(e){this.textRendered=!0,this.label.setColor(e),this.label.setString(this.str)},t}(),c=function(){function e(e,t,n){this.factory=e,this.data=t,this.name=t.strings[t.particleDatas[n.particleDataId].stringId],this.plist=this.factory.resourceCache.particlePrefix+this.name+this.factory.resourceCache.particleSuffix}return e.prototype.destruct=function(){},e}(),h=function(){function e(e){this.context=e,this.matrix=new D,this.particle=cc.LWFParticle.create(this.context.plist),this.visible=!0,this.alpha=1,this.z=-1}return e.prototype.destruct=function(){return this.particle.removeFromParent(!0)},e.prototype.update=function(e,t){},e.prototype.render=function(e,t,n,r,i){this.z!==n&&(-1===this.z?this.context.factory.lwfNode.addChild(this.particle,n):this.particle.getParent().reorderChild(this.particle,n),this.z=n),this.matrix.setWithComparing(e)&&this.particle.setMatrix(this.matrix);if(this.alpha!==t.multi.alpha||this.visible!==i)return this.alpha=t.multi.alpha,this.visible=i,this.particle.setOpacity(this.visible?255*this.alpha:0)},e}(),d=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.particlePrefix="res/",this.particleSuffix=".plist"}return G(t,e),t.prototype.loadLWFNode=function(e){e._loadLWF=!0,this.loadLWF(e)},t.prototype.loadLWFNodes=function(e,t){var n,r,i;r=0;for(i=e.length;r<i;r++)n=e[r],n._loadLWF=!0;this.loadLWFs(e,t)},t.prototype.newFactory=function(e,t,n){var r;return new p(n,this,t,null!=(r=e.textInSubpixel)?r:!1)},t.prototype.loadLWFData=function(e,t){var n;n=cc.FileUtils.getInstance().getByteArrayFromFile(t),n=_.loadArray(n),this.onloaddata(e,n,t)},t.prototype.onloadLWF=function(e,t){var n,r;null!=e._loadLWF?(r=cc.LWFNode.lwfNodeWithLWF(t),n=e.contentSize,null!=n&&r.setContentSize(n),n=t.rendererFactory,e.fitForHeight?n.fitForHeight(t):e.fitForWidth&&n.fitForWidth(t),delete e._loadLWF,e.onload.call(e,r)):e.onload.call(e,t)},t.prototype.loadJS=function(e,t){e.loadedCount++,this.loadImages(e,t)},t.prototype.onLoadImage=function(){var e,t,n;this.loadedCount++,null!=this.onprogress&&this.onprogress.call(this,this.loadedCount,this.total),this.loadedCount===this.total&&(e=this._cache,t=this._data,n=this._imageCache,delete this._cache,delete this._data,delete this._imageCache,e.newLWF(this,n,t))},t.prototype.loadImages=function(e,t){var n,r,i,s,o,u,a,f,l,c;i=null!=(s=null!=(u=e.imagePrefix)?u:e.prefix)?s:"",s=null!=(n=e.imageSuffix)?n:"",n={},e._cache=this,e._data=t,e._imageCache=n,f=t.textures,u=0;for(a=f.length;u<a;u++)o=f[u],r=o.filename,o=null!=(l=null!=(c=e.imageMap)?c[r]:void 0)?l:r,o.match(/^\//)||(o=i+o),o=o.replace(/(\.png|\.jpg)$/i,s+"$1"),n[r]=o,r=cc.TextureCache.getInstance(),r.addImageAsync(o,e,this.onLoadImage)},t.prototype.unloadLWF=function(e){var n,r;t.__super__.unloadLWF.call(this,e);if(null==this.cache[e.url])for(n in r=e.renderFactory.cache,r)e=r[n],e.match(/\.(png|jpg)$/i)&&cc.TextureCache.getInstance().removeTextureForKey(e)},t.prototype.setParticlePath=function(e,t){this.particlePrefix=e,this.particleSuffix=t},t}(J),"undefined"!=typeof global&&(global.LWF.Cocos2dRendererFactory=p,global.LWF.Cocos2dResourceCache=d,global.LWF.ResourceCache=d,"undefined"!=typeof cc&&(cc.LWF=global.LWF)),p.prototype.convertColor=p.prototype.convertColor,p.prototype.fitForHeight=p.prototype.fitForHeight,p.prototype.fitForWidth=p.prototype.fitForWidth,p.prototype.scaleForHeight=p.prototype.scaleForWidth,p.prototype.scaleForStage=p.prototype.scaleForWidth,p.prototype.setBackgroundColor=p.prototype.setBackgroundColor,d.prototype.clear=d.prototype.clear,d.prototype.getCache=d.prototype.getCache,d.prototype.loadLWF=d.prototype.loadLWF,d.prototype.loadLWFs=d.prototype.loadLWFs,d.prototype.unloadLWF=d.prototype.unloadLWF,d.prototype.setParticleConstructor=d.prototype.setParticleConstructor,d.prototype.setDOMElementConstructor=d.prototype.setDOMElementConstructor,"undefined"!=typeof cc&&null!==cc&&(K=function(e){var t,n;return cc.renderContextType===cc.WEBGL?(t=e.skew0,n=e.skew1):(t=e.skew1,n=e.skew0),cc.AffineTransformMake(e.scaleX,-n,t,-e.scaleY,e.translateX,cc.Director.getInstance().getWinSizeInPixels().height-e.translateY)},cc.LWFBitmap=cc.Sprite.extend({initWithTexture:function(e,t){var n;return n=this._super(e,t),this.setFlippedY(!0),n},setMatrix:function(e){this._transform=K(e),this.setNodeDirty(!0)},nodeToParentTransform:function(){return this._transform}}),cc.LWFBitmap.lwfBitmapWithTexture=function(e,t){var n;return n=new cc.LWFBitmap,n.initWithTexture(e,t)?n:null},cc.LWFLabel=cc.LabelTTF.extend({initWithString:function(e,t,n,r,i,s){return e=this._super(e,t,n,r,i,s),this.setFlippedY(!0),e},setMatrix:function(e){this._transform=K(e),this.setNodeDirty(!0)},nodeToParentTransform:function(){return this._transform}}),cc.LWFLabel.create=function(e,t,n,r,i,s){var o;return o=new cc.LWFLabel,o.initWithString(e,t,n,r,i,s)?o:null},cc.LWFParticle=cc.ParticleSystem.extend({setMatrix:function(e){this._transform=K(e),this.setNodeDirty(!0)},nodeToParentTransform:function(){return this._transform}}),cc.LWFParticle.create=function(e){var t;return t=new cc.LWFParticle,t.initWithFile(e)?t:null},cc.LWFNode=cc.Node.extend({_m_lwf:null,_m_targetedDelegateAdded:!1,initWithLWF:function(e){return this.init(),e.rendererFactory.lwfNode=this,this._m_lwf=e,this.scheduleUpdate(),!0},cleanup:function(){this._m_lwf.destroy(),this._super()},getLWF:function(){return this._m_lwf},update:function(e){this._super(e),this._m_lwf.exec(e),this._m_lwf.render()},onEnter:function(){this._m_lwf.interactive&&(cc.registerTargetedDelegate(0,!0,this),this._m_targetedDelegateAdded=!0),this._super()},onExit:function(){this._m_targetedDelegateAdded&&cc.unregisterTouchDelegate(this),this._super()},onTouchBegan:function(e,t){return this.onTouchMoved(e,t),this._m_lwf.inputPress(),!0},onTouchMoved:function(e,t){var n;n=this.convertTouchToNodeSpace(e),n=cc.Director.getInstance().convertToGL(n),this._m_lwf.inputPoint(n.x,n.y)},onTouchEnded:function(e,t){this.onTouchMoved(e,t),this._m_lwf.inputRelease()}}),cc.LWFNode.lwfNodeWithLWF=function(e){var t;return t=new cc.LWFNode,t.initWithLWF(e)?t:null})}.call(this),function(){var e={REVISION:"10",Tween:function(t){this.lwf=t.lwf,this.object=t,this.valuesStart={},this.valuesEnd={},this.valuesStartRepeat={},this.delayTime=this.repeat=this.duration=0,this.startTime=null,this.easingFunction=e.Easing.Linear.None,this.interpolationFunction=e.Interpolation.Linear,this.chainedTweens=[],this.onStartCallback=null,this.onStartCallbackFired=!1,this.onCompleteCallback=this.onUpdateCallback=null,null===this.lwf._tweens&&(this.lwf._tweens=[],"lwf"===this.lwf._tweenMode?this.lwf.addExecHandler(e._tweenExecHandler):this.lwf.addMovieEventHandler("_root",{enterFrame:e._tweenMovieHandler})),this.to=function(e,t){return void 0!==t&&(this.duration=t*this.lwf.tick),this.valuesEnd=e,this},this.start=function(){this.lwf._tweens.push(this),this.onStartCallbackFired=!1,this.startTime=this.lwf.time,this.startTime+=this.delayTime;for(var e in this.valuesEnd)if(null!==this.object[e]){if(this.valuesEnd[e]instanceof Array){if(0===this.valuesEnd[e].length)continue;this.valuesEnd[e]=[this.object[e]].concat(this.valuesEnd[e])}this.valuesStart[e]=this.object[e],0==this.valuesStart[e]instanceof Array&&(this.valuesStart[e]*=1),this.valuesStartRepeat[e]=this.valuesStart[e]||0}return this},this.stop=function(){var e=this.lwf._tweens.indexOf(this);return-1!==e&&(this.lwf._tweens.splice(e,1),0==this.lwf._tweens.length&&this.lwf.stopTweens()),this},this.delay=function(e){return this.delayTime=e*this.lwf.tick,this},this.repeat=function(e){return this.repeat=e,this},this.easing=function(e){return this.easingFunction=e,this},this.interpolation=function(e){return this.interpolationFunction=e,this},this.chain=function(t){return"undefined"!=typeof t&&null!==t?(this.chainedTweens.push(t),this):(t=new e.Tween(this.object),this.chainedTweens.push(t),t)},this.onStart=function(e){return this.onStartCallback=e,this},this.onUpdate=function(e){return this.onUpdateCallback=e,this},this.onComplete=function(e){return this.onCompleteCallback=e,this},this.update=function(e){if(e<this.startTime)return!0;if(null===this.object.lwf)return!1;!1===this.onStartCallbackFired&&(null!==this.onStartCallback&&this.onStartCallback.call(this.object),this.onStartCallbackFired=!0);var t=(e-this.startTime)/(0<this.duration?this.duration:this.lwf.tick),t=1<t?1:t,n=this.easingFunction(t),r;for(r in this.valuesEnd){var i=this.valuesStart[r]||0,s=this.valuesEnd[r];s instanceof Array?this.object[r]=this.interpolationFunction(s,n):("string"==typeof s&&(s=i+parseFloat(s,10)),this.object[r]=i+(s-i)*n)}null!==this.onUpdateCallback&&this.onUpdateCallback.call(this.object,n);if(1==t){if(0>=this.repeat){null!==this.onCompleteCallback&&this.onCompleteCallback.call(this.object),t=0;for(n=this.chainedTweens.length;t<n;t++)this.chainedTweens[t].start(e);return!1}isFinite(this.repeat)&&this.repeat--;for(r in this.valuesStartRepeat)"string"==typeof this.valuesEnd[r]&&(this.valuesStartRepeat[r]+=parseFloat(this.valuesEnd[r],10)),this.valuesStart[r]=this.valuesStartRepeat[r];this.startTime=e+this.delayTime}return!0},this.to=this.to,this.start=this.start,this.stop=this.stop,this.delay=this.delay,this.easing=this.easing,this.interpolation=this.interpolation,this.chain=this.chain,this.onStart=this.onStart,this.onUpdate=this.onUpdate,this.onComplete=this.onComplete,this.update=this.update},Easing:{Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return 1>(e*=2)?.5*e*e:-0.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:1>(e*=2)?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return 1>(e*=2)?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4)))},Out:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin(2*(e-t)*Math.PI/.4)+1)},InOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),1>(e*=2)?-0.5*n*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4):n*Math.pow(2,-10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4)*.5+1)}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return 1>(e*=2)?.5*e*e*(3.5949095*e-2.5949095):.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}},Bounce:{In:function(t){return 1-e.Easing.Bounce.Out(1-t)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(t){return.5>t?.5*e.Easing.Bounce.In(2*t):.5*e.Easing.Bounce.Out(2*t-1)+.5}}}};e.Interpolation={Linear:function(t,n){var r=t.length-1,i=r*n,s=Math.floor(i),o=e.Interpolation.Utils.Linear;return 0>n?o(t[0],t[1],i):1<n?o(t[r],t[r-1],r-i):o(t[s],t[s+1>r?r:s+1],i-s)},Bezier:function(t,n){var r=0,i=t.length-1,s=Math.pow,o=e.Interpolation.Utils.Bernstein,u;for(u=0;u<=i;u++)r+=s(1-n,i-u)*s(n,u)*t[u]*o(i,u);return r},CatmullRom:function(t,n){var r=t.length-1,i=r*n,s=Math.floor(i),o=e.Interpolation.Utils.CatmullRom;return t[0]===t[r]?(0>n&&(s=Math.floor(i=r*(1+n))),o(t[(s-1+r)%r],t[s],t[(s+1)%r],t[(s+2)%r],i-s)):0>n?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):1<n?t[r]-(o(t[r],t[r],t[r-1],t[r-1],i-r)-t[r]):o(t[s?s-1:0],t[s],t[r<s+1?r:s+1],t[r<s+2?r:s+2],i-s)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(t,n){var r=e.Interpolation.Utils.Factorial;return r(t)/r(n)/r(t-n)},Factorial:function(){var e=[1];return function(t){var n=1,r;if(e[t])return e[t];for(r=t;1<r;r--)n*=r;return e[t]=n}}(),CatmullRom:function(e,t,n,r,i){e=.5*(n-e),r=.5*(r-t);var s=i*i;return(2*t-2*n+e+r)*i*s+(-3*t+3*n-2*e-r)*s+e*i+t}}};var t=global.LWF.LWF.prototype;t.setTweenMode=function(e){this._tweenMode=e},t.stopTweens=function(){null!==this._tweens&&(this._tweens=null,this.removeExecHandler(e._tweenExecHandler),this.removeMovieEventHandler("_root",{enterFrame:e._tweenMovieHandler}))},t.stopTweens=t.stopTweens,e._tweenUpdater=function(){if(null!==this._tweens){for(var e=0,t=this._tweens.length,n=this.time;e<t;)this._tweens[e].update(n)?e++:(this._tweens.splice(e,1),t--);0==this._tweens.length&&this.stopTweens()}},e._tweenExecHandler=function(){e._tweenUpdater.call(this)},e._tweenMovieHandler=function(){e._tweenUpdater.call(this.lwf)},t=global.LWF.Movie.prototype,t.addTween=function(){return new e.Tween(this)},t.stopTweens=function(){if("undefined"==typeof this.lwf||null===this.lwf||null===this.lwf._tweens)return this;for(var e=this.lwf._tweens,t=0,n=e.length;t<n;)e[t].object===this?(e.splice(t,1),n--):t++;return 0==e.length&&this.lwf.stopTweens(),this};var n=global.LWF.BitmapClip.prototype;n.addTween=t.addTween,n.stopTweens=t.stopTweens,global.LWF.Tween=e.Tween,global.LWF.Tween.Easing=e.Easing,t=global.LWF.Tween.Easing,t.Linear=e.Easing.Linear,t.Linear.None=e.Easing.Linear.None,t.Quadratic=e.Easing.Quadratic,t.Quadratic.In=e.Easing.Quadratic.In,t.Quadratic.Out=e.Easing.Quadratic.Out,t.Quadratic.InOut=e.Easing.Quadratic.InOut,t.Cubic=e.Easing.Cubic,t.Cubic.In=e.Easing.Cubic.In,t.Cubic.Out=e.Easing.Cubic.Out,t.Cubic.InOut=e.Easing.Cubic.InOut,t.Quartic=e.Easing.Quartic,t.Quartic.In=e.Easing.Quartic.In,t.Quartic.Out=e.Easing.Quartic.Out,t.Quartic.InOut=e.Easing.Quartic.InOut,t.Quintic=e.Easing.Quintic,t.Quintic.In=e.Easing.Quintic.In,t.Quintic.Out=e.Easing.Quintic.Out,t.Quintic.InOut=e.Easing.Quintic.InOut,t.Sinusoidal=e.Easing.Sinusoidal,t.Sinusoidal.In=e.Easing.Sinusoidal.In,t.Sinusoidal.Out=e.Easing.Sinusoidal.Out,t.Sinusoidal.InOut=e.Easing.Sinusoidal.InOut,t.Exponential=e.Easing.Exponential,t.Exponential.In=e.Easing.Exponential.In,t.Exponential.Out=e.Easing.Exponential.Out,t.Exponential.InOut=e.Easing.Exponential.InOut,t.Circular=e.Easing.Circular,t.Circular.In=e.Easing.Circular.In,t.Circular.Out=e.Easing.Circular.Out,t.Circular.InOut=e.Easing.Circular.InOut,t.Elastic=e.Easing.Elastic,t.Elastic.In=e.Easing.Elastic.In,t.Elastic.Out=e.Easing.Elastic.Out,t.Elastic.InOut=e.Easing.Elastic.InOut,t.Back=e.Easing.Back,t.Back.In=e.Easing.Back.In,t.Back.Out=e.Easing.Back.Out,t.Back.InOut=e.Easing.Back.InOut,t.Bounce=e.Easing.Bounce,t.Bounce.In=e.Easing.Bounce.In,t.Bounce.Out=e.Easing.Bounce.Out,t.Bounce.InOut=e.Easing.Bounce.InOut,global.LWF.Tween.Interpolation=e.Interpolation,t=global.LWF.Tween.Interpolation,t.Linear=e.Interpolation.Linear,t.Bezier=e.Interpolation.Bezier,t.CatmullRom=e.Interpolation.CatmullRom,t.Utils=e.Interpolation.Utils,t.Utils.Linear=e.Interpolation.Utils.Linear,t.Utils.Bernstein=e.Interpolation.Utils.Bernstein,t.Utils.Factorial=e.Interpolation.Utils.Factorial,t.Utils.CatmullRom=e.Interpolation.Utils.CatmullRom}.call(this),function(){var e={Character:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",RangeError:"INVALID_CHARACTER_ERR",btoaArray:{}};e.btoaArray.CharacterTable=function(e){var t=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(e.length),n,r;n=0;for(r=t.length;n<r;++n)t[n]=e.charCodeAt(n);return t}(e.Character),e.atobArray=function(t){for(var n=0,r=0,i=t.length,s,o=0,u=0,a=e.atobArray.DecodeTable,f;"="===t.charAt(i-1);)--i;s=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(3*((i+3)/4|0)-[0,0,2,1][i%4]);if(1===i%4||0<t.length&&0===i)throw Error(e.RangeError);for(;r<i;){f=t.charCodeAt(r++),f=256>f?a[f]:-1;if(-1===f)throw Error(e.RangeError);n=(n<<6)+f,u+=6,8<=u&&(u-=8,f=n>>u,s[o++]=f,n^=f<<u)}return s},e.atobArray.DecodeTable=function(e){var t=new("undefined"!=typeof Int16Array?Int16Array:Array)(256),n=e instanceof Array?e:Array.prototype.slice.call(e);for(e=0;255>e;++e)t[e]=n.indexOf(e);return t}(e.btoaArray.CharacterTable),global.LWF.Base64=e}.call(this),function(){var e,t,n,r,i,s,o,u,a=function(e){var t=[],n;for(n=0;n<e;n++)t[n]=0;return t};"undefined"!=typeof Uint8Array&&(a=function(e){return new Uint8Array(e)}),function(){var i=function(e){this.init(),e&&this.setStream(e)};i.prototype.setStream=function(e){this._stream=e},i.prototype.releaseStream=function(){this._stream=null},i.prototype.init=function(){this.low=this._position=0,this.range=4294967295,this._cacheSize=1,this._cache=0},i.prototype.flushData=function(){var e;for(e=0;5>e;e++)this.shiftLow()},i.prototype.flushStream=function(){this._stream.flush&&this._stream.flush()},i.prototype.shiftLow=function(){var e=4294967295<this.low?1:0;if(4278190080>this.low||e){this._position+=this._cacheSize;var t=this._cache;do this._stream.writeByte(t+e&255),t=255;while(0!==--this._cacheSize);this._cache=this.low>>>24}this._cacheSize++,this.low=256*(this.low&16777215)},i.prototype.encodeDirectBits=function(e,t){var n,r;r=1<<t-1;for(n=t-1;0<=n;n--,r>>>=1)this.range>>>=1,e&r&&(this.low+=this.range),16777215>=this.range&&(this.range*=256,this.shiftLow())},i.prototype.getProcessedSizeAdd=function(){return this._cacheSize+this._position+4},i.initBitModels=function(e,t){var n;t&&!e&&("undefined"!=typeof Uint16Array?e=new Uint16Array(t):(e=[],e.length=t));for(n=0;n<e.length;n++)e[n]=1024;return e},i.prototype.encode=function(e,t,n){var r=e[t],i=(this.range>>>11)*r;0===n?(this.range=i,e[t]=r+(2048-r>>>5)):(this.low+=i,this.range-=i,e[t]=r-(r>>>5)),16777215>=this.range&&(this.range*=256,this.shiftLow())};var s=[];"undefined"!=typeof Uint32Array&&(s=new Uint32Array(512)),function(){var e,t;for(e=8;0<=e;e--){var n=1<<9-e;for(t=1<<9-e-1;t<n;t++)s[t]=(e<<6)+(n-t<<6>>>9-e-1)}}(),i.getPrice=function(e,t){return s[((e-t^-t)&2047)>>>2]},i.getPrice0=function(e){return s[e>>>2]},i.getPrice1=function(e){return s[2048-e>>>2]},i.kNumBitPriceShiftBits=6,e=i;var o=function(e){e&&(this.setStream(e),this.init())};o.prototype.setStream=function(e){this._stream=e},o.prototype.releaseStream=function(){this._stream=null},o.prototype.init=function(){var e=5;this._code=0;for(this._range=-1;e--;)this._code=this._code<<8|this._stream.readByte()},o.prototype.decodeDirectBits=function(e){for(var t=0,n;e--;)this._range>>>=1,n=this._code-this._range>>>31,this._code-=this._range&n-1,t=t<<1|1-n,0===(this._range&4278190080)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return t},o.prototype.decodeBit=function(e,t){var n=e[t],r=(this._range>>>11)*n;return(this._code^2147483648)<(r^2147483648)?(this._range=r,e[t]+=2048-n>>>5,0===(this._range&4278190080)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=r,this._code-=r,e[t]-=n>>>5,0===(this._range&4278190080)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},t=o,o=function(e){this._numBitLevels=e,this.init()},o.prototype.init=function(){this._models=i.initBitModels(null,1<<this._numBitLevels)},o.prototype.encode=function(e,t){var n=1,r;for(r=this._numBitLevels;0<r;){r--;var i=t>>>r&1;e.encode(this._models,n,i),n=n<<1|i}},o.prototype.reverseEncode=function(e,t){var n=1,r;for(r=0;r<this._numBitLevels;r++){var i=t&1;e.encode(this._models,n,i),n=n<<1|i,t>>>=1}},o.reverseEncode=function(e,t,n,r,i){var s=1,o;for(o=0;o<r;o++){var u=i&1;n.encode(e,t+s,u),s=s<<1|u,i>>>=1}},o.prototype.getPrice=function(e){var t=0,n=1,r;for(r=this._numBitLevels;0<r;){r--;var s=e>>>r&1,t=t+i.getPrice(this._models[n],s),n=n<<1|s}return t},o.prototype.reverseGetPrice=function(e){var t=0,n=1,r;for(r=this._numBitLevels;0<r;r--){var s=e&1;e>>>=1,t+=i.getPrice(this._models[n],s),n=n<<1|s}return t},o.reverseGetPrice=function(e,t,n,r){for(var s=0,o=1;0<n;n--){var u=r&1;r>>>=1,s+=i.getPrice(e[t+o],u),o=o<<1|u}return s},n=o,o=function(e){this._numBitLevels=e,this.init()},o.prototype.init=function(){this._models=i.initBitModels(null,1<<this._numBitLevels)},o.prototype.decode=function(e){for(var t=1,n=this._numBitLevels;n--;)t=t<<1|e.decodeBit(this._models,t);return t-(1<<this._numBitLevels)},o.prototype.reverseDecode=function(e){for(var t=1,n=0,r=0,i;r<this._numBitLevels;++r)i=e.decodeBit(this._models,t),t=t<<1|i,n|=i<<r;return n},o.reverseDecode=function(e,t,n,r){for(var i=1,s=0,o=0,u;o<r;++o)u=n.decodeBit(e,t+i),i=i<<1|u,s|=u<<o;return s},r=o}.call(this),function(){function e(){t.call(this),this._cyclicBufferSize=0,this._son=[],this._hash=[],this._cutValue=255,this._hashSizeSum=0,this.HASH_ARRAY=!0,this.kNumHashDirectBytes=0,this.kMinMatchCheck=4,this.kFixHashSize=o+u;if(6<=arguments.length){var e=Array.prototype.slice.call(arguments,0);this.setType(e.shift());var n=e.pop();this.create.apply(this,e),this.setStream(n),this.init()}}var t=function(e,t,n,r){if(4<=arguments.length){var i=Array.prototype.slice.call(arguments,0),s=i.pop();this.create.apply(this,i),this.setStream(s),this.init()}};t.prototype.moveBlock=function(){var e,t=this._bufferOffset+this._pos+this._keepSizeBefore;0<t&&t--;var n=this._bufferOffset+this._streamPos-t;for(e=0;e<n;e++)this._bufferBase[e]=this._bufferBase[t+e];this._bufferOffset-=t},t.prototype.readBlock=function(){if(!this._streamEndWasReached)for(;;){var e=-this._bufferOffset+this._blockSize-this._streamPos;if(0===e)break;e=this._stream.read(this._bufferBase,this._bufferOffset+this._streamPos,e);if(0>=e){this._posLimit=this._streamPos,this._bufferOffset+this._posLimit>this._pointerToLastSafePosition&&(this._posLimit=this._pointerToLastSafePosition-this._bufferOffset),this._streamEndWasReached=!0;break}this._streamPos+=e,this._streamPos>=this._pos+this._keepSizeAfter&&(this._posLimit=this._streamPos-this._keepSizeAfter)}},t.prototype.free=function(){this._bufferBase=null},t.prototype.create=function(e,t,n){this._keepSizeBefore=e,this._keepSizeAfter=t,e=e+t+n,this._bufferBase&&this._blockSize===e||(this.free(),this._blockSize=e,this._bufferBase=a(this._blockSize)),this._pointerToLastSafePosition=this._blockSize-t},t.prototype.setStream=function(e){this._stream=e},t.prototype.releaseStream=function(){this._stream=null},t.prototype.init=function(){this._streamPos=this._pos=this._bufferOffset=0,this._streamEndWasReached=!1,this.readBlock()},t.prototype.movePos=function(){this._pos++,this._pos>this._posLimit&&(this._bufferOffset+this._pos>this._pointerToLastSafePosition&&this.moveBlock(),this.readBlock())},t.prototype.getIndexByte=function(e){return this._bufferBase[this._bufferOffset+this._pos+e]},t.prototype.getMatchLen=function(e,t,n){var r;this._streamEndWasReached&&this._pos+e+n>this._streamPos&&(n=this._streamPos-(this._pos+e)),t++,e=this._bufferOffset+this._pos+e;for(r=0;r<n&&this._bufferBase[e+r]===this._bufferBase[e+r-t];)r++;return r},t.prototype.getNumAvailableBytes=function(){return this._streamPos-this._pos},t.prototype.reduceOffsets=function(e){this._bufferOffset+=e,this._posLimit-=e,this._pos-=e,this._streamPos-=e};var n=function(){this._windowSize=0};n.prototype.create=function(e){this
._buffer&&this._windowSize===e||(this._buffer=a(e)),this._windowSize=e,this._streamPos=this._pos=0},n.prototype.flush=function(){var e=this._pos-this._streamPos;if(0!==e){for(;e--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},n.prototype.releaseStream=function(){this.flush(),this._stream=null},n.prototype.setStream=function(e){this.releaseStream(),this._stream=e},n.prototype.init=function(e){e||(this._pos=this._streamPos=0)},n.prototype.copyBlock=function(e,t){var n=this._pos-e-1;for(0>n&&(n+=this._windowSize);t--;)n>=this._windowSize&&(n=0),this._buffer[this._pos++]=this._buffer[n++],this._pos>=this._windowSize&&this.flush()},n.prototype.putByte=function(e){this._buffer[this._pos++]=e,this._pos>=this._windowSize&&this.flush()},n.prototype.getByte=function(e){return e=this._pos-e-1,0>e&&(e+=this._windowSize),this._buffer[e]},i=n;var r=function(){var e=[];"undefined"!=typeof Uint32Array&&(e=new Uint32Array(256));var t,n,r;for(t=0;256>t;t++){r=t;for(n=0;8>n;n++)r=0!==(r&1)?r>>>1^3988292384:r>>>1;e[t]=r}return e}(),o=1024,u=65536,f=o,l=t.prototype;e.prototype=Object.create(l),e.prototype.setType=function(e){(this.HASH_ARRAY=2<e)?(this.kNumHashDirectBytes=0,this.kMinMatchCheck=4,this.kFixHashSize=o+u):(this.kNumHashDirectBytes=2,this.kMinMatchCheck=3,this.kFixHashSize=0)},e.prototype.init=function(){var e;l.init.call(this);for(e=0;e<this._hashSizeSum;e++)this._hash[e]=0;this._cyclicBufferPos=0,this.reduceOffsets(-1)},e.prototype.movePos=function(){++this._cyclicBufferPos>=this._cyclicBufferSize&&(this._cyclicBufferPos=0),l.movePos.call(this),1073741823===this._pos&&this.normalize()},e.prototype.create=function(e,t,n,r){return 1073741567<e?!1:(this._cutValue=16+(n>>>1),l.create.call(this,e+t,n+r,(e+t+n+r)/2+256),this._matchMaxLen=n,t=e+1,this._cyclicBufferSize!==t&&(this._cyclicBufferSize=t,this._son=[],this._son.length=2*t),t=65536,this.HASH_ARRAY&&(t=e-1,t|=t>>>1,t|=t>>>2,t|=t>>>4,t=(t|t>>>8)>>>1,t|=65535,16777216<t&&(t>>>=1),this._hashMask=t,t++,t+=this.kFixHashSize),t!==this._hashSizeSum&&(this._hashSizeSum=t,this._hash=[],this._hash.length=this._hashSizeSum),!0)},e.prototype.getMatches=function(e){var t;if(this._pos+this._matchMaxLen>this._streamPos){if(t=this._streamPos-this._pos,t<this.kMinMatchCheck)return this.movePos(),0}else t=this._matchMaxLen;var n=0,i=this._pos>this._cyclicBufferSize?this._pos-this._cyclicBufferSize:0,s=this._bufferOffset+this._pos,a=1,l=0,c=0,h=0;if(this.HASH_ARRAY)var p=r[this._bufferBase[s]]^this._bufferBase[s+1],c=p&o-1,p=p^this._bufferBase[s+2]<<8,h=p&u-1,l=(p^r[this._bufferBase[s+3]]<<5)&this._hashMask;else l=this._bufferBase[s]^this._bufferBase[s+1]<<8;p=this._hash[this.kFixHashSize+l];if(this.HASH_ARRAY){var d=this._hash[c],v=this._hash[f+h];this._hash[c]=this._pos,this._hash[f+h]=this._pos,d>i&&this._bufferBase[this._bufferOffset+d]===this._bufferBase[s]&&(e[n++]=a=2,e[n++]=this._pos-d-1),v>i&&this._bufferBase[this._bufferOffset+v]===this._bufferBase[s]&&(v===d&&(n-=2),e[n++]=a=3,e[n++]=this._pos-v-1,d=v),0!==n&&d===p&&(n-=2,a=1)}this._hash[this.kFixHashSize+l]=this._pos,c=(this._cyclicBufferPos<<1)+1,h=this._cyclicBufferPos<<1,l=d=this.kNumHashDirectBytes,0!==this.kNumHashDirectBytes&&p>i&&this._bufferBase[this._bufferOffset+p+this.kNumHashDirectBytes]!==this._bufferBase[s+this.kNumHashDirectBytes]&&(e[n++]=a=this.kNumHashDirectBytes,e[n++]=this._pos-p-1);for(v=this._cutValue;;){if(p<=i||0===v--){this._son[c]=this._son[h]=0;break}var m=this._pos-p,g=(m>this._cyclicBufferPos?this._cyclicBufferPos-m+this._cyclicBufferSize:this._cyclicBufferPos-m)<<1,y=this._bufferOffset+p,b=Math.min(l,d);if(this._bufferBase[y+b]===this._bufferBase[s+b]){for(;++b!==t&&this._bufferBase[y+b]===this._bufferBase[s+b];);if(a<b&&(e[n++]=a=b,e[n++]=m-1,b===t)){this._son[h]=this._son[g],this._son[c]=this._son[g+1];break}}this._bufferBase[y+b]<this._bufferBase[s+b]?(this._son[h]=p,h=g+1,p=this._son[h],d=b):(this._son[c]=p,c=g,p=this._son[c],l=b)}return this.movePos(),n},e.prototype.skip=function(e){var t,n,i,s,a,l,c,h,p,d,v,m;do{if(this._pos+this._matchMaxLen>this._streamPos){if(t=this._streamPos-this._pos,t<this.kMinMatchCheck){this.movePos();continue}}else t=this._matchMaxLen;n=this._pos>this._cyclicBufferSize?this._pos-this._cyclicBufferSize:0,i=this._bufferOffset+this._pos,this.HASH_ARRAY?(s=r[this._bufferBase[i]]^this._bufferBase[i+1],a=s&o-1,this._hash[a]=this._pos,s^=this._bufferBase[i+2]<<8,a=s&u-1,this._hash[f+a]=this._pos,a=(s^r[this._bufferBase[i+3]]<<5)&this._hashMask):a=this._bufferBase[i]^this._bufferBase[i+1]<<8,s=this._hash[this.kFixHashSize+a],this._hash[this.kFixHashSize+a]=this._pos,a=(this._cyclicBufferPos<<1)+1,l=this._cyclicBufferPos<<1,c=h=this.kNumHashDirectBytes;for(p=this._cutValue;;){if(s<=n||0===p--){this._son[a]=this._son[l]=0;break}d=this._pos-s,d=(d>this._cyclicBufferPos?this._cyclicBufferPos-d+this._cyclicBufferSize:this._cyclicBufferPos-d)<<1,v=this._bufferOffset+s,m=c<h?c:h;if(this._bufferBase[v+m]===this._bufferBase[i+m]){for(;++m!==t&&this._bufferBase[v+m]===this._bufferBase[i+m];);if(m===t){this._son[l]=this._son[d],this._son[a]=this._son[d+1];break}}this._bufferBase[v+m]<this._bufferBase[i+m]?(this._son[l]=s,l=d+1,s=this._son[l],h=m):(this._son[a]=s,a=d,s=this._son[a],c=m)}this.movePos()}while(0!==--e)},e.prototype.normalizeLinks=function(e,t,n){var r,i;for(r=0;r<t;r++)i=e[r],i=i>n?i-n:0,e[r]=i},e.prototype.normalize=function(){var e=this._pos-this._cyclicBufferSize;this.normalizeLinks(this._son,2*this._cyclicBufferSize,e),this.normalizeLinks(this._hash,this._hashSizeSum,e),this.reduceOffsets(e)},e.prototype.setCutValue=function(e){this._cutValue=e},s=e}.call(this),function(){var f=Object.create(null);f.kNumRepDistances=4,f.kNumStates=12,f.stateInit=function(){return 0},f.stateUpdateChar=function(e){return 4>e?0:10>e?e-3:e-6},f.stateUpdateMatch=function(e){return 7>e?7:10},f.stateUpdateRep=function(e){return 7>e?8:11},f.stateUpdateShortRep=function(e){return 7>e?9:11},f.stateIsCharState=function(e){return 7>e},f.kNumPosSlotBits=6,f.kDicLogSizeMin=0,f.kNumLenToPosStatesBits=2,f.kNumLenToPosStates=1<<f.kNumLenToPosStatesBits,f.kMatchMinLen=2,f.getLenToPosState=function(e){return e-=f.kMatchMinLen,e<f.kNumLenToPosStates?e:f.kNumLenToPosStates-1},f.kNumAlignBits=4,f.kAlignTableSize=1<<f.kNumAlignBits,f.kAlignMask=f.kAlignTableSize-1,f.kStartPosModelIndex=4,f.kEndPosModelIndex=14,f.kNumPosModels=f.kEndPosModelIndex-f.kStartPosModelIndex,f.kNumFullDistances=1<<f.kEndPosModelIndex/2,f.kNumLitPosStatesBitsEncodingMax=4,f.kNumLitContextBitsMax=8,f.kNumPosStatesBitsMax=4,f.kNumPosStatesMax=1<<f.kNumPosStatesBitsMax,f.kNumPosStatesBitsEncodingMax=4,f.kNumPosStatesEncodingMax=1<<f.kNumPosStatesBitsEncodingMax,f.kNumLowLenBits=3,f.kNumMidLenBits=3,f.kNumHighLenBits=8,f.kNumLowLenSymbols=1<<f.kNumLowLenBits,f.kNumMidLenSymbols=1<<f.kNumMidLenBits,f.kNumLenSymbols=f.kNumLowLenSymbols+f.kNumMidLenSymbols+(1<<f.kNumHighLenBits),f.kMatchMaxLen=f.kMatchMinLen+f.kNumLenSymbols-1;var l=e.initBitModels,c=function(){var e=a(2048),t=2,n;e[0]=0,e[1]=1;for(n=2;22>n;n++){var r,i=1<<(n>>1)-1;for(r=0;r<i;r++,t++)e[t]=n}return e}(),h=function(e){return 2048>e?c[e]:2097152>e?c[e>>>10]+20:c[e>>>20]+40},p=function(){var t;this._state=f.stateInit(),this._previousByte=0,this._repDistances=[],this._repDistances.length=f.kNumRepDistances,this._optimum=[],this._matchFinder=null,this._rangeEncoder=new e,this._isMatch=l(null,f.kNumStates<<f.kNumPosStatesBitsMax),this._isRep=l(null,f.kNumStates),this._isRepG0=l(null,f.kNumStates),this._isRepG1=l(null,f.kNumStates),this._isRepG2=l(null,f.kNumStates),this._isRep0Long=l(null,f.kNumStates<<f.kNumPosStatesBitsMax),this._posSlotEncoder=[],this._posEncoders=l(null,f.kNumFullDistances-f.kEndPosModelIndex),this._posAlignEncoder=new n(f.kNumAlignBits),this._lenEncoder=new p.LenPriceTableEncoder,this._repMatchLenEncoder=new p.LenPriceTableEncoder,this._literalEncoder=new p.LiteralEncoder,this._matchDistances=[],this._matchDistances.length=2*f.kMatchMaxLen+2;for(t=0;t<this._matchDistances.length;t++)this._matchDistances[t]=0;this._numFastBytes=32,this._optimumCurrentIndex=this._optimumEndIndex=this._additionalOffset=this._numDistancePairs=this._longestMatchLength=0,this._longestMatchWasFound=!1,this._posSlotPrices=[],this._distancesPrices=[],this._alignPrices=[],this._alignPriceCount=0,this._distTableSize=44,this._posStateBits=2,this._posStateMask=3,this._numLiteralPosStateBits=0,this._numLiteralContextBits=3,this._dictionarySize=4194304,this._numFastBytesPrev=this._dictionarySizePrev=4294967295,this.nowPos64=0,this._finished=!1,this._inStream=null,this._matchFinderType=1,this._needReleaseMFStream=this._writeEndMark=!1,this.reps=[],this.repLens=[];for(t=this.backRes=0;4096>t;t++)this._optimum[t]=new p.Optimal;for(t=0;t<f.kNumLenToPosStates;t++)this._posSlotEncoder[t]=new n(f.kNumPosSlotBits);this._matchPriceCount=0,this.processedInSize=[0],this.processedOutSize=[0],this.finished=[!1]};p.prototype.baseInit=function(){var e;this._state=f.stateInit();for(e=this._previousByte=0;e<f.kNumRepDistances;e++)this._repDistances[e]=0};var d=p.LiteralEncoder=function(){this._coders=null,this._numPosBits=this._numPrevBits=-1,this._posMask=0};d.Encoder2=function(){this._encoders=l(null,768)},d.Encoder2.prototype.init=function(){l(this._encoders)},d.Encoder2.prototype.encode=function(e,t){var n=1,r;for(r=7;0<=r;r--){var i=t>>>r&1;e.encode(this._encoders,n,i),n=n<<1|i}},d.Encoder2.prototype.encodeMatched=function(e,t,n){var r=1,i=!0,s;for(s=7;0<=s;s--){var o=n>>s&1,u=r;i&&(i=t>>>s&1,u+=1+i<<8,i=i===o),e.encode(this._encoders,u,o),r=r<<1|o}},d.Encoder2.prototype.getPrice=function(t,n,r){var i=0,s=1,o=7,u;if(t)for(;0<=o;o--)if(u=n>>>o&1,t=r>>>o&1,i+=e.getPrice(this._encoders[(1+u<<8)+s],t),s=s<<1|t,u!==t){o--;break}for(;0<=o;o--)t=r>>>o&1,i+=e.getPrice(this._encoders[s],t),s=s<<1|t;return i},d.prototype.create=function(e,t){var n;if(!this._coders||this._numPrevBits!==t||this._numPosBits!==e){this._numPosBits=e,this._posMask=(1<<e)-1,this._numPrevBits=t;var r=1<<this._numPrevBits+this._numPosBits;this._coders=[];for(n=0;n<r;n++)this._coders[n]=new d.Encoder2}},d.prototype.init=function(){var e=1<<this._numPrevBits+this._numPosBits,t;for(t=0;t<e;t++)this._coders[t].init()},d.prototype.getSubCoder=function(e,t){return this._coders[((e&this._posMask)<<this._numPrevBits)+(t>>8-this._numPrevBits)]};var v=p.LenEncoder=function(){var e;this._choice=l(null,2),this._lowCoder=[],this._midCoder=[],this._highCoder=new n(f.kNumHighLenBits);for(e=0;e<f.kNumPosStatesEncodingMax;e++)this._lowCoder[e]=new n(f.kNumLowLenBits),this._midCoder[e]=new n(f.kNumMidLenBits)};v.prototype.init=function(e){var t;l(this._choice);for(t=0;t<e;t++)this._lowCoder[t].init(),this._midCoder[t].init();this._highCoder.init()},v.prototype.encode=function(e,t,n){t<f.kNumLowLenSymbols?(e.encode(this._choice,0,0),this._lowCoder[n].encode(e,t)):(t-=f.kNumLowLenSymbols,e.encode(this._choice,0,1),t<f.kNumMidLenSymbols?(e.encode(this._choice,1,0),this._midCoder[n].encode(e,t)):(e.encode(this._choice,1,1),this._highCoder.encode(e,t-f.kNumMidLenSymbols)))},v.prototype.setPrices=function(t,n,r,i){var s=e.getPrice0(this._choice[0]),o=e.getPrice1(this._choice[0]),u=o+e.getPrice0(this._choice[1]),o=o+e.getPrice1(this._choice[1]),a;for(a=0;a<f.kNumLowLenSymbols;a++){if(a>=n)return;r[i+a]=s+this._lowCoder[t].getPrice(a)}for(;a<f.kNumLowLenSymbols+f.kNumMidLenSymbols;a++){if(a>=n)return;r[i+a]=u+this._midCoder[t].getPrice(a-f.kNumLowLenSymbols)}for(;a<n;a++)r[i+a]=o+this._highCoder.getPrice(a-f.kNumLowLenSymbols-f.kNumMidLenSymbols)};var m=p.LenPriceTableEncoder=function(){v.call(this),this._prices=[],this._counters=[],this._tableSize=0};m.prototype=Object.create(v.prototype),m.prototype.setTableSize=function(e){this._tableSize=e},m.prototype.getPrice=function(e,t){return this._prices[t*f.kNumLenSymbols+e]},m.prototype.updateTable=function(e){this.setPrices(e,this._tableSize,this._prices,e*f.kNumLenSymbols),this._counters[e]=this._tableSize},m.prototype.updateTables=function(e){var t;for(t=0;t<e;t++)this.updateTable(t)},m.prototype.encode=function(e){return function(t,n,r){e.call(this,t,n,r),0===--this._counters[r]&&this.updateTable(r)}}(m.prototype.encode),m=p.Optimal=function(){this.state=0,this.prev2=this.prev1IsChar=!1,this.backs3=this.backs2=this.backs1=this.backs0=this.backPrev=this.posPrev=this.price=this.backPrev2=this.posPrev2=0},m.prototype.makeAsChar=function(){this.backPrev=-1,this.prev1IsChar=!1},m.prototype.makeAsShortRep=function(){this.backPrev=0,this.prev1IsChar=!1},m.prototype.isShortRep=function(){return 0===this.backPrev},p.prototype.create=function(){var e;if(!this._matchFinder){var t=new s;e=4,0===this._matchFinderType&&(e=2),t.setType(e),this._matchFinder=t}this._literalEncoder.create(this._numLiteralPosStateBits,this._numLiteralContextBits);if(this._dictionarySize!==this._dictionarySizePrev||this._numFastBytesPrev!==this._numFastBytes)this._matchFinder.create(this._dictionarySize,4096,this._numFastBytes,f.kMatchMaxLen+1),this._dictionarySizePrev=this._dictionarySize,this._numFastBytesPrev=this._numFastBytes},p.prototype.setWriteEndMarkerMode=function(e){this._writeEndMark=e},p.prototype.init=function(){var e;this.baseInit(),this._rangeEncoder.init(),l(this._isMatch),l(this._isRep0Long),l(this._isRep),l(this._isRepG0),l(this._isRepG1),l(this._isRepG2),l(this._posEncoders),this._literalEncoder.init();for(e=0;e<f.kNumLenToPosStates;e++)this._posSlotEncoder[e].init();this._lenEncoder.init(1<<this._posStateBits),this._repMatchLenEncoder.init(1<<this._posStateBits),this._posAlignEncoder.init(),this._longestMatchWasFound=!1,this._additionalOffset=this._optimumCurrentIndex=this._optimumEndIndex=0},p.prototype.readMatchDistances=function(){var e=0;return this._numDistancePairs=this._matchFinder.getMatches(this._matchDistances),0<this._numDistancePairs&&(e=this._matchDistances[this._numDistancePairs-2],e===this._numFastBytes&&(e+=this._matchFinder.getMatchLen(e-1,this._matchDistances[this._numDistancePairs-1],f.kMatchMaxLen-e))),this._additionalOffset++,e},p.prototype.movePos=function(e){0<e&&(this._matchFinder.skip(e),this._additionalOffset+=e)},p.prototype.getRepLen1Price=function(t,n){return e.getPrice0(this._isRepG0[t])+e.getPrice0(this._isRep0Long[(t<<f.kNumPosStatesBitsMax)+n])},p.prototype.getPureRepPrice=function(t,n,r){var i;return 0===t?(i=e.getPrice0(this._isRepG0[n]),i+=e.getPrice1(this._isRep0Long[(n<<f.kNumPosStatesBitsMax)+r])):(i=e.getPrice1(this._isRepG0[n]),1===t?i+=e.getPrice0(this._isRepG1[n]):(i+=e.getPrice1(this._isRepG1[n]),i+=e.getPrice(this._isRepG2[n],t-2))),i},p.prototype.getRepPrice=function(e,t,n,r){return this._repMatchLenEncoder.getPrice(t-f.kMatchMinLen,r)+this.getPureRepPrice(e,n,r)},p.prototype.getPosLenPrice=function(e,t,n){var r=f.getLenToPosState(t);if(e<f.kNumFullDistances)e=this._distancesPrices[r*f.kNumFullDistances+e];else{var i=this._posSlotPrices,r=r<<f.kNumPosSlotBits,s;s=131072>e?c[e>>>6]+12:134217728>e?c[e>>>16]+32:c[e>>>26]+52,e=i[r+s]+this._alignPrices[e&f.kAlignMask]}return e+this._lenEncoder.getPrice(t-f.kMatchMinLen,n)},p.prototype.backward=function(e){this._optimumEndIndex=e;var t=this._optimum[e].posPrev,n=this._optimum[e].backPrev;do{this._optimum[e].prev1IsChar&&(this._optimum[t].makeAsChar(),this._optimum[t].posPrev=t-1,this._optimum[e].prev2&&(this._optimum[t-1].prev1IsChar=!1,this._optimum[t-1].posPrev=this._optimum[e].posPrev2,this._optimum[t-1].backPrev=this._optimum[e].backPrev2));var r=t,i=n,n=this._optimum[r].backPrev,t=this._optimum[r].posPrev;this._optimum[r].backPrev=i,this._optimum[r].posPrev=e,e=r}while(0<e);return this.backRes=this._optimum[0].backPrev,this._optimumCurrentIndex=this._optimum[0].posPrev},p.prototype.getOptimum=function(t){if(this._optimumEndIndex!==this._optimumCurrentIndex)return t=this._optimum[this._optimumCurrentIndex].posPrev-this._optimumCurrentIndex,this.backRes=this._optimum[this._optimumCurrentIndex].backPrev,this._optimumCurrentIndex=this._optimum[this._optimumCurrentIndex].posPrev,t;this._optimumCurrentIndex=this._optimumEndIndex=0;var n;this._longestMatchWasFound?(n=this._longestMatchLength,this._longestMatchWasFound=!1):n=this.readMatchDistances();var r=this._numDistancePairs,i=this._matchFinder.getNumAvailableBytes()+1;if(2>i)return this.backRes=-1,1;var s=0,o;for(o=0;o<f.kNumRepDistances;o++)this.reps[o]=this._repDistances[o],this.repLens[o]=this._matchFinder.getMatchLen(-1,this.reps[o],f.kMatchMaxLen),this.repLens[o]>this.repLens[s]&&(s=o);if(this.repLens[s]>=this._numFastBytes)return this.backRes=s,t=this.repLens[s],this.movePos(t-1),t;if(n>=this._numFastBytes)return this.backRes=this._matchDistances[r-1]+f.kNumRepDistances,this.movePos(n-1),n;var u=this._matchFinder.getIndexByte(-1),a=this._matchFinder.getIndexByte(-this._repDistances[0]-2);if(2>n&&u!==a&&2>this.repLens[s])return this.backRes=-1,1;this._optimum[0].state=this._state;var l=t&this._posStateMask;this._optimum[1].price=e.getPrice0(this._isMatch[(this._state<<f.kNumPosStatesBitsMax)+l])+this._literalEncoder.getSubCoder(t,this._previousByte).getPrice(!f.stateIsCharState(this._state),a,u),this._optimum[1].makeAsChar();var c=e.getPrice1(this._isMatch[(this._state<<f.kNumPosStatesBitsMax)+l]),h=c+e.getPrice1(this._isRep[this._state]);a===u&&(o=h+this.getRepLen1Price(this._state,l),o<this._optimum[1].price&&(this._optimum[1].price=o,this._optimum[1].makeAsShortRep())),s=n<this.repLens[s]?this.repLens[s]:n;if(2>s)return this.backRes=this._optimum[1].backPrev,1;this._optimum[1].posPrev=0,this._optimum[0].backs0=this.reps[0],this._optimum[0].backs1=this.reps[1],this._optimum[0].backs2=this.reps[2],this._optimum[0].backs3=this.reps[3],o=s;do this._optimum[o--].price=268435455;while(2<=o);for(o=0;o<f.kNumRepDistances;o++){var p=this.repLens[o];if(2<=p){var d=h+this.getPureRepPrice(o,this._state,l);do{var i=d+this._repMatchLenEncoder.getPrice(p-2,l),v=this._optimum[p];i<v.price&&(v.price=i,v.posPrev=0,v.backPrev=o,v.prev1IsChar=!1)}while(2<=--p)}}c+=e.getPrice0(this._isRep[this._state]),o=2>this.repLens[0]?2:this.repLens[0]+1;if(o<=n){for(n=0;o>this._matchDistances[n];)n+=2;for(;p=this._matchDistances[n+1],h=c+this.getPosLenPrice(p,o,l),d=this._optimum[o],h<d.price&&(d.price=h,d.posPrev=0,d.backPrev=p+f.kNumRepDistances,d.prev1IsChar=!1),o!==this._matchDistances[n]||(n+=2,n!==r);o++);}for(n=0;;){n++;if(n===s)return this.backward(n);d=this.readMatchDistances(),r=this._numDistancePairs;if(d>=this._numFastBytes)return this._longestMatchLength=d,this._longestMatchWasFound=!0,this.backward(n);t++,p=this._optimum[n].posPrev,this._optimum[n].prev1IsChar?(p--,this._optimum[n].prev2?(o=this._optimum[this._optimum[n].posPrev2].state,o=this._optimum[n].backPrev2<f.kNumRepDistances?f.stateUpdateRep(o):f.stateUpdateMatch(o)):o=this._optimum[p].state,o=f.stateUpdateChar(o)):o=this._optimum[p].state,p===n-1?o=this._optimum[n].isShortRep()?f.stateUpdateShortRep(o):f.stateUpdateChar(o):(this._optimum[n].prev1IsChar&&this._optimum[n].prev2?(p=this._optimum[n].posPrev2,l=this._optimum[n].backPrev2,o=f.stateUpdateRep(o)):(l=this._optimum[n].backPrev,o=l<f.kNumRepDistances?f.stateUpdateRep(o):f.stateUpdateMatch(o)),p=this._optimum[p],l<f.kNumRepDistances?0===l?(this.reps[0]=p.backs0,this.reps[1]=p.backs1,this.reps[2]=p.backs2,this.reps[3]=p.backs3):1===l?(this.reps[0]=p.backs1,this.reps[1]=p.backs0,this.reps[2]=p.backs2,this.reps[3]=p.backs3):2===l?(this.reps[0]=p.backs2,this.reps[1]=p.backs0,this.reps[2]=p.backs1,this.reps[3]=p.backs3):(this.reps[0]=p.backs3,this.reps[1]=p.backs0,this.reps[2]=p.backs1,this.reps[3]=p.backs2):(this.reps[0]=l-f.kNumRepDistances,this.reps[1]=p.backs0,this.reps[2]=p.backs1,this.reps[3]=p.backs2)),this._optimum[n].state=o,this._optimum[n].backs0=this.reps[0],this._optimum[n].backs1=this.reps[1],this._optimum[n].backs2=this.reps[2],this._optimum[n].backs3=this.reps[3];var c=this._optimum[n].price,u=this._matchFinder.getIndexByte(-1),a=this._matchFinder.getIndexByte(-this.reps[0]-2),l=t&this._posStateMask,v=c+e.getPrice0(this._isMatch[(o<<f.kNumPosStatesBitsMax)+l])+this._literalEncoder.getSubCoder(t,this._matchFinder.getIndexByte(-2)).getPrice(!f.stateIsCharState(o),a,u),p=this._optimum[n+1],m=!1;v<p.price&&(p.price=v,p.posPrev=n,p.makeAsChar(),m=!0),c+=e.getPrice1(this._isMatch[(o<<f.kNumPosStatesBitsMax)+l]),h=c+e.getPrice1(this._isRep[o]),a!==u||p.posPrev<n&&0===p.backPrev||(i=h+this.getRepLen1Price(o,l),i<=p.price&&(p.price=i,p.posPrev=n,p.makeAsShortRep(),m=!0)),p=this._matchFinder.getNumAvailableBytes()+1,i=p=Math.min(4095-n,p);if(2<=i){i>this._numFastBytes&&(i=this._numFastBytes);if(!m&&a!==u&&(u=Math.min(p-1,this._numFastBytes),u=this._matchFinder.getMatchLen(0,this.reps[0],u),2<=u)){for(var a=f.stateUpdateChar(o),m=t+1&this._posStateMask,g=v+e.getPrice1(this._isMatch[(a<<f.kNumPosStatesBitsMax)+m])+e.getPrice1(this._isRep[a]),v=n+1+u;s<v;)this._optimum[++s].price=268435455;u=g+this.getRepPrice(0,u,a,m),v=this._optimum[v],u<v.price&&(v.price=u,v.posPrev=n+1,v.backPrev=0,v.prev1IsChar=!0,v.prev2=!1)}v=2;for(u=0;u<f.kNumRepDistances;u++)if(a=this._matchFinder.getMatchLen(-1,this.reps[u],i),2<=a){m=a;do{for(;s<n+a;)this._optimum[++s].price=268435455;var g=h+this.getRepPrice(u,a,o,l),y=this._optimum[n+a];g<y.price&&(y.price=g,y.posPrev=n,y.backPrev=u,y.prev1IsChar=!1)}while(2<=--a);a=m,0===u&&(v=a+1);if(a<p&&(m=Math.min(p-1-a,this._numFastBytes),m=this._matchFinder.getMatchLen(a,this.reps[u],m),2<=m)){for(var g=f.stateUpdateRep(o),y=t+a&this._posStateMask,b=h+this.getRepPrice(u,a,o,l)+e.getPrice0(this._isMatch[(g<<f.kNumPosStatesBitsMax)+y])+this._literalEncoder.getSubCoder(t+a,this._matchFinder.getIndexByte(a-2)).getPrice(!0,this._matchFinder.getIndexByte(a-1-(this.reps[u]+1)),this._matchFinder.getIndexByte(a-1)),g=f.stateUpdateChar(g),y=t+a+1&this._posStateMask,w=b+e.getPrice1(this._isMatch[(g<<f.kNumPosStatesBitsMax)+y])+e.getPrice1(this._isRep[g]),b=a+1+m;s<n+b;)this._optimum[++s].price=268435455;m=w+this.getRepPrice(0,m,g,y),g=this._optimum[n+b],m<g.price&&(g.price=m,g.posPrev=n+a+1,g.backPrev=0,g.prev1IsChar=!0,g.prev2=!0,g.posPrev2=n,g.backPrev2=u)}}if(d>i){d=i;for(r=0;d>this._matchDistances[r];)r+=2;this._matchDistances[r]=d,r+=2}if(d>=v){for(c+=e.getPrice0(this._isRep[o]);s<n+d;)this._optimum[++s].price=268435455;for(h=0;v>this._matchDistances[h];)h+=2;for(d=v;;d++)if(i=this._matchDistances[h+1],m=c+this.getPosLenPrice(i,d,l),v=this._optimum[n+d],m<v.price&&(v.price=m,v.posPrev=n,v.backPrev=i+f.kNumRepDistances,v.prev1IsChar=!1),d===this._matchDistances[h]){if(d<p&&(v=Math.min(p-1-d,this._numFastBytes),v=this._matchFinder.getMatchLen(d,i,v),2<=v)){u=f.stateUpdateMatch(o),a=t+d&this._posStateMask,m=m+e.getPrice0(this._isMatch[(u<<f.kNumPosStatesBitsMax)+a])+this._literalEncoder.getSubCoder(t+d,this._matchFinder.getIndexByte(d-2)).getPrice(!0,this._matchFinder.getIndexByte(d-(i+1)-1),this._matchFinder.getIndexByte(d-1)),u=f.stateUpdateChar(u),a=t+d+1&this._posStateMask,g=m+e.getPrice1(this._isMatch[(u<<f.kNumPosStatesBitsMax)+a])+e.getPrice1(this._isRep[u]);for(m=d+1+v;s<n+m;)this._optimum[++s].price=268435455;v=g+this.getRepPrice(0,v,u,a),u=this._optimum[n+m],v<u.price&&(u.price=v,u.posPrev=n+d+1,u.backPrev=0,u.prev1IsChar=!0,u.prev2=!0,u.posPrev2=n,u.backPrev2=i+f.kNumRepDistances)}h+=2;if(h===r)break}}}}},p.prototype.changePair=function(e,t){return 33554432>e&&t>=e<<7},p.prototype.writeEndMarker=function(e){if(this._writeEndMark){this._rangeEncoder.encode(this._isMatch,(this._state<<f.kNumPosStatesBitsMax)+e,1),this._rangeEncoder.encode(this._isRep,this._state,0),this._state=f.stateUpdateMatch(this._state);var t=f.kMatchMinLen;this._lenEncoder.encode(this._rangeEncoder,t-f.kMatchMinLen,e),e=(1<<f.kNumPosSlotBits)-1,t=f.getLenToPosState(t),this._posSlotEncoder[t].encode(this._rangeEncoder,e),this._rangeEncoder.encodeDirectBits(1073741823>>f.kNumAlignBits,30-f.kNumAlignBits),this._posAlignEncoder.reverseEncode(this._rangeEncoder,1073741823&f.kAlignMask)}},p.prototype.flush=function(e){this.releaseMFStream(),this.writeEndMarker(e&this._posStateMask),this._rangeEncoder.flushData(),this._rangeEncoder.flushStream()},p.prototype.codeOneBlock=function(e,t,r){e[0]=0,t[0]=0,r[0]=!0,this._inStream&&(this._matchFinder.setStream(this._inStream),this._matchFinder.init(),this._needReleaseMFStream=!0,this._inStream=null);if(!this._finished){this._finished=!0;var i=this.nowPos64,s,o;if(0===this.nowPos64){if(0===this._matchFinder.getNumAvailableBytes()){this.flush(this.nowPos64);return}this.readMatchDistances(),s=this.nowPos64&this._posStateMask,this._rangeEncoder.encode(this._isMatch,(this._state<<f.kNumPosStatesBitsMax)+s,0),this._state=f.stateUpdateChar(this._state),o=this._matchFinder.getIndexByte(0-this._additionalOffset),this._literalEncoder.getSubCoder(this.nowPos64,this._previousByte).encode(this._rangeEncoder,o),this._previousByte=o,this._additionalOffset--,this.nowPos64++}if(0===this._matchFinder.getNumAvailableBytes())this.flush(this.nowPos64);else for(;;){var u=this.getOptimum(this.nowPos64);o=this.backRes,s=this.nowPos64&this._posStateMask;var a=(this._state<<f.kNumPosStatesBitsMax)+s;if(1===u&&-1===o)this._rangeEncoder.encode(this._isMatch,a,0),o=this._matchFinder.getIndexByte(-this._additionalOffset),s=this._literalEncoder.getSubCoder(this.nowPos64,this._previousByte),f.stateIsCharState(this._state)?s.encode(this._rangeEncoder,o):(a=this._matchFinder.getIndexByte(-this._repDistances[0]-1-this._additionalOffset),s.encodeMatched(this._rangeEncoder,a,o)),this._previousByte=o,this._state=f.stateUpdateChar(this._state);else{this._rangeEncoder.encode(this._isMatch,a,1);if(o<f.kNumRepDistances){if(this._rangeEncoder.encode(this._isRep,this._state,1),0===o?(this._rangeEncoder.encode(this._isRepG0,this._state,0),1===u?this._rangeEncoder.encode(this._isRep0Long,a,0):this._rangeEncoder.encode(this._isRep0Long,a,1)):(this._rangeEncoder.encode(this._isRepG0,this._state,1),1===o?this._rangeEncoder.encode(this._isRepG1,this._state,0):(this._rangeEncoder.encode(this._isRepG1,this._state,1),this._rangeEncoder.encode(this._isRepG2,this._state,o-2))),1===u?this._state=f.stateUpdateShortRep(this._state):(this._repMatchLenEncoder.encode(this._rangeEncoder,u-f.kMatchMinLen,s),this._state=f.stateUpdateRep(this._state)),s=this._repDistances[o],0!==o){for(;1<=o;o--)this._repDistances[o]=this._repDistances[o-1];this._repDistances[0]=s}}else{this._rangeEncoder.encode(this._isRep,this._state,0),this._state=f.stateUpdateMatch(this._state),this._lenEncoder.encode(this._rangeEncoder,u-f.kMatchMinLen,s),o-=f.kNumRepDistances,s=h(o),a=f.getLenToPosState(u),this._posSlotEncoder[a].encode(this._rangeEncoder,s);if(s>=f.kStartPosModelIndex){var a=(s>>>1)-1,l=(2|s&1)<<a,c=o-l;s<f.kEndPosModelIndex?n.reverseEncode(this._posEncoders,l-s-1,this._rangeEncoder,a,c):(this._rangeEncoder.encodeDirectBits(c>>f.kNumAlignBits,a-f.kNumAlignBits),this._posAlignEncoder.reverseEncode(this._rangeEncoder,c&f.kAlignMask),this._alignPriceCount++)}s=o;for(o=f.kNumRepDistances-1;1<=o;o--)this._repDistances[o]=this._repDistances[o-1];this._repDistances[0]=s,this._matchPriceCount++}this._previousByte=this._matchFinder.getIndexByte(u-1-this._additionalOffset)}this._additionalOffset-=u,this.nowPos64+=u;if(0===this._additionalOffset){128<=this._matchPriceCount&&this.fillDistancesPrices(),this._alignPriceCount>=f.kAlignTableSize&&this.fillAlignPrices(),e[0]=this.nowPos64,t[0]=this._rangeEncoder.getProcessedSizeAdd();if(0===this._matchFinder.getNumAvailableBytes()){this.flush(this.nowPos64);break}if(4096<=this.nowPos64-i){this._finished=!1,r[0]=!1;break}}}}},p.prototype.releaseMFStream=function(){this._matchFinder&&this._needReleaseMFStream&&(this._matchFinder.releaseStream(),this._needReleaseMFStream=!1)},p.prototype.setOutStream=function(e){this._rangeEncoder.setStream(e)},p.prototype.releaseOutStream=function(){this._rangeEncoder.releaseStream()},p.prototype.releaseStreams=function(){this.releaseMFStream(),this.releaseOutStream()},p.prototype.setStreams=function(e,t,n,r){this._inStream=e,this._finished=!1,this.create(),this.setOutStream(t),this.init(),this.fillDistancesPrices(),this.fillAlignPrices(),this._lenEncoder.setTableSize(this._numFastBytes+1-f.kMatchMinLen),this._lenEncoder.updateTables(1<<this._posStateBits),this._repMatchLenEncoder.setTableSize(this._numFastBytes+1-f.kMatchMinLen),this._repMatchLenEncoder.updateTables(1<<this._posStateBits),this.nowPos64=0},p.prototype.code=function(e,t,n,r,i){this._needReleaseMFStream=!1;try{for(this.setStreams(e,t,n,r);;){this.codeOneBlock(this.processedInSize,this.processedOutSize,this.finished);if(this.finished[0])break;i&&i.setProgress(this.processedInSize[0],this.processedOutSize[0])}}finally{this.releaseStreams()}},p.prototype.writeCoderProperties=function(e){var t=a(5),n;t[0]=9*(5*this._posStateBits+this._numLiteralPosStateBits)+this._numLiteralContextBits;for(n=0;4>n;n++)t[1+n]=this._dictionarySize>>>8*n;for(n=0;5>n;n++)e.writeByte(t[n])},p.prototype.fillDistancesPrices=function(){var t=[];t.length=f.kNumFullDistances;var r,i;for(r=f.kStartPosModelIndex;r<f.kNumFullDistances;r++){i=h(r);var s=(i>>>1)-1,o=(2|i&1)<<s;t[r]=n.reverseGetPrice(this._posEncoders,o-i-1,s,r-o)}for(s=0;s<f.kNumLenToPosStates;s++){r=this._posSlotEncoder[s],o=s<<f.kNumPosSlotBits;for(i=0;i<this._distTableSize;i++)this._posSlotPrices[o+i]=r.getPrice(i);for(i=f.kEndPosModelIndex;i<this._distTableSize;i++)this._posSlotPrices[o+i]+=(i>>>1)-1-f.kNumAlignBits<<e.kNumBitPriceShiftBits;i=s*f.kNumFullDistances;for(r=0;r<f.kStartPosModelIndex;r++)this._distancesPrices[i+r]=this._posSlotPrices[o+r];for(;r<f.kNumFullDistances;r++)this._distancesPrices[i+r]=this._posSlotPrices[o+h(r)]+t[r]}this._matchPriceCount=0},p.prototype.fillAlignPrices=function(){var e;for(e=0;e<f.kAlignTableSize;e++)this._alignPrices[e]=this._posAlignEncoder.reverseGetPrice(e);this._alignPriceCount=0},p.prototype.setAlgorithm=function(e){return!0},p.prototype.setDictionarySize=function(e){if(e<1<<f.kDicLogSizeMin||536870912<e)return!1;this._dictionarySize=e;for(var t=0;e>1<<t;)t++;return this._distTableSize=2*t,!0},p.prototype.setNumFastBytes=function(e){return 5>e||e>f.kMatchMaxLen?!1:(this._numFastBytes=e,!0)},p.prototype.setMatchFinder=function(e){if(0>e||2<e)return!1;var t=this._matchFinderType;return this._matchFinderType=e,this._matchFinder&&t!=this._matchFinderType&&(this._dictionarySizePrev=-1,this._matchFinder=null),!0},p.prototype.setLcLpPb=function(e,t,n){return 0>t||t>f.kNumLitPosStatesBitsEncodingMax||0>e||e>f.kNumLitContextBitsMax||0>n||n>f.kNumPosStatesBitsEncodingMax?!1:(this._numLiteralPosStateBits=t,this._numLiteralContextBits=e,this._posStateBits=n,this._posStateMask=(1<<this._posStateBits)-1,!0)},p.prototype.setEndMarkerMode=function(e){this._writeEndMark=e},p.EMatchFinderTypeBT2=0,p.EMatchFinderTypeBT4=1,o=p;var l=e.initBitModels,g=function(){this._choice=l(null,2),this._lowCoder=[],this._midCoder=[],this._highCoder=new r(8),this._numPosStates=0};g.prototype.create=function(e){for(;this._numPosStates<e;++this._numPosStates)this._lowCoder[this._numPosStates]=new r(3),this._midCoder[this._numPosStates]=new r(3)},g.prototype.init=function(){var e=this._numPosStates;for(l(this._choice);e--;)this._lowCoder[e].init(),this._midCoder[e].init();this._highCoder.init()},g.prototype.decode=function(e,t){return 0===e.decodeBit(this._choice,0)?this._lowCoder[t].decode(e):0===e.decodeBit(this._choice,1)?8+this._midCoder[t].decode(e):16+this._highCoder.decode(e)};var y=function(){};y.Decoder2=function(){this._decoders=l(null,768)},y.Decoder2.prototype.init=function(){l(this._decoders)},y.Decoder2.prototype.decodeNormal=function(e){var t=1;do t=t<<1|e.decodeBit(this._decoders,t);while(256>t);return t&255},y.Decoder2.prototype.decodeWithMatchByte=function(e,t){var n=1,r,i;do if(r=t>>7&1,t<<=1,i=e.decodeBit(this._decoders,(1+r<<8)+n),n=n<<1|i,r!==i){for(;256>n;)n=n<<1|e.decodeBit(this._decoders,n);break}while(256>n);return n&255},y.prototype.create=function(e,t){var n;if(!this._coders||this._numPrevBits!==t||this._numPosBits!==e)for(this._numPosBits=e,this._posMask=(1<<e)-1,this._numPrevBits=t,this._coders=[],n=1<<this._numPrevBits+this._numPosBits;n--;)this._coders[n]=new y.Decoder2},y.prototype.init=function(){for(var e=1<<this._numPrevBits+this._numPosBits;e--;)this._coders[e].init()},y.prototype.getDecoder=function(e,t){return this._coders[((e&this._posMask)<<this._numPrevBits)+((t&255)>>>8-this._numPrevBits)]},m=function(){var e;this._outWindow=new i,this._rangeDecoder=new t,this._isMatchDecoders=l(null,f.kNumStates<<f.kNumPosStatesBitsMax),this._isRepDecoders=l(null,f.kNumStates),this._isRepG0Decoders=l(null,f.kNumStates),this._isRepG1Decoders=l(null,f.kNumStates),this._isRepG2Decoders=l(null,f.kNumStates),this._isRep0LongDecoders=l(null,f.kNumStates<<f.kNumPosStatesBitsMax
),this._posSlotDecoder=[],this._posDecoders=l(null,f.kNumFullDistances-f.kEndPosModelIndex),this._posAlignDecoder=new r(f.kNumAlignBits),this._lenDecoder=new g,this._repLenDecoder=new g,this._literalDecoder=new y,this._dictionarySizeCheck=this._dictionarySize=-1;for(e=this._posStateMask=0;e<f.kNumLenToPosStates;e++)this._posSlotDecoder[e]=new r(f.kNumPosSlotBits)},m.prototype.setDictionarySize=function(e){return 0>e?!1:(this._dictionarySize!==e&&(this._dictionarySize=e,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},m.prototype.setLcLpPb=function(e,t,n){var r=1<<n;return e>f.kNumLitContextBitsMax||4<t||n>f.kNumPosStatesBitsMax?!1:(this._literalDecoder.create(t,e),this._lenDecoder.create(r),this._repLenDecoder.create(r),this._posStateMask=r-1,!0)},m.prototype.init=function(){var e=f.kNumLenToPosStates;this._outWindow.init(!1),l(this._isMatchDecoders),l(this._isRepDecoders),l(this._isRepG0Decoders),l(this._isRepG1Decoders),l(this._isRepG2Decoders),l(this._isRep0LongDecoders),l(this._posDecoders);for(this._literalDecoder.init();e--;)this._posSlotDecoder[e].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},m.prototype.code=function(e,t,n){var i=0,s=0,o=0,u=0,a=0,l=0,c;this._rangeDecoder.setStream(e),this._outWindow.setStream(t),this.init();for(e=f.stateInit();0>n||a<n;)if(t=a&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(e<<f.kNumPosStatesBitsMax)+t))l=this._literalDecoder.getDecoder(a,l),l=f.stateIsCharState(e)?l.decodeNormal(this._rangeDecoder):l.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(i)),this._outWindow.putByte(l),e=f.stateUpdateChar(e),a++;else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,e))l=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,e)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(e<<f.kNumPosStatesBitsMax)+t)&&(e=f.stateUpdateShortRep(e),l=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,e)?c=s:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,e)?c=o:(c=u,u=o),o=s),s=i,i=c),0===l&&(l=f.kMatchMinLen+this._repLenDecoder.decode(this._rangeDecoder,t),e=f.stateUpdateRep(e));else if(u=o,o=s,s=i,l=f.kMatchMinLen+this._lenDecoder.decode(this._rangeDecoder,t),e=f.stateUpdateMatch(e),t=this._posSlotDecoder[f.getLenToPosState(l)].decode(this._rangeDecoder),t<f.kStartPosModelIndex)i=t;else if(c=(t>>1)-1,i=(2|t&1)<<c,t<f.kEndPosModelIndex)i+=r.reverseDecode(this._posDecoders,i-t-1,this._rangeDecoder,c);else if(i+=this._rangeDecoder.decodeDirectBits(c-f.kNumAlignBits)<<f.kNumAlignBits,i+=this._posAlignDecoder.reverseDecode(this._rangeDecoder),0>i){if(-1===i)break;return!1}if(i>=a||i>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(i,l),a+=l,l=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},m.prototype.setDecoderProperties=function(e){var t,n,r;if(5>e.length)return!1;t=e[0]&255,n=t%9,t=~~(t/9);if(!this.setLcLpPb(n,t%5,~~(t/5)))return!1;n=t=0;for(r=1;4>n;n++,r*=256)t+=(e[1+n]&255)*r;return this.setDictionarySize(t)},m.prototype.setDecoderPropertiesFromStream=function(e){var t=[],n;for(n=0;5>n;n++)t[n]=e.readByte();return this.setDecoderProperties(t)},u=m}.call(this);var f=Object.create(null);f.decompress=function(e,t,n,r){var i=new u;if(!i.setDecoderProperties(e))throw"Incorrect stream properties";if(!i.code(t,n,r))throw"Error in data stream";return!0},f.decompressFile=function(e,t){var n=new u,r,i,s=!0;if(!("readByte"in e)){var o=e;e={size:o.length,pos:0,readByte:function(){return o[this.pos++]}}}if(!n.setDecoderPropertiesFromStream(e))throw"Incorrect stream properties";var f=0;r=0;for(i=1;4>r;r++,i*=256)f+=e.readByte()*i;var l=0;r=0;for(i=1;4>r;r++,i*=256)l+=e.readByte()*i;r=f+4294967296*l,4294967295===f&&4294967295===l?r=-1:2097152<=l&&(r=-1),t&&"writeByte"in t||(t={buffer:0>r?[]:a(r),pos:0,writeByte:function(e){this.buffer[this.pos++]=e}},s=t.buffer);if(!n.code(e,t,r))throw"Error in data stream";return s};var l=[{a:0,d:0,fb:0,mf:null,lc:0,lp:0,pb:0},{a:0,d:16,fb:64,mf:"hc4",lc:3,lp:0,pb:2},{a:0,d:20,fb:64,mf:"hc4",lc:3,lp:0,pb:2},{a:1,d:19,fb:64,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:20,fb:64,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:21,fb:128,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:22,fb:128,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:23,fb:128,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:24,fb:255,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:25,fb:255,mf:"bt4",lc:3,lp:0,pb:2}],c=function(e){var t=new o,n={a:1,d:23,fb:128,lc:3,lp:0,pb:2,mf:"bt4",eos:!1};if(e){"number"==typeof e&&(e=l[e]);for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return t.setAlgorithm(n.a),t.setDictionarySize(1<<+n.d),t.setNumFastBytes(+n.fb),t.setMatchFinder("bt4"===n.mf?o.EMatchFinderTypeBT4:o.EMatchFinderTypeBT2),t.setLcLpPb(+n.lc,+n.lp,+n.pb),t.setEndMarkerMode(!!n.eos),t};f.compress=function(e,t,n,r){return n=c(n),n.writeCoderProperties(t),n.code(e,t,-1,-1,{setProgress:function(e,t){r&&r(e,t)}}),!0},f.compressFile=function(e,t,n,r){n=c(n);var i=!0;if(!("readByte"in e)){var s=e;e={size:s.length,pos:0,readByte:function(){return s[this.pos++]},read:function(e,t,n){for(var r=0;r<n&&this.pos<s.length;)e[t++]=s[this.pos++],r++;return r}}}var o;return"size"in e&&0<=e.size?o=e.size:(o=-1,n.setEndMarkerMode(!0)),t&&"writeByte"in t||(t={buffer:[],pos:0,writeByte:function(e){this.buffer[this.pos++]=e},flush:function(){}},i=t.buffer),n.writeCoderProperties(t),function(e){var n;for(n=0;8>n;n++)t.writeByte(e&255),e=Math.floor(e/256)}(o),n.code(e,t,o,-1,{setProgress:function(e,t){r&&r(e,t)}}),i},global.LWF.LZMA=f}.call(this)}).call(this);